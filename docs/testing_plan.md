# TradingAgents-CN æµ‹è¯•è®¡åˆ’

**åˆ›å»ºæ—¥æœŸ**: 2026-01-19  
**ç‰ˆæœ¬**: v1.0.0-preview  
**èŒƒå›´**: å¤§è§„æ¨¡é‡æ„åçš„å›å½’æµ‹è¯•

---

## ğŸ“‹ æµ‹è¯•æ¦‚è¿°

### æµ‹è¯•ç›®æ ‡
- âœ… éªŒè¯æ•°æ®æºç®¡ç†å™¨é‡æ„æ­£ç¡®æ€§
- âœ… éªŒè¯Tushareæä¾›å™¨é‡æ„æ­£ç¡®æ€§
- âœ… éªŒè¯AkShareåŒæ­¥æœåŠ¡ç¨³å®šæ€§
- âœ… éªŒè¯åˆ†æå¸ˆå’Œç®¡ç†å™¨åŠŸèƒ½å®Œæ•´æ€§
- âœ… éªŒè¯LLMç¼“å­˜ç³»ç»Ÿæœ‰æ•ˆæ€§

### æµ‹è¯•èŒƒå›´
```
æ ¸å¿ƒæ¨¡å—:
- tradingagents/dataflows/data_source_manager.py (1590è¡Œä¿®æ”¹)
- tradingagents/dataflows/providers/china/tushare.py (1350è¡Œä¿®æ”¹)
- app/worker/akshare_sync_service.py (600è¡Œä¿®æ”¹)
- tradingagents/agents/* (7ä¸ªæ–‡ä»¶ä¿®æ”¹)
- tradingagents/cache/llm_cache.py (å°å¹…ä¿®æ”¹)
- docker/nginx.conf (æ–°å¢APIåå‘ä»£ç†)
```

---

## ğŸ§ª æµ‹è¯•è®¡åˆ’

### Phase 1: å•å…ƒæµ‹è¯• (ä¼˜å…ˆçº§: ğŸ”´ é«˜)

#### 1.1 æ•°æ®æºç®¡ç†å™¨æµ‹è¯•
```bash
# è¿è¡Œç°æœ‰æµ‹è¯•
python -m pytest tests/unit/test_data_source_manager.py -v

# æ‰‹åŠ¨æµ‹è¯•åœºæ™¯
1. æµ‹è¯•æ•°æ®æºä¼˜å…ˆçº§æ’åº
   - MongoDBç¼“å­˜ â†’ Tushare â†’ AkShare â†’ BaoStock
   
2. æµ‹è¯•æ•°æ®æºé™çº§æœºåˆ¶
   - Tushareå¤±è´¥ â†’ è‡ªåŠ¨åˆ‡æ¢åˆ°AkShare
   - AkShareå¤±è´¥ â†’ è‡ªåŠ¨åˆ‡æ¢åˆ°BaoStock
   
3. æµ‹è¯•å¸‚åœºåˆ†ç±»è¯†åˆ«
   - Aè‚¡: 600765, 000001
   - ç¾è‚¡: AAPL, TSLA
   - æ¸¯è‚¡: 00700, 09988

4. æµ‹è¯•å¹¶å‘è®¿é—®
   - å¤šçº¿ç¨‹åŒæ—¶è·å–ä¸åŒè‚¡ç¥¨æ•°æ®
   - éªŒè¯ç¼“å­˜ä¸€è‡´æ€§
```

**é¢„æœŸç»“æœ**:
- âœ… æ•°æ®æºåˆ‡æ¢æ­£å¸¸
- âœ… é™çº§æœºåˆ¶å·¥ä½œ
- âœ… å¸‚åœºåˆ†ç±»å‡†ç¡®
- âœ… æ— å¹¶å‘å†²çª

---

#### 1.2 Tushareæä¾›å™¨æµ‹è¯•
```bash
# è¿è¡Œç°æœ‰æµ‹è¯•
python -m pytest tests/unit/test_tushare_provider.py -v

# æ‰‹åŠ¨æµ‹è¯•åœºæ™¯
1. æµ‹è¯•è‚¡ç¥¨åŸºç¡€ä¿¡æ¯è·å–
   python scripts/test/test_tushare_standalone.py
   
2. æµ‹è¯•è´¢åŠ¡æ•°æ®è·å–
   python scripts/test/test_tushare_600765.py
   
3. æµ‹è¯•å®æ—¶è¡Œæƒ…è·å–
   # æ£€æŸ¥rt_kæ¥å£è°ƒç”¨
   # éªŒè¯æ•°æ®æ ¼å¼æ­£ç¡®æ€§

4. æµ‹è¯•é€Ÿç‡é™åˆ¶
   # è¿ç»­è°ƒç”¨100æ¬¡
   # éªŒè¯ä¸è¶…è¿‡ç§¯åˆ†é™åˆ¶
```

**é¢„æœŸç»“æœ**:
- âœ… æ•°æ®æ ¼å¼æ­£ç¡®
- âœ… é€Ÿç‡é™åˆ¶ç”Ÿæ•ˆ
- âœ… é”™è¯¯å¤„ç†æ­£å¸¸
- âœ… ç§¯åˆ†æ¶ˆè€—åˆç†

---

#### 1.3 AkShareåŒæ­¥æœåŠ¡æµ‹è¯•
```bash
# æ‰‹åŠ¨æµ‹è¯•åœºæ™¯
1. æµ‹è¯•åŸºç¡€ä¿¡æ¯åŒæ­¥
   python scripts/test/test_akshare_600765.py
   
2. æµ‹è¯•å†å²æ•°æ®åŒæ­¥
   # åŒæ­¥600765æœ€è¿‘1å¹´æ•°æ®
   # éªŒè¯æ•°æ®å®Œæ•´æ€§

3. æµ‹è¯•å®æ—¶è¡Œæƒ…åŒæ­¥
   # å¯åŠ¨åŒæ­¥æœåŠ¡
   # è§‚å¯Ÿæ—¥å¿—è¾“å‡º
```

**é¢„æœŸç»“æœ**:
- âœ… æ•°æ®åŒæ­¥æˆåŠŸ
- âœ… é”™è¯¯é‡è¯•æ­£å¸¸
- âœ… æ—¥å¿—è®°å½•å®Œæ•´

---

### Phase 2: é›†æˆæµ‹è¯• (ä¼˜å…ˆçº§: ğŸ”´ é«˜)

#### 2.1 ç«¯åˆ°ç«¯è‚¡ç¥¨åˆ†ææµ‹è¯•
```bash
# æµ‹è¯•å®Œæ•´åˆ†ææµç¨‹
python scripts/test/analyze_600765.py

# éªŒè¯ç‚¹:
1. å¸‚åœºåˆ†æå¸ˆ â†’ æŠ€æœ¯æŒ‡æ ‡è®¡ç®—æ­£ç¡®
2. åŸºæœ¬é¢åˆ†æå¸ˆ â†’ è´¢åŠ¡æ•°æ®å®Œæ•´
3. æ–°é—»åˆ†æå¸ˆ â†’ æ–°é—»è·å–æˆåŠŸ
4. ç¤¾äº¤åˆ†æå¸ˆ â†’ æƒ…ç»ªåˆ†ææ­£å¸¸
5. ç ”ç©¶å‘˜è¾©è®º â†’ é€»è¾‘æ­£ç¡®
6. é£é™©ç®¡ç† â†’ å†³ç­–åˆç†
```

**é¢„æœŸç»“æœ**:
- âœ… æ‰€æœ‰åˆ†æå¸ˆæ­£å¸¸å·¥ä½œ
- âœ… è¾©è®ºæœºåˆ¶è¿è¡Œ
- âœ… æœ€ç»ˆæŠ¥å‘Šç”Ÿæˆ

---

#### 2.2 å¤šå¸‚åœºæ•°æ®è·å–æµ‹è¯•
```bash
# æµ‹è¯•Aè‚¡
curl -X POST http://localhost:8000/api/analysis/analyze \
  -H "Content-Type: application/json" \
  -d '{"symbol": "600765", "market": "cn"}'

# æµ‹è¯•ç¾è‚¡
curl -X POST http://localhost:8000/api/analysis/analyze \
  -H "Content-Type: application/json" \
  -d '{"symbol": "AAPL", "market": "us"}'

# æµ‹è¯•æ¸¯è‚¡
curl -X POST http://localhost:8000/api/analysis/analyze \
  -H "Content-Type: application/json" \
  -d '{"symbol": "00700", "market": "hk"}'
```

**é¢„æœŸç»“æœ**:
- âœ… Aè‚¡æ•°æ®æ­£å¸¸
- âœ… ç¾è‚¡æ•°æ®æ­£å¸¸
- âœ… æ¸¯è‚¡æ•°æ®æ­£å¸¸

---

#### 2.3 Dockerç¯å¢ƒæµ‹è¯•
```bash
# 1. åœæ­¢ç°æœ‰å®¹å™¨
docker-compose down

# 2. é‡æ–°æ„å»º
docker-compose up -d --build

# 3. æµ‹è¯•APIä»£ç†
curl http://localhost:3000/api/health

# 4. æµ‹è¯•ç™»å½•
curl -X POST http://localhost:3000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"admin123"}'

# 5. æµ‹è¯•SSEè¿æ¥
curl -N http://localhost:3000/api/sse/health

# 6. æµ‹è¯•WebSocket
# ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·è¿æ¥ ws://localhost:3000/api/ws
```

**é¢„æœŸç»“æœ**:
- âœ… APIåå‘ä»£ç†æ­£å¸¸
- âœ… ç™»å½•æˆåŠŸï¼ˆæ— 405é”™è¯¯ï¼‰
- âœ… SSEå®æ—¶æ¨é€æ­£å¸¸
- âœ… WebSocketè¿æ¥æ­£å¸¸

---

### Phase 3: æ€§èƒ½æµ‹è¯• (ä¼˜å…ˆçº§: ğŸŸ¡ ä¸­)

#### 3.1 LLMç¼“å­˜æ•ˆæœæµ‹è¯•
```python
# æµ‹è¯•è„šæœ¬
import time
from tradingagents.cache.llm_cache import llm_cache

# ç¬¬ä¸€æ¬¡è°ƒç”¨ï¼ˆæ— ç¼“å­˜ï¼‰
start = time.time()
result1 = llm_cache.get("test_prompt", "gpt-4o", 0.7, 2000)
time1 = time.time() - start

# ç¬¬äºŒæ¬¡è°ƒç”¨ï¼ˆæœ‰ç¼“å­˜ï¼‰
start = time.time()
result2 = llm_cache.get("test_prompt", "gpt-4o", 0.7, 2000)
time2 = time.time() - start

# é¢„æœŸ: time2 << time1
print(f"æ— ç¼“å­˜: {time1:.2f}s, æœ‰ç¼“å­˜: {time2:.2f}s")
print(f"åŠ é€Ÿæ¯”: {time1/time2:.1f}x")
```

**é¢„æœŸç»“æœ**:
- âœ… ç¼“å­˜å‘½ä¸­ç‡ > 30%
- âœ… åŠ é€Ÿæ¯” > 10x
- âœ… Tokenæ¶ˆè€—å‡å°‘ > 30%

---

#### 3.2 æ•°æ®æºåˆ‡æ¢æ€§èƒ½æµ‹è¯•
```bash
# æµ‹è¯•é™çº§æœºåˆ¶è€—æ—¶
time python -c "
from tradingagents.dataflows.data_source_manager import DataSourceManager
mgr = DataSourceManager()
# Tushare â†’ AkShareé™çº§
data = mgr.get_stock_data('600765')
print(f'æ•°æ®æº: {mgr.current_source}')
"
```

**é¢„æœŸç»“æœ**:
- âœ… åˆ‡æ¢æ—¶é—´ < 5ç§’
- âœ… æœ€ç»ˆè·å–åˆ°æ•°æ®
- âœ… æ— é”™è¯¯æ—¥å¿—

---

### Phase 4: å‹åŠ›æµ‹è¯• (ä¼˜å…ˆçº§: ğŸŸ¢ ä½)

#### 4.1 å¹¶å‘åˆ†ææµ‹è¯•
```bash
# åŒæ—¶åˆ†æ10åªè‚¡ç¥¨
for i in {1..10}; do
  curl -X POST http://localhost:8000/api/analysis/analyze \
    -H "Content-Type: application/json" \
    -d "{\"symbol\":\"60076$i\", \"research_depth\": 1}" &
done
wait
```

**é¢„æœŸç»“æœ**:
- âœ… æ‰€æœ‰ä»»åŠ¡å®Œæˆ
- âœ… æ— æ­»é”
- âœ… å†…å­˜ç¨³å®š

---

#### 4.2 é•¿æ—¶é—´è¿è¡Œæµ‹è¯•
```bash
# è¿è¡Œ24å°æ—¶ç¨³å®šæ€§æµ‹è¯•
docker-compose up -d
# ç­‰å¾…24å°æ—¶
# æ£€æŸ¥:
# - å†…å­˜æ³„æ¼
# - è¿æ¥æ± çŠ¶æ€
# - æ—¥å¿—æ–‡ä»¶å¤§å°
```

---

## ğŸ“Š æµ‹è¯•æ£€æŸ¥æ¸…å•

### åŠŸèƒ½æµ‹è¯•
- [ ] Aè‚¡æ•°æ®è·å–æ­£å¸¸
- [ ] ç¾è‚¡æ•°æ®è·å–æ­£å¸¸
- [ ] æ¸¯è‚¡æ•°æ®è·å–æ­£å¸¸
- [ ] å®æ—¶è¡Œæƒ…æ˜¾ç¤ºæ­£ç¡®
- [ ] è´¢åŠ¡æ•°æ®å®Œæ•´
- [ ] æŠ€æœ¯æŒ‡æ ‡è®¡ç®—æ­£ç¡®
- [ ] æ–°é—»è·å–æ­£å¸¸
- [ ] æƒ…ç»ªåˆ†ææ­£å¸¸
- [ ] æŠ•èµ„è¾©è®ºæœºåˆ¶è¿è¡Œ
- [ ] é£é™©è¯„ä¼°æ­£å¸¸
- [ ] æœ€ç»ˆæŠ¥å‘Šç”Ÿæˆ

### é›†æˆæµ‹è¯•
- [ ] Dockeréƒ¨ç½²æˆåŠŸ
- [ ] å‰ç«¯è®¿é—®æ­£å¸¸
- [ ] ç™»å½•åŠŸèƒ½æ­£å¸¸
- [ ] APIåå‘ä»£ç†æ­£å¸¸
- [ ] SSEå®æ—¶æ¨é€æ­£å¸¸
- [ ] WebSocketè¿æ¥æ­£å¸¸
- [ ] æ‰¹é‡åˆ†æåŠŸèƒ½
- [ ] è‡ªé€‰è‚¡åŠŸèƒ½
- [ ] è‚¡ç¥¨ç­›é€‰åŠŸèƒ½

### æ€§èƒ½æµ‹è¯•
- [ ] LLMç¼“å­˜å‘½ä¸­ç‡ > 30%
- [ ] æ•°æ®æºåˆ‡æ¢æ—¶é—´ < 5ç§’
- [ ] å•åªè‚¡ç¥¨åˆ†æ < 5åˆ†é’Ÿ
- [ ] å¹¶å‘10åªè‚¡ç¥¨æ— é”™è¯¯
- [ ] å†…å­˜ä½¿ç”¨ç¨³å®š
- [ ] æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–

### å…¼å®¹æ€§æµ‹è¯•
- [ ] Chromeæµè§ˆå™¨
- [ ] Firefoxæµè§ˆå™¨
- [ ] Edgeæµè§ˆå™¨
- [ ] Windows 10/11
- [ ] macOS
- [ ] Linux

---

## ğŸ› å·²çŸ¥é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### é—®é¢˜1: Tushare Tokenæ— æ•ˆ
**çŠ¶æ€**: ğŸ”´ é˜»å¡  
**è§£å†³æ–¹æ¡ˆ**: 
```bash
# è®¿é—® https://tushare.pro/
# è·å–æ–°Tokenå¹¶æ›´æ–°.env
TUSHARE_TOKEN=your_new_token_here
docker-compose restart backend
```

---

### é—®é¢˜2: æ•°æ®æºé™çº§å¯èƒ½å¤±è´¥
**çŠ¶æ€**: ğŸŸ¡ ä¸­ç­‰  
**ç¼“è§£æªæ–½**:
- å¢åŠ é‡è¯•æ¬¡æ•°
- æ·»åŠ è¶…æ—¶ä¿æŠ¤
- å®Œå–„æ—¥å¿—è®°å½•

---

### é—®é¢˜3: å¤§è§„æ¨¡é‡æ„å¯èƒ½æœ‰éšè—bug
**çŠ¶æ€**: ğŸŸ¡ ä¸­ç­‰  
**ç¼“è§£æªæ–½**:
- åˆ†é˜¶æ®µæäº¤
- å®Œæ•´å›å½’æµ‹è¯•
- å‡†å¤‡å›æ»šæ–¹æ¡ˆ

---

## ğŸ“ˆ æµ‹è¯•æŠ¥å‘Šæ¨¡æ¿

```markdown
## æµ‹è¯•æ‰§è¡ŒæŠ¥å‘Š

**æµ‹è¯•æ—¥æœŸ**: YYYY-MM-DD
**æµ‹è¯•äººå‘˜**: 
**æµ‹è¯•ç¯å¢ƒ**: Docker / Local

### æµ‹è¯•ç»“æœæ±‡æ€»
- æ€»æµ‹è¯•ç”¨ä¾‹: 50
- é€šè¿‡: 45 (90%)
- å¤±è´¥: 3 (6%)
- é˜»å¡: 2 (4%)

### å¤±è´¥ç”¨ä¾‹è¯¦æƒ…
1. **ç”¨ä¾‹ID**: TC001
   **æè¿°**: Tushareæ•°æ®è·å–
   **å¤±è´¥åŸå› **: Tokenæ— æ•ˆ
   **ä¸¥é‡ç¨‹åº¦**: é«˜
   **çŠ¶æ€**: ğŸ”´ é˜»å¡

2. **ç”¨ä¾‹ID**: TC002
   **æè¿°**: æ•°æ®æºé™çº§
   **å¤±è´¥åŸå› **: è¶…æ—¶
   **ä¸¥é‡ç¨‹åº¦**: ä¸­
   **çŠ¶æ€**: ğŸŸ¡ å¾…ä¿®å¤

### æµ‹è¯•å»ºè®®
1. ä¼˜å…ˆä¿®å¤Tushare Tokené—®é¢˜
2. å¢åŠ æ•°æ®æºè¶…æ—¶æ—¶é—´
3. æ·»åŠ æ›´å¤šå•å…ƒæµ‹è¯•

### å›å½’æµ‹è¯•è®¡åˆ’
- ä¿®å¤åé‡æ–°æ‰§è¡ŒTC001
- æ·»åŠ æ•°æ®æºç›‘æ§
- æ¯å‘¨æ‰§è¡Œå®Œæ•´å›å½’æµ‹è¯•
```

---

## ğŸš€ æµ‹è¯•æ‰§è¡Œå‘½ä»¤

### å¿«é€Ÿæµ‹è¯•ï¼ˆ5åˆ†é’Ÿï¼‰
```bash
# 1. å¥åº·æ£€æŸ¥
curl http://localhost:3000/api/health

# 2. ç™»å½•æµ‹è¯•
curl -X POST http://localhost:3000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"admin123"}'

# 3. åˆ†æå•åªè‚¡ç¥¨
curl -X POST http://localhost:3000/api/analysis/analyze \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{"symbol":"600765","research_depth":1}'
```

### å®Œæ•´æµ‹è¯•ï¼ˆ30åˆ†é’Ÿï¼‰
```bash
# 1. å•å…ƒæµ‹è¯•
python -m pytest tests/unit/ -v

# 2. é›†æˆæµ‹è¯•
python -m pytest tests/integration/ -v

# 3. ç«¯åˆ°ç«¯æµ‹è¯•
python scripts/test/analyze_600765.py

# 4. æ€§èƒ½æµ‹è¯•
python scripts/test/test_performance.py
```

### å…¨é¢æµ‹è¯•ï¼ˆ2å°æ—¶ï¼‰
```bash
# æ‰§è¡Œæ‰€æœ‰æµ‹è¯•
python -m pytest tests/ -v --cov=tradingagents --cov-report=html

# ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š
open htmlcov/index.html
```

---

## ğŸ“ æµ‹è¯•æ”¯æŒ

**é‡åˆ°é—®é¢˜æ—¶**:
1. æŸ¥çœ‹æ—¥å¿—: `docker-compose logs -f backend`
2. æ£€æŸ¥æ•°æ®åº“: `docker exec -it tradingagents-mongodb mongosh`
3. æŸ¥çœ‹ç¼“å­˜: `docker exec -it tradingagents-redis redis-cli`

**å›æ»šæ–¹æ¡ˆ**:
```bash
# å¦‚æœæµ‹è¯•å¤±è´¥ï¼Œå›æ»šåˆ°é‡æ„å‰
git checkout main
git reset --hard b359446  # é‡æ„å‰çš„æäº¤
docker-compose up -d --build
```

---

## âœ… æµ‹è¯•å®Œæˆæ ‡å‡†

- [ ] æ‰€æœ‰P0æµ‹è¯•ç”¨ä¾‹é€šè¿‡ (100%)
- [ ] P1æµ‹è¯•ç”¨ä¾‹é€šè¿‡ç‡ > 90%
- [ ] æ— é˜»å¡æ€§bug
- [ ] æ€§èƒ½æŒ‡æ ‡è¾¾æ ‡
- [ ] æ–‡æ¡£æ›´æ–°å®Œæˆ

---

**æµ‹è¯•è´Ÿè´£äºº**: sermady  
**å®¡æ‰¹äºº**: å¾…å®š  
**ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2026-01-19
