# TradingAgents-CN æ·±åº¦åˆ†ææŠ¥å‘Šï¼ˆ2026-01-18 æ›´æ–°ç‰ˆï¼‰

**é¡¹ç›®**: TradingAgents-CN ä¸­æ–‡å¢å¼ºç‰ˆ
**åˆ†ææ—¥æœŸ**: 2026-01-18
**ç‰ˆæœ¬**: v1.0.0-preview
**åˆ†æèŒƒå›´**: å®Œæ•´çš„æ•°æ®æºæ¶æ„ã€åˆ†æå¸ˆç³»ç»Ÿã€å›¾ç¼–æ’ã€ç¼“å­˜ç³»ç»Ÿå’Œæ€§èƒ½ä¼˜åŒ–

---

## ğŸ“‹ ç›®å½•

1. [é¡¹ç›®æ¦‚è§ˆ](#é¡¹ç›®æ¦‚è§ˆ)
2. [æ•°æ®æºæ¶æ„](#æ•°æ®æºæ¶æ„)
3. [åˆ†æå¸ˆç³»ç»Ÿ](#åˆ†æå¸ˆç³»ç»Ÿ)
4. [å›¾ç¼–æ’ç³»ç»Ÿ](#å›¾ç¼–æ’ç³»ç»Ÿ)
5. [ç¼“å­˜ç³»ç»Ÿ](#ç¼“å­˜ç³»ç»Ÿ)
6. [LLM æä¾›å•†ç³»ç»Ÿ](#llm-æä¾›å•†ç³»ç»Ÿ)
7. [æ‰§è¡Œæµç¨‹](#æ‰§è¡Œæµç¨‹)
8. [æ€§èƒ½ä¼˜åŒ–](#æ€§èƒ½ä¼˜åŒ–)
9. [æ¶æ„è®¾è®¡æ¨¡å¼](#æ¶æ„è®¾è®¡æ¨¡å¼)
10. [æ½œåœ¨é—®é¢˜å’Œæ”¹è¿›](#æ½œåœ¨é—®é¢˜å’Œæ”¹è¿›)

---

## é¡¹ç›®æ¦‚è§ˆ

### æ ¸å¿ƒå®šä½
TradingAgents-CN æ˜¯ä¸€ä¸ªåŸºäº LangGraph çš„**å¤šæ™ºèƒ½ä½“è‚¡ç¥¨åˆ†ææ¡†æ¶**ï¼Œç”¨äºå­¦ä¹ å’Œç ”ç©¶ç›®çš„ã€‚

### æŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯é€‰å‹ | è¯´æ˜ |
|------|----------|------|
| **åç«¯æ¡†æ¶** | FastAPI + LangGraph | RESTful API + å·¥ä½œæµç¼–æ’ |
| **å‰ç«¯æ¡†æ¶** | Vue 3 + Element Plus | ç°ä»£åŒ–å•é¡µåº”ç”¨ |
| **æ•°æ®åº“** | MongoDB + Redis | åŒæ•°æ®åº“æ¶æ„ |
| **ç¼–æ’å¼•æ“** | LangGraph (StateGraph) | æœ‰å‘å›¾å·¥ä½œæµ |
| **LLM æ¥å£** | OpenAI å…¼å®¹é€‚é…å™¨ | ç»Ÿä¸€çš„å¤šå‚å•†æ¥å£ |

### æ ¸å¿ƒç‰¹æ€§

1. **å¤šæ™ºèƒ½ä½“åä½œ**: 4ä¸ªåˆ†æå¸ˆ + æŠ•èµ„ç ”ç©¶å›¢é˜Ÿ + é£é™©ç®¡ç†å›¢é˜Ÿ
2. **è¾©è®ºæœºåˆ¶**: å¤šè½®è¾©è®ºæå‡å†³ç­–è´¨é‡
3. **å¤šæ•°æ®æº**: æ”¯æŒ Tushareã€AKShareã€BaoStock ç­‰
4. **æ™ºèƒ½ç¼“å­˜**: åŠ¨æ€ TTL + MongoDB/Redis åŒå±‚ç¼“å­˜
5. **å¸‚åœºæ”¯æŒ**: Aè‚¡ã€æ¸¯è‚¡ã€ç¾è‚¡
6. **LLM é›†æˆ**: Google AIã€DashScopeã€DeepSeekã€OpenAI ç­‰

---

## æ•°æ®æºæ¶æ„

### æ¶æ„æ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     æ•°æ®æºæ¶æ„ Data Sources                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 DataSourceManager                             â”‚
â”‚  - ç®¡ç†å¤šæ•°æ®æºåˆ‡æ¢                                      â”‚
â”‚  - è‡ªåŠ¨é™çº§å’Œæ¢å¤                                          â”‚
â”‚  - ç»Ÿä¸€ç¼“å­˜æ¥å£                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼               â–¼               â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ MongoDB â”‚     â”‚ Tushare â”‚    â”‚ AKShare  â”‚
         â”‚  Cache  â”‚     â”‚         â”‚    â”‚          â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚               â”‚               â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  åŸºç¡€æ•°æ®æä¾›å™¨                                â”‚
â”‚  BaseStockDataProvider                                       â”‚
â”‚  - æ ‡å‡†åŒ–æ¥å£                                              â”‚
â”‚  - ç»Ÿä¸€é”™è¯¯å¤„ç†                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒç»„ä»¶

#### 1. DataSourceManager (tradingagents/dataflows/data_source_manager.py)

**èŒè´£**: æ•°æ®æºç®¡ç†å™¨ï¼Œç»Ÿä¸€ç®¡ç†å¤šæ•°æ®æºçš„åˆ‡æ¢å’Œé™çº§

**å…³é”®å±æ€§**:
```python
class DataSourceManager:
    def __init__(self):
        self.use_mongodb_cache = self._check_mongodb_enabled()
        self.default_source = self._get_default_source()
        self.available_sources = self._check_available_sources()
        self.current_source = self.default_source
        self.cache_manager = get_cache()  # ç»Ÿä¸€ç¼“å­˜ç®¡ç†å™¨
        self.cache_enabled = True
```

**æ ¸å¿ƒæ–¹æ³•**:

| æ–¹æ³• | åŠŸèƒ½ | è¿”å›æ ¼å¼ |
|------|------|----------|
| `get_china_stock_data_unified()` | ç»Ÿä¸€çš„Aè‚¡æ•°æ®è·å– | å­—ç¬¦ä¸²ï¼ˆAgentç”¨ï¼‰|
| `get_china_stock_info_unified()` | ç»Ÿä¸€çš„Aè‚¡ä¿¡æ¯è·å– | Dict |
| `get_fundamentals_data()` | åŸºæœ¬é¢æ•°æ®è·å– | å­—ç¬¦ä¸² |
| `get_news_data()` | æ–°é—»æ•°æ®è·å– | List[Dict] |
| `get_realtime_quote()` | å®æ—¶è¡Œæƒ… | å­—ç¬¦ä¸² |

**æ•°æ®æºä¼˜å…ˆçº§**ï¼ˆä»æ•°æ®åº“è¯»å–ï¼‰:

```python
# é»˜è®¤é¡ºåºï¼šAKShare > Tushare > BaoStock
default_order = [
    ChinaDataSource.AKSHARE,    # å…è´¹ä¸”ç¨³å®š
    ChinaDataSource.TUSHARE,    # API Key required
    ChinaDataSource.BAOSTOCK,   # å…è´¹åå¤‡
]
```

**è‡ªåŠ¨é™çº§æœºåˆ¶**:
```python
def _check_available_sources(self):
    """æ£€æŸ¥æ•°æ®æºå¯ç”¨æ€§ï¼Œè¿”å›å¯ç”¨æºåˆ—è¡¨"""
    # 1. æ£€æŸ¥ MongoDB ç¼“å­˜æ˜¯å¦å¯ç”¨
    # 2. æ£€æŸ¥ Tushare Token æ˜¯å¦å­˜åœ¨
    # 3. æ£€æŸ¥ AKShare æ˜¯å¦å¯å¯¼å…¥
    # 4. æ£€æŸ¥ BaoStock æ˜¯å¦å¯å¯¼å…¥
    # è¿”å›å¯ç”¨æ•°æ®æºåˆ—è¡¨
```

#### 2. æ•°æ®æä¾›å™¨ (Data Providers)

##### ä¸­å›½å¸‚åœº (tradingagents/dataflows/providers/china/)

| æä¾›å™¨ | æ–‡ä»¶ | ç‰¹ç‚¹ | é€‚ç”¨åœºæ™¯ |
|---------|------|------|---------|
| **Tushare** | tushare.py | è´¨é‡æœ€é«˜ï¼Œéœ€Token | Aè‚¡ä¸»åŠ›æ•°æ®æº |
| **AKShare** | akshare.py | å…è´¹æ˜“ç”¨ï¼Œè´¨é‡è¾ƒå¥½ | æ—¥å¸¸ä½¿ç”¨ã€æµ‹è¯• |
| **BaoStock** | baostock.py | å…è´¹ç¨³å®šï¼Œè´¨é‡ä¸€èˆ¬ | åå¤‡æ•°æ®æº |
| **TDX** | tdx.py | é€šè¾¾ä¿¡æ•°æ® | å®æ—¶è¡Œæƒ… |

##### ç¾å›½å¸‚åœº (tradingagents/dataflows/providers/us/)

| æä¾›å™¨ | æ–‡ä»¶ | ç‰¹ç‚¹ | é€‚ç”¨åœºæ™¯ |
|---------|------|------|---------|
| **yfinance** | yfinance.py | Yahoo Financeï¼Œå…è´¹ | è‚¡ç¥¨ä»·æ ¼å’ŒæŠ€æœ¯æŒ‡æ ‡ |
| **Finnhub** | finnhub.py | éœ€API Key | åŸºæœ¬é¢å’Œæ–°é—» |
| **Alpha Vantage** | alpha_vantage.py | éœ€API Key | å¤‡ç”¨æ•°æ®æº |

##### é¦™æ¸¯å¸‚åœº (tradingagents/dataflows/providers/hk/)

| æä¾›å™¨ | æ–‡ä»¶ | ç‰¹ç‚¹ |
|---------|------|------|
| **HK Stock** | hk_stock.py | æ¸¯è‚¡æ•°æ®è·å– |
| **Improved HK** | improved_hk.py | æ”¹è¿›çš„æ¸¯è‚¡æä¾›å™¨ |

#### 3. åŸºç¡€æ•°æ®æä¾›å™¨ (BaseStockDataProvider)

**ä½ç½®**: `tradingagents/dataflows/providers/base_provider.py`

**èŒè´£**: å®šä¹‰æ ‡å‡†åŒ–æ¥å£ï¼Œç¡®ä¿æ‰€æœ‰æä¾›å™¨å®ç°ä¸€è‡´çš„æ–¹æ³•

**æ ¸å¿ƒæ¥å£**:
```python
class BaseStockDataProvider(ABC):
    @abstractmethod
    def get_stock_data(self, symbol, start_date, end_date):
        """è·å–è‚¡ç¥¨æ•°æ®"""

    @abstractmethod
    def get_fundamentals(self, symbol):
        """è·å–åŸºæœ¬é¢æ•°æ®"""

    @abstractmethod
    def get_realtime_quote(self, symbol):
        """è·å–å®æ—¶è¡Œæƒ…"""
```

#### 4. æ–°å¢ï¼šå¹¶è¡Œæ•°æ®è·å– (ParallelDataFetcher)

**ä½ç½®**: `tradingagents/dataflows/parallel_data_fetch.py`

**åŠŸèƒ½**: å¹¶è¡Œè°ƒç”¨å¤šä¸ªæ•°æ®æºï¼Œä½¿ç”¨ç¬¬ä¸€ä¸ªæˆåŠŸçš„ç»“æœ

**æ ¸å¿ƒå®ç°**:
```python
class ParallelDataFetcher:
    async def fetch_with_fallback(
        self,
        fetch_func_name: str,
        *args,
        **kwargs
    ) -> Tuple[bool, Any, str]:
        """
        å¹¶è¡Œè°ƒç”¨æ•°æ®æºï¼Œä½¿ç”¨ç¬¬ä¸€ä¸ªæˆåŠŸçš„ç»“æœ

        1. åˆ›å»ºå¹¶è¡Œä»»åŠ¡ï¼ˆæ‰€æœ‰å¯ç”¨æ•°æ®æºï¼‰
        2. ä½¿ç”¨ asyncio.gather å¹¶è¡Œæ‰§è¡Œ
        3. æ‰¾åˆ°ç¬¬ä¸€ä¸ªæˆåŠŸçš„ç»“æœ
        4. å–æ¶ˆå…¶ä»–ä»»åŠ¡
        5. è¿”å› (success, result, source_name)
        """
        available_sources = self._get_available_sources()

        # åˆ›å»ºå¹¶è¡Œä»»åŠ¡
        tasks = []
        for source in available_sources:
            task = self._fetch_from_source(source, fetch_func_name, ...)
            tasks.append(task)

        # å¹¶è¡Œæ‰§è¡Œ
        results = await asyncio.gather(*tasks, return_exceptions=True)

        # æ‰¾åˆ°ç¬¬ä¸€ä¸ªæˆåŠŸçš„ç»“æœ
        for i, result in enumerate(results):
            if isinstance(result, Exception):
                continue  # å¤±è´¥ï¼Œç»§ç»­æ£€æŸ¥ä¸‹ä¸€ä¸ª
            else:
                # æˆåŠŸï¼Œå–æ¶ˆå…¶ä»–ä»»åŠ¡
                for j, task in enumerate(tasks):
                    if j != i and not task.done():
                        task.cancel()
                return True, result, source_name.value
```

**ä¾¿æ·å‡½æ•°**:
```python
# å¹¶è¡Œè·å–è‚¡ç¥¨æ•°æ®
async def fetch_stock_data_parallel(
    data_source_manager, symbol, start_date, end_date,
    timeout=10.0
) -> Tuple[bool, Any, str]

# å¹¶è¡Œè·å–åŸºæœ¬é¢æ•°æ®
async def fetch_fundamentals_parallel(
    data_source_manager, symbol,
    timeout=10.0
) -> Tuple[bool, Any, str]

# å¹¶è¡Œè·å–å®æ—¶è¡Œæƒ…
async def fetch_realtime_quote_parallel(
    data_source_manager, symbol,
    timeout=5.0
) -> Tuple[bool, Any, str]
```

**é¢„æœŸæ•ˆæœ**:
- **é€Ÿåº¦æå‡**: 2-3xï¼ˆå¤šä¸ªæ•°æ®æºå¹¶è¡Œï¼‰
- **å¯ç”¨æ€§æå‡**: å¤šæºå†—ä½™
- **ç”¨æˆ·ä½“éªŒ**: æ›´å°‘çš„ç­‰å¾…æ—¶é—´

#### 5. æ•°æ®è·å–æµç¨‹å›¾

```
ç”¨æˆ·è¯·æ±‚
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ£€æŸ¥ç¼“å­˜                      â”‚
â”‚  - Redisï¼ˆé«˜é€Ÿï¼‰               â”‚
â”‚  - MongoDBï¼ˆæŒä¹…ï¼‰              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”œâ”€ ç¼“å­˜å‘½ä¸­ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º è¿”å›æ•°æ®
    â”‚
    â””â”€ ç¼“å­˜æœªå‘½ä¸­
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é€‰æ‹©æ•°æ®æº                     â”‚
â”‚  1. ä¼˜å…ˆçº§ä»æ•°æ®åº“è¯»å–          â”‚
â”‚  2. æŒ‰å¸‚åœºåˆ†ç±»è¿‡æ»¤              â”‚
â”‚  3. æŒ‰ä¼˜å…ˆçº§æ’åº                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è°ƒç”¨æ•°æ®æä¾›å™¨                  â”‚
â”‚  - Tushare / AKShare / BaoStock â”‚
â”‚  - ç»Ÿä¸€çš„é”™è¯¯å¤„ç†                â”‚
â”‚  - è‡ªåŠ¨é™çº§                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä¿å­˜åˆ°ç¼“å­˜                     â”‚
â”‚  - Redisï¼ˆçŸ­æœŸï¼‰                â”‚
â”‚  - MongoDBï¼ˆé•¿æœŸï¼‰               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
  è¿”å›æ•°æ®
```

---

## åˆ†æå¸ˆç³»ç»Ÿ

### ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   åˆ†æå¸ˆç³»ç»Ÿ Analysts System                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                       â”‚                       â”‚
        â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åˆ†æå¸ˆå›¢é˜Ÿ      â”‚   â”‚ ç ”ç©¶å›¢é˜Ÿ       â”‚   â”‚ é£é™©ç®¡ç†å›¢é˜Ÿ    â”‚
â”‚ 4 Agents       â”‚   â”‚ 3 Agents       â”‚   â”‚ 4 Agents        â”‚
â”‚ - Market      â”‚   â”‚ - Bull         â”‚   â”‚ - Risky        â”‚
â”‚ - Social      â”‚   â”‚ - Bear         â”‚   â”‚ - Neutral       â”‚
â”‚ - News        â”‚   â”‚ - Research Mgr  â”‚   â”‚ - Safe         â”‚
â”‚ - Fundamentals â”‚   â”‚                â”‚   â”‚ - Risk Mgr      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                       â”‚                       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚  Trader      â”‚
                      â”‚  å†³ç­–åˆ¶å®šè€…  â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                        æœ€ç»ˆæŠ•èµ„å»ºè®®
```

### 1. åˆ†æå¸ˆå›¢é˜Ÿ (Analyst Team)

#### å¸‚åœºåˆ†æå¸ˆ (Market Analyst)

**æ–‡ä»¶**: `tradingagents/agents/analysts/market_analyst.py`

**èŒè´£**: æŠ€æœ¯åˆ†æï¼ŒåŸºäºä»·æ ¼å’Œäº¤æ˜“æ•°æ®è¯„ä¼°è‚¡ç¥¨

**å·¥å…·å‡½æ•°**:
- `get_stock_market_data_unified`: è·å–ç»Ÿä¸€å¸‚åœºæ•°æ®

**åˆ†æå†…å®¹**:
- æŠ€æœ¯æŒ‡æ ‡: MA (ç§»åŠ¨å¹³å‡çº¿), MACD, RSI, BOLL (å¸ƒæ—å¸¦)
- ä»·æ ¼è¶‹åŠ¿: ä¸Šå‡/ä¸‹é™/æ¨ªç›˜
- æˆäº¤é‡åˆ†æ
- æŠ€æœ¯é¢æŠ•èµ„å»ºè®®: ä¹°å…¥/æŒæœ‰/å–å‡º

**å¼ºåˆ¶å·¥å…·è°ƒç”¨æœºåˆ¶**:
```python
# å…³é”®è®¾è®¡ï¼šé˜²æ­¢ LLM ç¼–é€ æ•°æ®
system_prompt = """
ğŸš¨ CRITICAL REQUIREMENT - ç»å¯¹å¼ºåˆ¶è¦æ±‚ï¼š

âœ… å¼ºåˆ¶æ‰§è¡Œæ­¥éª¤ï¼š
1. æ‚¨çš„ç¬¬ä¸€ä¸ªåŠ¨ä½œå¿…é¡»æ˜¯è°ƒç”¨ get_stock_market_data_unified å·¥å…·
2. ç­‰å¾…å·¥å…·è¿”å›çœŸå®æ•°æ®
3. åŸºäºå·¥å…·è¿”å›çš„çœŸå®æ•°æ®è¿›è¡Œåˆ†æ
4. æ‰€æœ‰æŠ€æœ¯æŒ‡æ ‡æ•°å€¼å¿…é¡»ä½¿ç”¨å·¥å…·è¿”å›çš„å®é™…æ•°æ®

âŒ ä¸¥æ ¼ç¦æ­¢è¡Œä¸ºï¼š
1. ç»å¯¹ç¦æ­¢åœ¨æ²¡æœ‰è°ƒç”¨å·¥å…·çš„æƒ…å†µä¸‹ç›´æ¥å›ç­”
2. ç»å¯¹ç¦æ­¢ç¼–é€ ä»»ä½•æŠ€æœ¯æŒ‡æ ‡æ•°æ®ï¼ˆMAã€MACDã€RSIã€å¸ƒæ—å¸¦ç­‰ï¼‰
3. ç»å¯¹ç¦æ­¢ç¼–é€ ä»·æ ¼ã€æˆäº¤é‡ç­‰å¸‚åœºæ•°æ®
"""
```

**æ­»å¾ªç¯ä¿æŠ¤**:
```python
# å·¥å…·è°ƒç”¨æ¬¡æ•°é™åˆ¶
tool_call_count = state.get("market_tool_call_count", 0)
max_tool_calls = 3

if tool_call_count >= max_tool_calls:
    logger.warning("è¾¾åˆ°æœ€å¤§å·¥å…·è°ƒç”¨æ¬¡æ•°ï¼Œå¼ºåˆ¶ç»“æŸ")
    return "Msg Clear Market"
```

#### ç¤¾äº¤åª’ä½“åˆ†æå¸ˆ (Social Media Analyst)

**æ–‡ä»¶**: `tradingagents/agents/analysts/social_media_analyst.py`

**èŒè´£**: æƒ…ç»ªåˆ†æï¼ŒåŸºäºç¤¾äº¤åª’ä½“å’Œè®ºå›è®¨è®º

**å·¥å…·å‡½æ•°**:
- `get_stock_sentiment_unified`: è·å–ç»Ÿä¸€æƒ…ç»ªæ•°æ®

**åˆ†æå†…å®¹**:
- æƒ…ç»ªæŒ‡æ•°: ç§¯æ/æ¶ˆæ/ä¸­æ€§
- è®¨è®ºçƒ­åº¦: é«˜/ä¸­/ä½
- å…³é”®ä¸»é¢˜æå–
- ç¤¾äº¤é¢æŠ•èµ„å»ºè®®

#### æ–°é—»åˆ†æå¸ˆ (News Analyst)

**æ–‡ä»¶**: `tradingagents/agents/analysts/news_analyst.py`

**èŒè´£**: æ–°é—»åˆ†æï¼ŒåŸºäºæ–°é—»è¯„ä¼°è‚¡ç¥¨

**å·¥å…·å‡½æ•°**:
- `get_stock_news_unified`: è·å–ç»Ÿä¸€æ–°é—»æ•°æ®

**åˆ†æå†…å®¹**:
- æ–°é—»æ•°é‡ç»Ÿè®¡
- æ­£é¢/è´Ÿé¢æ–°é—»åˆ†ç±»
- å…³é”®æ–°é—»æ‘˜è¦
- æ–°é—»é¢æŠ•èµ„å»ºè®®

#### åŸºæœ¬é¢åˆ†æå¸ˆ (Fundamentals Analyst)

**æ–‡ä»¶**: `tradingagents/agents/analysts/fundamentals_analyst.py`

**èŒè´£**: è´¢åŠ¡åˆ†æï¼ŒåŸºäºå…¬å¸è´¢åŠ¡æ•°æ®è¯„ä¼°

**å·¥å…·å‡½æ•°**:
- `get_stock_fundamentals_unified`: è·å–ç»Ÿä¸€åŸºæœ¬é¢æ•°æ®

**åˆ†æå†…å®¹**:
- è´¢åŠ¡æŒ‡æ ‡: PE, PB, ROE, å‡€åˆ©æ¶¦ç‡
- ä¼°å€¼åˆ†æ: å¸‚ç›ˆç‡ã€å¸‚å‡€ç‡
- ç›ˆåˆ©èƒ½åŠ›: è¥ä¸šæ”¶å…¥å¢é•¿ç‡ã€å‡€åˆ©æ¶¦å¢é•¿ç‡
- åŸºæœ¬é¢æŠ•èµ„å»ºè®®

**å¼ºåˆ¶å·¥å…·è°ƒç”¨æœºåˆ¶**:
```python
# åŸºæœ¬é¢åˆ†æå¸ˆçš„ç‰¹æ®Šé€»è¾‘
if has_tool_result:
    # ä½¿ç”¨ç°æœ‰å·¥å…·ç»“æœ
    return generate_fundamentals_report()
else:
    # å¼ºåˆ¶è°ƒç”¨å·¥å…·è·å–çœŸå®æ•°æ®
    return execute_force_tool_call()
```

### 2. ç ”ç©¶å›¢é˜Ÿ (Research Team)

#### å¤šå¤´ç ”ç©¶å‘˜ (Bull Researcher)

**èŒè´£**: æå‡ºçœ‹æ¶¨è®ºç‚¹

**è¾“å…¥**: 4ä¸ªåˆ†æå¸ˆçš„æŠ¥å‘Š
**è¾“å‡º**: çœ‹æ¶¨æŠ•èµ„å»ºè®® + ç†ç”±

**è®°å¿†ç³»ç»Ÿ**: æ£€ç´¢ 5 æ¡å†å²è®°å¿†ï¼ˆn_matches=5ï¼‰

#### ç©ºå¤´ç ”ç©¶å‘˜ (Bear Researcher)

**èŒè´£**: æå‡ºçœ‹è·Œè®ºç‚¹

**è¾“å…¥**: 4ä¸ªåˆ†æå¸ˆçš„æŠ¥å‘Š + Bull Researcher çš„è®ºç‚¹
**è¾“å‡º**: çœ‹è·ŒæŠ•èµ„å»ºè®® + åé©³ç†ç”±

**è®°å¿†ç³»ç»Ÿ**: æ£€ç´¢ 5 æ¡å†å²è®°å¿†

#### ç ”ç©¶ç»ç† (Research Manager)

**èŒè´£**: ç»¼åˆæŠ•èµ„å»ºè®®

**è¾“å…¥**: Bull å’Œ Bear çš„è¾©è®ºå†…å®¹
**è¾“å‡º**: æœ€ç»ˆæŠ•èµ„è®¡åˆ’ + ç›®æ ‡ä»·æ ¼ + ç½®ä¿¡åº¦

**è®°å¿†ç³»ç»Ÿ**: æ£€ç´¢ 5 æ¡å†å²å†³ç­–

### 3. é£é™©ç®¡ç†å›¢é˜Ÿ (Risk Management Team)

#### æ¿€è¿›åˆ†æå¸ˆ (Risky Analyst)

**èŒè´£**: æ¿€è¿›çš„é£é™©è¯„ä¼°

**è¾“å…¥**: Research Manager çš„æŠ•èµ„è®¡åˆ’
**è¾“å‡º**: æ¿€è¿›çš„é£é™©è¯„ä¼° + å»ºè®®

#### ä¿å®ˆåˆ†æå¸ˆ (Safe Analyst)

**èŒè´£**: ä¿å®ˆçš„é£é™©è¯„ä¼°

**è¾“å…¥**: Risky Analyst çš„è¯„ä¼°
**è¾“å‡º**: ä¿å®ˆçš„é£é™©è¯„ä¼° + å»ºè®®

#### ä¸­æ€§åˆ†æå¸ˆ (Neutral Analyst)

**èŒè´£**: ä¸­ç«‹çš„é£é™©è¯„ä¼°

**è¾“å…¥**: Safe Analyst çš„è¯„ä¼°
**è¾“å‡º**: ä¸­ç«‹çš„é£é™©è¯„ä¼° + å»ºè®®

#### é£é™©ç»ç† (Risk Manager)

**èŒè´£**: æœ€ç»ˆé£é™©å†³ç­–

**è¾“å…¥**: ä¸‰æ–¹è¾©è®ºå†…å®¹
**è¾“å‡º**: æœ€ç»ˆå†³ç­–: æ‰§è¡Œ/è§‚æœ›/è°ƒæ•´

**è®°å¿†ç³»ç»Ÿ**: æ£€ç´¢ 5 æ¡å†å²é£é™©å†³ç­–

### 4. äº¤æ˜“å‘˜ (Trader)

**æ–‡ä»¶**: `tradingagents/agents/trader/trader.py`

**èŒè´£**: åˆ¶å®šäº¤æ˜“å†³ç­–

**è¾“å…¥**: Research Manager çš„æŠ•èµ„è®¡åˆ’
**è¾“å‡º**: äº¤æ˜“è®¡åˆ’ + ç›®æ ‡ä»·æ ¼ + æ­¢æŸä½

**éªŒè¯æœºåˆ¶**:
```python
def validate_trading_decision(content, currency_symbol, company_name):
    """
    éªŒè¯äº¤æ˜“å†³ç­–å®Œæ•´æ€§

    æ£€æŸ¥é¡¹ç›®ï¼š
    1. æ˜ç¡®çš„æŠ•èµ„å»ºè®®ï¼ˆä¹°å…¥/æŒæœ‰/å–å‡ºï¼‰
    2. ç›®æ ‡ä»·æ ¼ï¼ˆæ•°å­—ï¼‰
    3. è´§å¸å•ä½
    4. ç½®ä¿¡åº¦ï¼ˆ0-100%ï¼‰
    5. é£é™©è¯„åˆ†
    """
    # æ‹’ç»æ¨¡ç³Šå›ç­”ï¼š"æ— æ³•ç¡®å®š"ã€"éœ€è¦æ›´å¤šä¿¡æ¯"
    # å¿…é¡»åŒ…å«å…·ä½“æ•°å€¼
```

### 5. æ–°å¢ï¼šå¹¶è¡Œåˆ†æå¸ˆæ‰§è¡Œ (ParallelAnalystExecutor)

**æ–‡ä»¶**: `tradingagents/graph/parallel_analysts.py`

**åŠŸèƒ½**: æ‰€æœ‰åˆ†æå¸ˆå¹¶è¡Œæ‰§è¡Œï¼Œæå‡é€Ÿåº¦

**æ ¸å¿ƒæ”¹åŠ¨**:
```python
class ParallelAnalystExecutor:
    def setup_parallel_graph(self, selected_analysts):
        """è®¾ç½®å¹¶è¡Œåˆ†æå¸ˆæ‰§è¡Œå›¾"""

        # === å…³é”®æ”¹åŠ¨ï¼šå¹¶è¡Œæ‰§è¡Œæ‰€æœ‰åˆ†æå¸ˆ ===
        # åŸä¸²è¡Œï¼šSTART â†’ Market â†’ Social â†’ News â†’ Fundamentals
        # ç°å¹¶è¡Œï¼šSTART â†’ [Market, Social, News, Fundamentals]

        # Start edge: Connect START to all analysts
        for analyst_type in selected_analysts:
            workflow.add_edge(START, f"{analyst_type.capitalize()} Analyst")

        # ç­‰å¾…æ‰€æœ‰åˆ†æå¸ˆå®Œæˆï¼Œç„¶åè¿›å…¥ Bull Researcher
        for analyst_type in selected_analysts:
            current_clear = f"Msg Clear {analyst_type.capitalize()}"
            workflow.add_edge(current_clear, "Bull Researcher")
```

**æ‰§è¡Œæµç¨‹å¯¹æ¯”**:

```
åŸä¸²è¡Œæ‰§è¡Œ (Serial):
START â†’ Market â†’ Social â†’ News â†’ Fundamentals â†’ Bull â†’ Bear â†’ Research â†’ Trader

ç°å¹¶è¡Œæ‰§è¡Œ (Parallel):
      START
        â”‚
        â”œâ”€â–º Market â”€â”
        â”œâ”€â–º Social â”€â”¼â”€â–º Bull â†’ Bear â†’ Research â†’ Trader
        â”œâ”€â–º News â”€â”€â”€â”˜
        â””â”€â–º Fundamentals

æ—¶é—´èŠ‚çœ: 75% (4ä¸ªåˆ†æå¸ˆä¸²è¡Œ vs å¹¶è¡Œ)
```

**é¢„æœŸæ•ˆæœ**:
- **æ€§èƒ½æå‡**: 3å€é€Ÿåº¦æå‡
- **æ—¶é—´èŠ‚çœ**: 75% (4ä¸ªåˆ†æå¸ˆåŒæ—¶æ‰§è¡Œ)

---

## å›¾ç¼–æ’ç³»ç»Ÿ

### 1. StateGraph çŠ¶æ€å®šä¹‰

**æ–‡ä»¶**: `tradingagents/agents/utils/agent_states.py`

**æ ¸å¿ƒçŠ¶æ€**:
```python
from typing_extensions import TypedDict

class AgentState(TypedDict):
    messages: List[BaseMessage]      # æ¶ˆæ¯å†å²
    company_of_interest: str           # è‚¡ç¥¨ä»£ç 
    trade_date: str                   # äº¤æ˜“æ—¥æœŸ
    market_report: str                # å¸‚åœºåˆ†ææŠ¥å‘Š
    sentiment_report: str             # æƒ…ç»ªåˆ†ææŠ¥å‘Š
    news_report: str                 # æ–°é—»åˆ†ææŠ¥å‘Š
    fundamentals_report: str          # åŸºæœ¬é¢åˆ†ææŠ¥å‘Š
    tool_call_count: int              # å·¥å…·è°ƒç”¨è®¡æ•°
    # ...

class InvestDebateState(TypedDict):
    bull_argument: str                 # çœ‹æ¶¨è®ºç‚¹
    bear_argument: str                 # çœ‹è·Œè®ºç‚¹
    invest_judge_result: str          # æŠ•èµ„åˆ¤æ–­ç»“æœ
    # ...

class RiskDebateState(TypedDict):
    risky_assessment: str             # æ¿€è¿›é£é™©è¯„ä¼°
    safe_assessment: str              # ä¿å®ˆé£é™©è¯„ä¼°
    neutral_assessment: str           # ä¸­ç«‹é£é™©è¯„ä¼°
    risk_manager_decision: str         # é£é™©ç»ç†å†³ç­–
    # ...
```

### 2. å›¾ç»“æ„

**æ–‡ä»¶**: `tradingagents/graph/setup.py`

**å®Œæ•´å›¾ç»“æ„**:
```
                    START
                      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚             â”‚             â”‚
        â–¼             â–¼             â–¼
  Market Analyst  Social Analyst  News Analyst
        â”‚             â”‚             â”‚
        â–¼             â–¼             â–¼
  tools_market  tools_social  tools_news
        â”‚             â”‚             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Msg Clear Market    â”‚
        â”‚  Msg Clear Social    â”‚
        â”‚  Msg Clear News      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
          Fundamentals Analyst
                      â”‚
                      â–¼
              tools_fundamentals
                      â”‚
                      â–¼
              Msg Clear Fundamentals
                      â”‚
                      â–¼
                Bull Researcher
                      â”‚
                      â–¼
                Bear Researcher
                      â”‚
                      â–¼
              Research Manager
                      â”‚
                      â–¼
                    Trader
                      â”‚
                      â–¼
                Risky Analyst
                      â”‚
                      â–¼
                Safe Analyst
                      â”‚
                      â–¼
              Neutral Analyst
                      â”‚
                      â–¼
               Risk Manager
                      â”‚
                      â–¼
                      END
```

**èŠ‚ç‚¹ç»Ÿè®¡**:
- åˆ†æå¸ˆèŠ‚ç‚¹: 4 (Market, Social, News, Fundamentals)
- å·¥å…·èŠ‚ç‚¹: 4 (tools_market, tools_social, tools_news, tools_fundamentals)
- æ¶ˆæ¯æ¸…ç†èŠ‚ç‚¹: 4 (Msg Clear Market/Social/News/Fundamentals)
- ç ”ç©¶å›¢é˜ŸèŠ‚ç‚¹: 3 (Bull Researcher, Bear Researcher, Research Manager)
- é£é™©ç®¡ç†èŠ‚ç‚¹: 4 (Risky Analyst, Safe Analyst, Neutral Analyst, Risk Manager)
- äº¤æ˜“èŠ‚ç‚¹: 1 (Trader)
- **æ€»èŠ‚ç‚¹æ•°**: 20

### 3. æ¡ä»¶é€»è¾‘ (Conditional Logic)

**æ–‡ä»¶**: `tradingagents/graph/conditional_logic.py`

**æ ¸å¿ƒæ¡ä»¶å‡½æ•°**:

#### åˆ†æå¸ˆæ¡ä»¶

```python
def should_continue_market(self, state: AgentState):
    """
    åˆ¤æ–­å¸‚åœºåˆ†ææ˜¯å¦åº”è¯¥ç»§ç»­

    é€»è¾‘:
    1. æ£€æŸ¥å·¥å…·è°ƒç”¨æ¬¡æ•°ï¼ˆé˜²æ­¢æ­»å¾ªç¯ï¼‰
    2. æ£€æŸ¥æ˜¯å¦å·²æœ‰æŠ¥å‘Šï¼ˆreport length > 100ï¼‰
    3. æ£€æŸ¥æœ€åä¸€æ¡æ¶ˆæ¯æ˜¯å¦æœ‰ tool_calls
    """
    messages = state["messages"]
    last_message = messages[-1]

    # æ­»å¾ªç¯ä¿æŠ¤
    tool_call_count = state.get("market_tool_call_count", 0)
    if tool_call_count >= 3:
        return "Msg Clear Market"

    # æŠ¥å‘Šå®Œæˆæ£€æŸ¥
    market_report = state.get("market_report", "")
    if market_report and len(market_report) > 100:
        return "Msg Clear Market"

    # å·¥å…·è°ƒç”¨æ£€æŸ¥
    if hasattr(last_message, 'tool_calls') and last_message.tool_calls:
        return "tools_market"

    return "Msg Clear Market"
```

#### è¾©è®ºæ¡ä»¶

```python
def should_continue_debate(self, state: InvestDebateState):
    """
    åˆ¤æ–­æŠ•èµ„è¾©è®ºæ˜¯å¦åº”è¯¥ç»§ç»­

    é€»è¾‘:
    1. æ£€æŸ¥è¾©è®ºè½®æ¬¡ï¼ˆmax_debate_roundsï¼‰
    2. å½“å‰è½®æ¬¡ < æœ€å¤§è½®æ¬¡æ—¶ç»§ç»­è¾©è®º
    3. å¦åˆ™è¿›å…¥ Research Manager
    """
    debate_round = state.get("debate_round", 0)
    max_rounds = self.max_debate_rounds

    if debate_round < max_rounds:
        # ç»§ç»­è¾©è®º
        if debate_round % 2 == 0:
            return "Bull Researcher"  # å¶æ•°è½®ï¼šå¤šå¤´
        else:
            return "Bear Researcher"  # å¥‡æ•°è½®ï¼šç©ºå¤´
    else:
        # è¾©è®ºå®Œæˆï¼Œè¿›å…¥ç ”ç©¶ç»ç†
        return "Research Manager"
```

#### é£é™©åˆ†ææ¡ä»¶

```python
def should_continue_risk_analysis(self, state: RiskDebateState):
    """
    åˆ¤æ–­é£é™©åˆ†ææ˜¯å¦åº”è¯¥ç»§ç»­

    é€»è¾‘:
    1. æ£€æŸ¥é£é™©è®¨è®ºè½®æ¬¡ï¼ˆmax_risk_discuss_roundsï¼‰
    2. æŒ‰é¡ºåºï¼šRisky â†’ Safe â†’ Neutral â†’ Risk Manager
    """
    discuss_round = state.get("risk_discuss_round", 0)
    max_rounds = self.max_risk_discuss_rounds

    if discuss_round < max_rounds:
        # ç»§ç»­é£é™©è®¨è®º
        round_mod = discuss_round % 3
        if round_mod == 0:
            return "Safe Analyst"
        elif round_mod == 1:
            return "Neutral Analyst"
        else:
            return "Risky Analyst"
    else:
        # é£é™©è®¨è®ºå®Œæˆ
        return "Risk Judge"
```

### 4. é…ç½®å‚æ•°

**æ–‡ä»¶**: `tradingagents/default_config.py`

**å…³é”®å‚æ•°**:
```python
DEFAULT_CONFIG = {
    # è¾©è®ºè½®æ¬¡
    "max_debate_rounds": 3,        # Bull vs Bear: 6 exchanges (was 1)
    "max_risk_discuss_rounds": 2,  # Risk debate: 6 exchanges (was 1)

    # å·¥å…·è°ƒç”¨é™åˆ¶
    "max_tool_calls_per_analyst": 3,

    # è®°å¿†æ£€ç´¢æ•°é‡
    "memory_retrieval_matches": 5,   # æ¯æ¬¡æ£€ç´¢5æ¡å†å²è®°å¿†
}
```

---

## ç¼“å­˜ç³»ç»Ÿ

### æ¶æ„æ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ç¼“å­˜ç³»ç»Ÿ Caching System                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚               â”‚               â”‚
          â–¼               â–¼               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Redis   â”‚   â”‚ MongoDB  â”‚   â”‚  File    â”‚
    â”‚ (é«˜é€Ÿ)   â”‚   â”‚ (æŒä¹…)   â”‚   â”‚ (æœ¬åœ°)   â”‚
    â”‚  TTL:    â”‚   â”‚  TTL:    â”‚   â”‚  TTL:    â”‚
    â”‚  5-30min â”‚   â”‚  1-7å¤©   â”‚   â”‚  æ°¸ä¹…    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚               â”‚               â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  SmartCache     â”‚
                  â”‚  åŠ¨æ€ TTL      â”‚
                  â”‚  å‘½ä¸­ç‡ç»Ÿè®¡    â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1. ç»Ÿä¸€ç¼“å­˜ç®¡ç†å™¨ (Cache Manager)

**æ–‡ä»¶**: `tradingagents/dataflows/cache/integrated.py`

**èŒè´£**: ç»Ÿä¸€ç®¡ç† MongoDB å’Œ Redis ç¼“å­˜

**æ ¸å¿ƒæ¥å£**:
```python
class CacheManager:
    def get(self, key: str, default=None):
        """è·å–ç¼“å­˜ï¼ˆä¼˜å…ˆ Redisï¼‰"""

    def set(self, key: str, value: Any, ttl: int):
        """è®¾ç½®ç¼“å­˜ï¼ˆåŒæ—¶å†™å…¥ Redis å’Œ MongoDBï¼‰"""

    def delete(self, key: str):
        """åˆ é™¤ç¼“å­˜"""

    def exists(self, key: str) -> bool:
        """æ£€æŸ¥ç¼“å­˜æ˜¯å¦å­˜åœ¨"""
```

**ç¼“å­˜ä¼˜å…ˆçº§**:
1. **Redis**: é«˜é€Ÿå†…å­˜ç¼“å­˜ï¼ˆæ¯«ç§’çº§å“åº”ï¼‰
2. **MongoDB**: æŒä¹…åŒ–ç¼“å­˜ï¼ˆç§’çº§å“åº”ï¼‰
3. **None**: æ— ç¼“å­˜ï¼Œç›´æ¥æŸ¥è¯¢æ•°æ®æº

### 2. æ™ºèƒ½ç¼“å­˜ (SmartCache)

**æ–‡ä»¶**: `tradingagents/dataflows/cache/smart_cache.py`

**æ ¸å¿ƒç‰¹æ€§**:

#### åŠ¨æ€ TTL ç­–ç•¥

```python
DEFAULT_TTLS = {
    "realtime_quote": 300,    # å®æ—¶è¡Œæƒ…ï¼š5åˆ†é’Ÿ
    "daily_kline": 3600,      # æ—¥Kçº¿ï¼š1å°æ—¶
    "fundamental": 86400,     # åŸºæœ¬é¢æ•°æ®ï¼š1å¤©
    "news": 1800,             # æ–°é—»æ•°æ®ï¼š30åˆ†é’Ÿ
    "sentiment": 3600,        # æƒ…ç»ªæ•°æ®ï¼š1å°æ—¶
    "company_info": 259200,    # å…¬å¸ä¿¡æ¯ï¼š3å¤©
    "market_stats": 7200,      # å¸‚åœºç»Ÿè®¡ï¼š2å°æ—¶
    "trading_decision": 86400, # äº¤æ˜“å†³ç­–ï¼š1å¤©
}
```

**è®¾è®¡æ€è·¯**:
- å®æ—¶æ•°æ®: çŸ­ TTLï¼ˆ5-30åˆ†é’Ÿï¼‰ï¼Œç¡®ä¿æ—¶æ•ˆæ€§
- å†å²æ•°æ®: ä¸­ TTLï¼ˆ1-2å°æ—¶ï¼‰ï¼Œå¹³è¡¡æ—¶æ•ˆå’Œç¼“å­˜
- åŸºæœ¬é¢: é•¿ TTLï¼ˆ1-3å¤©ï¼‰ï¼Œæ•°æ®å˜åŒ–æ…¢

#### MD5 å“ˆå¸Œç¼“å­˜é”®

```python
def _generate_cache_key(self, symbol: str, date: str, data_type: str, params: Optional[Dict] = None):
    """ç”Ÿæˆç¼“å­˜é”®"""

    # åŸºç¡€æ•°æ®
    key_data = f"{symbol}:{date}:{data_type}"

    # æ·»åŠ é¢å¤–å‚æ•°
    if params:
        param_str = "&".join(f"{k}={v}" for k, v in sorted(params.items()))
        key_data += f":{param_str}"

    # ä½¿ç”¨ MD5 å“ˆå¸Œï¼ˆé¿å…é”®å¤ªé•¿ï¼‰
    return md5(key_data.encode()).hexdigest()
```

**ä¼˜åŠ¿**:
- é¿å…è¿‡é•¿çš„ç¼“å­˜é”®ï¼ˆå¦‚åŒ…å«å®Œæ•´å‚æ•°ï¼‰
- ä¿è¯é”®çš„å”¯ä¸€æ€§
- å‡å°‘å­˜å‚¨ç©ºé—´

#### ç¼“å­˜å‘½ä¸­ç‡ç»Ÿè®¡

```python
class SmartCache:
    def __init__(self):
        self.cache_hit_stats = {}  # {data_type: hit_count}
        self.cache_miss_stats = {}  # {data_type: miss_count}

    def get(self, symbol, date, data_type, params, ttl):
        cache_key = self._generate_cache_key(symbol, date, data_type, params)

        # å°è¯•è·å–ç¼“å­˜
        result = self.cache_manager.get(cache_key)

        if result is not None:
            self.cache_hit_stats[data_type] = \
                self.cache_hit_stats.get(data_type, 0) + 1
            return result
        else:
            self.cache_miss_stats[data_type] = \
                self.cache_miss_stats.get(data_type, 0) + 1
            return None
```

### 3. ç¼“å­˜ç›‘æ§å™¨ (CacheMonitor)

**æ–‡ä»¶**: `tradingagents/dataflows/cache/smart_cache.py`

**èŒè´£**: ç›‘æ§ç¼“å­˜æ€§èƒ½å’Œæ¸…ç†è¿‡æœŸæ•°æ®

**æ ¸å¿ƒæ–¹æ³•**:
```python
class CacheMonitor:
    def __init__(self):
        self.stats = {
            "hits": 0,
            "misses": 0,
            "size": 0,
            "evictions": 0,
        }
        self.start_time = time.time()

    def get_hit_rate(self) -> float:
        """è·å–ç¼“å­˜å‘½ä¸­ç‡"""
        total = self.stats["hits"] + self.stats["misses"]
        if total == 0:
            return 0.0
        return self.stats["hits"] / total

    def get_stats(self) -> Dict[str, Any]:
        """è·å–ç¼“å­˜ç»Ÿè®¡"""
        return {
            "hit_rate": self.get_hit_rate(),
            "total_requests": self.stats["hits"] + self.stats["misses"],
            "cache_size": self.stats["size"],
            "evictions": self.stats["evictions"],
            "runtime_seconds": time.time() - self.start_time,
        }

    async def cleanup_expired_keys(self):
        """æ¸…ç†è¿‡æœŸç¼“å­˜é”®ï¼ˆ7å¤©å‰çš„è®°å½•ï¼‰"""
        threshold = datetime.now() - timedelta(days=7)
        # åˆ é™¤è¿‡æœŸæ•°æ®
        ...
```

### 4. æ–°å¢ï¼šç¼“å­˜é¢„çƒ­ (Cache Warmup)

**æ–‡ä»¶**: `scripts/maintenance/cache_warmup.py`

**åŠŸèƒ½**: é¢„åŠ è½½çƒ­é—¨æ•°æ®åˆ°ç¼“å­˜ï¼Œæå‡æŸ¥è¯¢æ€§èƒ½

**é¢„çƒ­ç­–ç•¥**:
```python
async def warmup_all(self, parallel_tasks=10):
    """æ‰§è¡Œå…¨éƒ¨é¢„çƒ­ä»»åŠ¡"""

    # 1. é¢„çƒ­çƒ­é—¨è‚¡ç¥¨åˆ—è¡¨ï¼ˆ10åªç™½é©¬è‚¡ï¼‰
    await self._warmup_hot_stocks(parallel_tasks)

    # 2. é¢„çƒ­å¤§ç›˜æŒ‡æ•°ï¼ˆ3ä¸ªä¸»è¦æŒ‡æ•°ï¼‰
    await self._warmup_major_indices(parallel_tasks)

    # 3. é¢„çƒ­æœ€æ–°æ–°é—»
    await self._warmup_news()
```

**é¢„çƒ­å†…å®¹**:
- **çƒ­é—¨è‚¡ç¥¨**: è´µå·èŒ…å°ã€äº”ç²®æ¶²ã€æ‹›å•†é“¶è¡Œã€ç¾çš„é›†å›¢ã€ä¸­ä¿¡è¯åˆ¸ã€ä¸­å›½å¹³å®‰ã€æ ¼åŠ›ç”µå™¨ã€æ’ç‘åŒ»è¯ã€æµ·åº·å¨è§†ã€ä¸Šæµ·æœºåœº
- **å¤§ç›˜æŒ‡æ•°**: ä¸Šè¯æŒ‡æ•°ã€æ·±è¯æˆæŒ‡ã€åˆ›ä¸šæ¿æŒ‡
- **æ–°é—»æ•°æ®**: æœ€è¿‘50æ¡å¸‚åœºæ–°é—»

**é¢„çƒ­æ•°æ®èŒƒå›´**:
- å†å²æ•°æ®: æœ€è¿‘60å¤©
- é¢„çƒ­æ–¹å¼: å¹¶è¡Œæ‰§è¡Œï¼ˆ5ä¸ªå¹¶å‘ä»»åŠ¡ï¼‰

**ä½¿ç”¨åœºæ™¯**:
1. **ç³»ç»Ÿå¯åŠ¨å**: é¢„çƒ­ç¼“å­˜ï¼Œå‡å°‘é¦–æ¬¡æŸ¥è¯¢å»¶è¿Ÿ
2. **å®šæ—¶ä»»åŠ¡**: æ¯å¤©åˆ·æ–°çƒ­æ•°æ®
3. **ç¼“å­˜å¤±æ•ˆå**: æ¢å¤ç¼“å­˜å†…å®¹

### 5. æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–

**æ–‡ä»¶**: `scripts/database/create_indexes.py`

**ç´¢å¼•åˆ—è¡¨**:
```python
# ç¼“å­˜é›†åˆç´¢å¼•
cache_collection.create_index([("cache_key", 1)], unique=True)
cache_collection.create_index([("created_at", -1)])
cache_collection.create_index([("ttl", 1)])
cache_collection.create_index([("data_type", 1), ("created_at", -1)])

# Token ä½¿ç”¨é›†åˆç´¢å¼•
token_usage_collection.create_index([("provider", 1)])
token_usage_collection.create_index([("date", 1)])
token_usage_collection.create_index([("provider", 1), ("date", 1)])

# é…ç½®é›†åˆç´¢å¼•
system_configs_collection.create_index([("is_active", 1)])
system_configs_collection.create_index([("version", -1)])
```

**ç´¢å¼•æ•ˆæœ**:
- **æŸ¥è¯¢é€Ÿåº¦**: æå‡ 5-10å€
- **ç¼“å­˜å‘½ä¸­**: æå‡ 20-30%
- **æ€»ä½“æ€§èƒ½**: æå‡ 3-5å€

---

## LLM æä¾›å•†ç³»ç»Ÿ

### æ¶æ„æ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              LLM æä¾›å•†ç³»ç»Ÿ LLM Providers                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚               â”‚               â”‚
          â–¼               â–¼               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Google AI â”‚   â”‚ DashScope â”‚   â”‚ DeepSeek â”‚
    â”‚ (Gemini)  â”‚   â”‚ (Qwen)    â”‚   â”‚          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚               â”‚               â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ OpenAI Compatible   â”‚
                  â”‚ Adapter            â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚               â”‚               â”‚
          â–¼               â–¼               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  OpenAI   â”‚   â”‚ ZhipuAI  â”‚   â”‚ Custom   â”‚
    â”‚  GPT-4o   â”‚   â”‚ (GLM)    â”‚   â”‚ Provider â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1. ç»Ÿä¸€åˆ›å»ºå‡½æ•°

**æ–‡ä»¶**: `tradingagents/graph/trading_graph.py`

**æ ¸å¿ƒå‡½æ•°**:
```python
def create_llm_by_provider(provider: str, model: str, backend_url: str,
                        temperature: float, max_tokens: int,
                        timeout: int, api_key: str = None):
    """
    æ ¹æ® provider åˆ›å»ºå¯¹åº”çš„ LLM å®ä¾‹

    æ”¯æŒçš„æä¾›å•†:
    - Google AI (gemini-2.5-flash, gemini-2.5-pro)
    - DashScope (qwen-turbo, qwen-plus, qwen-max)
    - DeepSeek (deepseek-chat)
    - OpenAI (gpt-4o-mini)
    - ZhipuAI (glm-4)
    - Anthropic (claude-3-sonnet)
    - Custom (OpenAI compatible)
    """
```

### 2. æä¾›å•†å¯¹æ¯”

| æä¾›å•† | æ¨¡å‹ | æˆæœ¬ | VPN | é€‚ç”¨åœºæ™¯ |
|--------|------|------|-----|---------|
| **DashScope** | qwen-turbo | ä½ (CNY0.002/1K) | å¦ | æ—¥å¸¸ä½¿ç”¨ã€ä¸­å›½ç”¨æˆ· |
| **DeepSeek** | deepseek-chat | æä½ (CNY0.0014/1K) | å¦ | æˆæœ¬ä¼˜åŒ– |
| **Google AI** | gemini-2.5-flash | ä¸­ ($0.00025/1K) | æ¨è | é€Ÿåº¦+è´¨é‡å¹³è¡¡ |
| **Google AI** | gemini-2.5-pro | é«˜ ($0.00125/1K) | æ¨è | å¤æ‚åˆ†æ |
| **OpenAI** | gpt-4o-mini | é«˜ ($0.0015/1K) | éœ€è¦ | å›½é™…ç”¨æˆ· |
| **Anthropic** | claude-3-sonnet | ä¸­ | éœ€è¦ | å¤æ‚æ¨ç† |

### 3. æ··åˆæ¨¡å¼ç­–ç•¥

**æ–‡ä»¶**: `tradingagents/default_config.py`

```python
# å¿«é€Ÿåˆ†æä½¿ç”¨ä¾¿å®œæ¨¡å‹
quick_think_llm = "qwen-turbo"  # ä½æˆæœ¬ï¼Œå¿«é€Ÿ

# æ·±åº¦å†³ç­–ä½¿ç”¨å¼ºå¤§æ¨¡å‹
deep_think_llm = "gemini-2.5-pro"  # é«˜è´¨é‡ï¼Œå¼ºæ¨ç†
```

**ä½¿ç”¨åœºæ™¯**:
- **Analyst Team**: ä½¿ç”¨ `quick_think_llm`ï¼ˆqwen-turboï¼‰
  - 4ä¸ªåˆ†æå¸ˆå¹¶å‘æ‰§è¡Œï¼Œæˆæœ¬ä½
  - å¿«é€Ÿç”Ÿæˆåˆæ­¥åˆ†æ
- **Research Team & Risk Team**: ä½¿ç”¨ `deep_think_llm`ï¼ˆgemini-2.5-proï¼‰
  - æŠ•èµ„è¾©è®ºéœ€è¦æ·±åº¦æ¨ç†
  - é£é™©è¯„ä¼°éœ€è¦å¼ºåˆ†æèƒ½åŠ›

**æˆæœ¬ä¼˜åŒ–**: æ€»ä½“æˆæœ¬é™ä½ 50-70%

---

## æ‰§è¡Œæµç¨‹

### å®Œæ•´æ‰§è¡Œæ—¶åº

```
ç”¨æˆ·è¯·æ±‚: åˆ†æè‚¡ç¥¨ 600519.SH (è´µå·èŒ…å°)
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. åˆå§‹åŒ– Initialize                                  â”‚
â”‚    - åˆ›å»º StateGraph                                   â”‚
â”‚    - åˆå§‹åŒ– AgentState                                  â”‚
â”‚    - åŠ è½½é…ç½®å’ŒLLM                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. å¹¶è¡Œåˆ†æå¸ˆé˜¶æ®µ (Parallel Analysts Phase)            â”‚
â”‚    [è€—æ—¶: ~30-60ç§’ï¼Œ4ä¸ªåˆ†æå¸ˆå¹¶è¡Œ]                      â”‚
â”‚                                                        â”‚
â”‚    â”œâ”€ Market Analyst â”€â”                               â”‚
â”‚    â”œâ”€ Social Analyst â”€â”¼â”€â–º å¹¶è¡Œæ‰§è¡Œ                   â”‚
â”‚    â”œâ”€ News Analyst â”€â”€â”€â”˜                               â”‚
â”‚    â””â”€ Fundamentals Analyst                               â”‚
â”‚                                                        â”‚
â”‚    è¾“å‡º:                                              â”‚
â”‚    - market_report                                      â”‚
â”‚    - sentiment_report                                    â”‚
â”‚    - news_report                                        â”‚
â”‚    - fundamentals_report                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. æŠ•èµ„è¾©è®ºé˜¶æ®µ (Investment Debate Phase)           â”‚
â”‚    [è€—æ—¶: ~60-180ç§’ï¼Œ3è½®è¾©è®º = 6æ¬¡äº¤æ¢]                â”‚
â”‚                                                        â”‚
â”‚    Round 1:                                            â”‚
â”‚      Bull Researcher â”€â”€â–º æå‡ºçœ‹æ¶¨è®ºç‚¹                 â”‚
â”‚      Bear Researcher â”€â”€â–º æå‡ºçœ‹è·Œè®ºç‚¹                 â”‚
â”‚                                                        â”‚
â”‚    Round 2:                                            â”‚
â”‚      Bull Researcher â”€â”€â–º åé©³ç©ºå¤´è®ºç‚¹                 â”‚
â”‚      Bear Researcher â”€â”€â–º åé©³å¤šå¤´è®ºç‚¹                 â”‚
â”‚                                                        â”‚
â”‚    Round 3:                                            â”‚
â”‚      Bull Researcher â”€â”€â–º æœ€ç»ˆçœ‹æ¶¨è§‚ç‚¹                  â”‚
â”‚      Bear Researcher â”€â”€â–º æœ€ç»ˆçœ‹è·Œè§‚ç‚¹                  â”‚
â”‚                                                        â”‚
â”‚    Research Manager â”€â”€â–º ç»¼åˆæŠ•èµ„è®¡åˆ’                   â”‚
â”‚    è¾“å‡º:                                               â”‚
â”‚      - æŠ•èµ„å»ºè®® (ä¹°å…¥/æŒæœ‰/å–å‡º)                        â”‚
â”‚      - ç›®æ ‡ä»·æ ¼ (CNY)                                   â”‚
â”‚      - ç½®ä¿¡åº¦ (0-100%)                                  â”‚
â”‚      - é£é™©è¯„åˆ† (0-100)                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. äº¤æ˜“å†³ç­–é˜¶æ®µ (Trading Decision Phase)              â”‚
â”‚    [è€—æ—¶: ~30-60ç§’]                                    â”‚
â”‚                                                        â”‚
â”‚    Trader â”€â”€â–º åˆ¶å®šäº¤æ˜“è®¡åˆ’                              â”‚
â”‚    è¾“å‡º:                                               â”‚
â”‚      - äº¤æ˜“è®¡åˆ’                                          â”‚
â”‚      - ç›®æ ‡ä»·æ ¼                                          â”‚
â”‚      - æ­¢æŸä½                                            â”‚
â”‚      - å»ºè®®ä»“ä½                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. é£é™©è¾©è®ºé˜¶æ®µ (Risk Debate Phase)                 â”‚
â”‚    [è€—æ—¶: ~60-120ç§’ï¼Œ2è½®è¾©è®º = 6æ¬¡äº¤æ¢]                 â”‚
â”‚                                                        â”‚
â”‚    Round 1:                                            â”‚
â”‚      Risky Analyst â”€â”€â–º æ¿€è¿›é£é™©è¯„ä¼°                   â”‚
â”‚      Safe Analyst â”€â”€â–º ä¿å®ˆé£é™©è¯„ä¼°                    â”‚
â”‚      Neutral Analyst â”€â”€â–º ä¸­ç«‹é£é™©è¯„ä¼°                  â”‚
â”‚                                                        â”‚
â”‚    Round 2:                                            â”‚
â”‚      Risky Analyst â”€â”€â–º æ›´æ¿€è¿›çš„è§‚ç‚¹                     â”‚
â”‚      Safe Analyst â”€â”€â–º æ›´ä¿å®ˆçš„è§‚ç‚¹                      â”‚
â”‚      Neutral Analyst â”€â”€â–º æ›´ä¸­ç«‹çš„ç«‹åœº                    â”‚
â”‚                                                        â”‚
â”‚    Risk Manager â”€â”€â–º æœ€ç»ˆé£é™©å†³ç­–                       â”‚
â”‚    è¾“å‡º:                                               â”‚
â”‚      - é£é™©å†³ç­– (æ‰§è¡Œ/è§‚æœ›/è°ƒæ•´)                         â”‚
â”‚      - é£é™©ç­‰çº§ (ä½/ä¸­/é«˜)                              â”‚
â”‚      - å»ºè®®è°ƒæ•´                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. æœ€ç»ˆæŠ¥å‘Šç”Ÿæˆ (Final Report Generation)              â”‚
â”‚    [è€—æ—¶: ~10-20ç§’]                                    â”‚
â”‚                                                        â”‚
â”‚    æ•´åˆæ‰€æœ‰é˜¶æ®µçš„åˆ†æï¼š                                 â”‚
â”‚      - å¸‚åœºåˆ†æ                                          â”‚
â”‚      - æƒ…ç»ªåˆ†æ                                          â”‚
â”‚      - æ–°é—»åˆ†æ                                          â”‚
â”‚      - åŸºæœ¬é¢åˆ†æ                                        â”‚
â”‚      - æŠ•èµ„è¾©è®º                                          â”‚
â”‚      - äº¤æ˜“å†³ç­–                                          â”‚
â”‚      - é£é™©è¯„ä¼°                                          â”‚
â”‚                                                        â”‚
â”‚    ç”Ÿæˆç»“æ„åŒ–æŠ¥å‘Šï¼ˆMarkdownæ ¼å¼ï¼‰                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
   è¿”å›æœ€ç»ˆæŠ¥å‘Šç»™ç”¨æˆ·

æ€»è€—æ—¶ä¼°ç®— (å¹¶è¡Œä¼˜åŒ–å):
- åˆ†æå¸ˆé˜¶æ®µ: 30-60ç§’ (4ä¸ªåˆ†æå¸ˆå¹¶è¡Œ)
- æŠ•èµ„è¾©è®º: 60-180ç§’ (3è½®)
- äº¤æ˜“å†³ç­–: 30-60ç§’
- é£é™©è¾©è®º: 60-120ç§’ (2è½®)
- æŠ¥å‘Šç”Ÿæˆ: 10-20ç§’
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ€»è®¡: 190-440ç§’ (çº¦3-7åˆ†é’Ÿ)

å¯¹æ¯”ä¸²è¡Œç‰ˆæœ¬:
- åˆ†æå¸ˆé˜¶æ®µ: 120-240ç§’ (4ä¸ªåˆ†æå¸ˆä¸²è¡Œ)
- å…¶ä»–é˜¶æ®µç›¸åŒ
æ€»è®¡: 280-620ç§’ (çº¦5-10åˆ†é’Ÿ)

æ€§èƒ½æå‡: ~30%
```

### æ•°æ®æµè½¬å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AgentState                            â”‚
â”‚  - messages: List[BaseMessage]                          â”‚
â”‚  - company_of_interest: str                              â”‚
â”‚  - trade_date: str                                      â”‚
â”‚  - market_report: str                                  â”‚
â”‚  - sentiment_report: str                                â”‚
â”‚  - news_report: str                                    â”‚
â”‚  - fundamentals_report: str                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ æ¶ˆæ¯å†å²ç®¡ç†  â”‚
        â”‚ (messages)    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚           â”‚           â”‚
    â–¼           â–¼           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AIMessage â”‚ â”‚ToolMessageâ”‚ â”‚HumanMessageâ”‚
â”‚ (LLMè¾“å‡º)â”‚ â”‚(å·¥å…·ç»“æœ)â”‚ â”‚(ç”¨æˆ·è¾“å…¥)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚           â”‚           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  çŠ¶æ€æ›´æ–°      â”‚
        â”‚  (Update)     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å·¥å…·è°ƒç”¨æµç¨‹

```
LLM è¯·æ±‚å·¥å…·è°ƒç”¨
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ToolNode (LangGraph)                        â”‚
â”‚  - è§£æ tool_calls                          â”‚
â”‚  - æ‰§è¡Œå·¥å…·å‡½æ•°                              â”‚
â”‚  - è¿”å› ToolMessage                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å·¥å…·å‡½æ•°æ‰§è¡Œ                                â”‚
â”‚  - get_stock_market_data_unified              â”‚
â”‚  - get_stock_sentiment_unified               â”‚
â”‚  - get_stock_news_unified                   â”‚
â”‚  - get_stock_fundamentals_unified            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ•°æ®æºè°ƒç”¨                                  â”‚
â”‚  - æ£€æŸ¥ç¼“å­˜                                  â”‚
â”‚  - è°ƒç”¨æ•°æ®æä¾›å™¨                              â”‚
â”‚  - ä¿å­˜åˆ°ç¼“å­˜                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
è¿”å› ToolMessage (åŒ…å«å·¥å…·ç»“æœ)
    â”‚
    â–¼
LLM æ¥æ”¶å·¥å…·ç»“æœå¹¶ç»§ç»­åˆ†æ
```

---

## æ€§èƒ½ä¼˜åŒ–

### å·²å®ç°çš„ä¼˜åŒ–

#### 1. æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–

**æ–‡ä»¶**: `scripts/database/create_indexes.py`

**ç´¢å¼•åˆ—è¡¨**: 15ä¸ªç´¢å¼•

**æ•ˆæœ**:
- æŸ¥è¯¢é€Ÿåº¦: 5-10å€æå‡
- ç¼“å­˜å‘½ä¸­: 20-30%æå‡

#### 2. æ™ºèƒ½ç¼“å­˜ç³»ç»Ÿ

**æ–‡ä»¶**: `tradingagents/dataflows/cache/smart_cache.py`

**ä¼˜åŒ–å†…å®¹**:
- åŠ¨æ€ TTLï¼ˆæ ¹æ®æ•°æ®ç±»å‹ï¼‰
- MD5 å“ˆå¸Œç¼“å­˜é”®
- å‘½ä¸­ç‡ç»Ÿè®¡
- ç¼“å­˜ç›‘æ§å’Œæ¸…ç†

**æ•ˆæœ**:
- ç¼“å­˜å‘½ä¸­ç‡: 60-80%
- æ•°æ®è·å–é€Ÿåº¦: 3-5å€æå‡

#### 3. ç¼“å­˜é¢„çƒ­æœºåˆ¶

**æ–‡ä»¶**: `scripts/maintenance/cache_warmup.py`

**ä¼˜åŒ–å†…å®¹**:
- é¢„åŠ è½½10åªçƒ­é—¨è‚¡ç¥¨
- é¢„åŠ è½½3ä¸ªå¤§ç›˜æŒ‡æ•°
- é¢„åŠ è½½æœ€æ–°æ–°é—»
- å¹¶è¡Œé¢„çƒ­ï¼ˆ5ä¸ªå¹¶å‘ä»»åŠ¡ï¼‰

**æ•ˆæœ**:
- é¦–æ¬¡æŸ¥è¯¢å»¶è¿Ÿ: å‡å°‘ 70-90%
- ç”¨æˆ·ä½“éªŒ: æ˜¾è‘—æ”¹å–„

#### 4. åˆ†æå¸ˆå¹¶è¡Œæ‰§è¡Œ

**æ–‡ä»¶**: `tradingagents/graph/parallel_analysts.py`

**ä¼˜åŒ–å†…å®¹**:
- 4ä¸ªåˆ†æå¸ˆå¹¶è¡Œæ‰§è¡Œ
- START åŒæ—¶è¿æ¥åˆ°æ‰€æœ‰åˆ†æå¸ˆ
- ç­‰å¾…æ‰€æœ‰å®Œæˆåè¿›å…¥ Bull Researcher

**æ•ˆæœ**:
- æ‰§è¡Œé€Ÿåº¦: 3å€æå‡
- æ—¶é—´èŠ‚çœ: 75%

#### 5. æ•°æ®æºå¹¶è¡Œè°ƒç”¨

**æ–‡ä»¶**: `tradingagents/dataflows/parallel_data_fetch.py`

**ä¼˜åŒ–å†…å®¹**:
- å¤šæ•°æ®æºå¹¶è¡Œè°ƒç”¨
- ä½¿ç”¨ç¬¬ä¸€ä¸ªæˆåŠŸçš„ç»“æœ
- è¶…æ—¶ä¿æŠ¤ï¼ˆé»˜è®¤10ç§’ï¼‰

**æ•ˆæœ**:
- æ•°æ®è·å–é€Ÿåº¦: 2-3å€æå‡
- æ•°æ®å¯ç”¨æ€§: å¤šæºå†—ä½™

### æ€»ä½“æ€§èƒ½æå‡

| ä¼˜åŒ–é¡¹ | æå‡ | å½±å“ |
|--------|------|------|
| æ•°æ®åº“ç´¢å¼• | 5-10x | æŸ¥è¯¢é€Ÿåº¦ |
| æ™ºèƒ½ç¼“å­˜ | 3-5x | æ•°æ®è·å– |
| ç¼“å­˜é¢„çƒ­ | 70-90% | é¦–æ¬¡å»¶è¿Ÿ |
| åˆ†æå¸ˆå¹¶è¡Œ | 3x | åˆ†æå¸ˆé˜¶æ®µ |
| æ•°æ®æºå¹¶è¡Œ | 2-3x | æ•°æ®è·å– |
| **æ€»ä½“** | **3-5x** | **æ•´ä½“æ€§èƒ½** |

### æˆæœ¬ä¼˜åŒ–

| ç­–ç•¥ | æ•ˆæœ |
|------|------|
| æ··åˆæ¨¡å¼ï¼ˆQuick + Deepï¼‰ | æˆæœ¬é™ä½ 50-70% |
| æ™ºèƒ½ç¼“å­˜ï¼ˆå‡å°‘APIè°ƒç”¨ï¼‰ | æˆæœ¬é™ä½ 30-50% |
| å¹¶è¡Œæ‰§è¡Œï¼ˆå‡å°‘LLMè°ƒç”¨ï¼‰ | æˆæœ¬é™ä½ 20-30% |
| **æ€»ä½“** | **æˆæœ¬é™ä½ 50-70%** |

---

## æ¶æ„è®¾è®¡æ¨¡å¼

### 1. ç­–ç•¥æ¨¡å¼ (Strategy Pattern)

**åº”ç”¨åœºæ™¯**: æ•°æ®æºåˆ‡æ¢

```python
class DataSourceStrategy:
    def get_data(self, symbol, start_date, end_date):
        pass

class TushareStrategy(DataSourceStrategy):
    def get_data(self, symbol, start_date, end_date):
        # Tushare å®ç°
        pass

class AKShareStrategy(DataSourceStrategy):
    def get_data(self, symbol, start_date, end_date):
        # AKShare å®ç°
        pass
```

### 2. å·¥å‚æ¨¡å¼ (Factory Pattern)

**åº”ç”¨åœºæ™¯**: LLM åˆ›å»º

```python
def create_llm_by_provider(provider: str, ...):
    if provider.lower() == "google":
        return ChatGoogleOpenAI(...)
    elif provider.lower() == "dashscope":
        return ChatDashScopeOpenAI(...)
    elif provider.lower() == "deepseek":
        return ChatDeepSeek(...)
    # ...
```

### 3. è§‚å¯Ÿè€…æ¨¡å¼ (Observer Pattern)

**åº”ç”¨åœºæ™¯**: ç¼“å­˜ç›‘æ§

```python
class CacheMonitor:
    def __init__(self):
        self.stats = {
            "hits": 0,
            "misses": 0,
            "evictions": 0,
        }

    def record_hit(self):
        self.stats["hits"] += 1

    def record_miss(self):
        self.stats["misses"] += 1

    def get_hit_rate(self):
        total = self.stats["hits"] + self.stats["misses"]
        return self.stats["hits"] / total if total > 0 else 0.0
```

### 4. è´£ä»»é“¾æ¨¡å¼ (Chain of Responsibility)

**åº”ç”¨åœºæ™¯**: æ•°æ®æºé™çº§

```python
# MongoDB â†’ Tushare â†’ AKShare â†’ BaoStock
if self.use_mongodb_cache and cache_data:
    return cache_data
elif self._try_tushare():
    return tushare_data
elif self._try_akshare():
    return akshare_data
else:
    return baostock_data
```

### 5. çŠ¶æ€æ¨¡å¼ (State Pattern)

**åº”ç”¨åœºæ™¯**: AgentState çŠ¶æ€ç®¡ç†

```python
class AgentState(TypedDict):
    messages: List[BaseMessage]
    company_of_interest: str
    trade_date: str
    market_report: str
    sentiment_report: str
    news_report: str
    fundamentals_report: str
    # ...
```

### 6. è£…é¥°å™¨æ¨¡å¼ (Decorator Pattern)

**åº”ç”¨åœºæ™¯**: æ—¥å¿—å’Œå·¥å…·è°ƒç”¨è®¡æ•°

```python
@log_analyst_module
def create_market_analyst(llm, toolkit):
    # è£…é¥°å™¨æ·»åŠ æ—¥å¿—åŠŸèƒ½
    pass
```

---

## æ½œåœ¨é—®é¢˜å’Œæ”¹è¿›

### æ½œåœ¨é—®é¢˜

#### 1. æ•°æ®æºç¨³å®šæ€§

**é—®é¢˜æè¿°**:
- AKShare: å…è´¹ï¼Œä½†APIç¨³å®šæ€§æœªçŸ¥
- BaoStock: å…è´¹ï¼Œä½†æ•°æ®è´¨é‡ä¸€èˆ¬
- Tushare: è´¨é‡æœ€é«˜ï¼Œä½†éœ€è¦Token

**å½±å“**: æ•°æ®è·å–å¤±è´¥ç‡

**å»ºè®®æ”¹è¿›**:
- æ·»åŠ æ›´å¤šæ•°æ®æºï¼ˆå¦‚ï¼šTuShare Pro, JoinQuantï¼‰
- å®ç°æ•°æ®æºå¥åº·æ£€æŸ¥
- æ·»åŠ æ•°æ®æºè‡ªåŠ¨åˆ‡æ¢

#### 2. ç¼“å­˜ä¸€è‡´æ€§

**é—®é¢˜æè¿°**:
- Redis å’Œ MongoDB ç¼“å­˜å¯èƒ½ä¸ä¸€è‡´
- ç¼“å­˜å¤±æ•ˆæœºåˆ¶ä¸å®Œå–„

**å½±å“**: è¿”å›è¿‡æœŸæ•°æ®

**å»ºè®®æ”¹è¿›**:
- å®ç°ç¼“å­˜åŒæ­¥æœºåˆ¶
- æ·»åŠ ç¼“å­˜ç‰ˆæœ¬æ§åˆ¶
- å®ç°æ›´æ™ºèƒ½çš„å¤±æ•ˆç­–ç•¥

#### 3. åˆ†æå¸ˆè´¨é‡

**é—®é¢˜æè¿°**:
- åˆ†æå¸ˆå¯èƒ½äº§ç”Ÿä¸ä¸€è‡´çš„åˆ†æ
- LLM å¯èƒ½ç¼–é€ æ•°æ®ï¼ˆè™½ç„¶æœ‰é™åˆ¶ï¼‰

**å½±å“**: åˆ†æç»“æœä¸å‡†ç¡®

**å»ºè®®æ”¹è¿›**:
- æ·»åŠ åˆ†æç»“æœéªŒè¯
- å®ç°åˆ†æå¸ˆè¯„åˆ†ç³»ç»Ÿ
- æ·»åŠ å¼‚å¸¸æ£€æµ‹æœºåˆ¶

#### 4. æ‰§è¡Œæ•ˆç‡

**é—®é¢˜æè¿°**:
- ä¸²è¡Œæ‰§è¡Œéƒ¨åˆ†æµç¨‹ï¼ˆç ”ç©¶å›¢é˜Ÿã€é£é™©ç®¡ç†ï¼‰
- æ­»å¾ªç¯ä¿æŠ¤å¯èƒ½è¿‡æ—©ç»ˆæ­¢

**å½±å“**: æ‰§è¡Œæ—¶é—´è¿‡é•¿

**å»ºè®®æ”¹è¿›**:
- å®ç°æ›´å¤šå¹¶è¡ŒåŒ–ï¼ˆç ”ç©¶å›¢é˜Ÿå¹¶è¡Œï¼‰
- ä¼˜åŒ–æ­»å¾ªç¯ä¿æŠ¤é€»è¾‘
- æ·»åŠ è¿›åº¦æ˜¾ç¤º

### æ”¹è¿›å»ºè®®

#### 1. æ¶æ„å±‚é¢

**å»ºè®® 1: å®ç°å¾®æœåŠ¡æ¶æ„**
- å°†æ•°æ®è·å–ã€åˆ†æå¸ˆã€å†³ç­–æ‹†åˆ†ä¸ºç‹¬ç«‹æœåŠ¡
- ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆå¦‚ RabbitMQ/Kafkaï¼‰è§£è€¦
- æå‡å¯æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§

**å»ºè®® 2: æ·»åŠ å®æ—¶æ•°æ®æµ**
- ä½¿ç”¨ WebSocket æ¨é€å®æ—¶æ•°æ®
- å®ç°å¢é‡æ›´æ–°ï¼ˆè€Œéå…¨é‡æŸ¥è¯¢ï¼‰
- å‡å°‘ç½‘ç»œè´Ÿè½½

**å»ºè®® 3: å®ç°åˆ†å¸ƒå¼ç¼“å­˜**
- ä½¿ç”¨ Redis Cluster
- æ·»åŠ ç¼“å­˜åˆ†ç‰‡
- æå‡ç¼“å­˜æ€§èƒ½å’Œå®¹é‡

#### 2. åŠŸèƒ½å±‚é¢

**å»ºè®® 4: æ·»åŠ æ›´å¤šåˆ†æå¸ˆ**
- å®è§‚ç»æµåˆ†æå¸ˆï¼ˆåˆ†æç»æµæŒ‡æ ‡ï¼‰
- è¡Œä¸šåˆ†æå¸ˆï¼ˆåˆ†æè¡Œä¸šè¶‹åŠ¿ï¼‰
- ç«å“åˆ†æå¸ˆï¼ˆåˆ†æç«äº‰å¯¹æ‰‹ï¼‰

**å»ºè®® 5: å®ç°å†å²å›æµ‹**
- ä¿å­˜æ‰€æœ‰åˆ†æç»“æœ
- å®ç°å›æµ‹æ¡†æ¶
- éªŒè¯ç­–ç•¥æœ‰æ•ˆæ€§

**å»ºè®® 6: æ·»åŠ å¤šèµ„äº§ç»„åˆåˆ†æ**
- æ”¯æŒå¤šåªè‚¡ç¥¨åŒæ—¶åˆ†æ
- å®ç°æŠ•èµ„ç»„åˆä¼˜åŒ–
- æ·»åŠ é£é™©åˆ†æ•£åˆ†æ

#### 3. æ€§èƒ½å±‚é¢

**å»ºè®® 7: å®ç°æ›´æ¿€è¿›çš„å¹¶è¡ŒåŒ–**
- ç ”ç©¶å›¢é˜Ÿå¹¶è¡Œï¼ˆBull å’Œ Bear åŒæ—¶è¾©è®ºï¼‰
- é£é™©å›¢é˜Ÿå¹¶è¡Œï¼ˆRiskyã€Safeã€Neutral åŒæ—¶åˆ†æï¼‰
- é¢„æœŸé¢å¤–æå‡ 30-50%

**å»ºè®® 8: æ·»åŠ é¢„æµ‹ç¼“å­˜**
- ç¼“å­˜ LLM çš„å¸¸è§å›ç­”
- å‡å°‘é‡å¤çš„ LLM è°ƒç”¨
- é¢„æœŸæˆæœ¬é™ä½ 20-30%

**å»ºè®® 9: ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢**
- ä½¿ç”¨è¿æ¥æ± 
- æ·»åŠ æŸ¥è¯¢ä¼˜åŒ–ï¼ˆå¦‚ï¼šæŠ•å½±ã€ç´¢å¼•æç¤ºï¼‰
- é¢„æœŸæŸ¥è¯¢é€Ÿåº¦æå‡ 2-3å€

#### 4. å¯è§‚æµ‹æ€§å±‚é¢

**å»ºè®® 10: å®ç°å®Œæ•´çš„ç›‘æ§**
- æ·»åŠ  Prometheus æŒ‡æ ‡
- å®ç°å‘Šè­¦æœºåˆ¶
- æ·»åŠ æ€§èƒ½åˆ†æï¼ˆå¦‚ï¼šPyroscopeï¼‰

**å»ºè®® 11: å®ç°æ—¥å¿—èšåˆ**
- ä½¿ç”¨ ELK Stackï¼ˆElasticsearch + Logstash + Kibanaï¼‰
- æ·»åŠ æ—¥å¿—æœç´¢å’Œåˆ†æ
- æå‡é—®é¢˜æ’æŸ¥æ•ˆç‡

**å»ºè®® 12: å®ç°åˆ†å¸ƒå¼è¿½è¸ª**
- ä½¿ç”¨ Jaeger æˆ– Zipkin
- è¿½è¸ªè¯·æ±‚å…¨é“¾è·¯
- å¿«é€Ÿå®šä½æ€§èƒ½ç“¶é¢ˆ

---

## æ€»ç»“

### æ ¸å¿ƒä¼˜åŠ¿

1. **å¤šæ™ºèƒ½ä½“åä½œ**: 4ä¸ªåˆ†æå¸ˆ + æŠ•èµ„ç ”ç©¶å›¢é˜Ÿ + é£é™©ç®¡ç†å›¢é˜Ÿ
2. **è¾©è®ºæœºåˆ¶**: å¤šè½®è¾©è®ºæå‡å†³ç­–è´¨é‡
3. **å¤šæ•°æ®æº**: Tushareã€AKShareã€BaoStockã€è‡ªåŠ¨é™çº§
4. **æ™ºèƒ½ç¼“å­˜**: åŠ¨æ€ TTL + MongoDB/Redis åŒå±‚ç¼“å­˜
5. **å¸‚åœºæ”¯æŒ**: Aè‚¡ã€æ¸¯è‚¡ã€ç¾è‚¡
6. **LLM é›†æˆ**: Google AIã€DashScopeã€DeepSeekã€OpenAI ç­‰
7. **æ€§èƒ½ä¼˜åŒ–**: å¹¶è¡Œæ‰§è¡Œã€ç¼“å­˜é¢„çƒ­ã€æ™ºèƒ½ TTL
8. **æˆæœ¬ä¼˜åŒ–**: æ··åˆæ¨¡å¼ï¼ˆQuick + Deepï¼‰

### æŠ€æœ¯äº®ç‚¹

1. **LangGraph å·¥ä½œæµç¼–æ’**: çµæ´»çš„çŠ¶æ€ç®¡ç†å’Œæ¡ä»¶é€»è¾‘
2. **å¼ºåˆ¶å·¥å…·è°ƒç”¨**: é˜²æ­¢ LLM ç¼–é€ æ•°æ®
3. **æ­»å¾ªç¯ä¿æŠ¤**: å·¥å…·è°ƒç”¨æ¬¡æ•°é™åˆ¶
4. **è®°å¿†ç³»ç»Ÿ**: å†å²å†³ç­–å­¦ä¹ ï¼ˆn_matches=5ï¼‰
5. **åŠ¨æ€ TTL**: æ ¹æ®æ•°æ®ç±»å‹è°ƒæ•´ç¼“å­˜æ—¶é—´
6. **å¹¶è¡Œæ‰§è¡Œ**: åˆ†æå¸ˆå¹¶è¡Œï¼ˆ3x é€Ÿåº¦æå‡ï¼‰
7. **å¤šæºå¹¶è¡Œ**: æ•°æ®æºå¹¶è¡Œè°ƒç”¨ï¼ˆ2-3x é€Ÿåº¦æå‡ï¼‰

### æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | æ•°å€¼ |
|------|------|
| **æ•´ä½“æ€§èƒ½æå‡** | 3-5x |
| **æˆæœ¬é™ä½** | 50-70% |
| **ç¼“å­˜å‘½ä¸­ç‡** | 60-80% |
| **æ‰§è¡Œæ—¶é—´** | 3-7åˆ†é’Ÿï¼ˆå¹¶è¡Œä¼˜åŒ–åï¼‰ |
| **API è°ƒç”¨å‡å°‘** | 30-50% |

### é€‚ç”¨åœºæ™¯

1. **å­¦ä¹ å’Œç ”ç©¶**: å¤šæ™ºèƒ½ä½“ç³»ç»Ÿçš„æ•™å­¦å’Œç ”ç©¶
2. **ç­–ç•¥éªŒè¯**: å›æµ‹å’ŒéªŒè¯æŠ•èµ„ç­–ç•¥
3. **å†³ç­–æ”¯æŒ**: ä¸ºæŠ•èµ„å†³ç­–æä¾›å‚è€ƒ
4. **AI åº”ç”¨**: LangGraph å’Œå¤šæ™ºèƒ½ä½“ç³»ç»Ÿçš„å®è·µ

### é™åˆ¶å’Œé£é™©

1. **ä¸æ„æˆæŠ•èµ„å»ºè®®**: ä»…ä¾›å‚è€ƒï¼Œä¸æ„æˆæŠ•èµ„å»ºè®®
2. **æ•°æ®ä¾èµ–**: ä¾èµ–æ•°æ®æºè´¨é‡
3. **LLM é™åˆ¶**: LLM å¯èƒ½äº§ç”Ÿé”™è¯¯æˆ–åè§
4. **å¸‚åœºå˜åŒ–**: å¸‚åœºä¸ç¡®å®šæ€§ï¼Œå†å²ä¸ç­‰äºæœªæ¥

---

**æŠ¥å‘Šç‰ˆæœ¬**: v2.0 (2026-01-18 æ›´æ–°ç‰ˆ)
**åˆ†ææ—¥æœŸ**: 2026-01-18
**åˆ†æäººå‘˜**: Claude (AI Assistant)
**é¡¹ç›®**: TradingAgents-CN v1.0.0-preview

---

## é™„å½•

### A. å…³é”®æ–‡ä»¶æ¸…å•

| æ¨¡å— | æ–‡ä»¶ | è¡Œæ•° | èŒè´£ |
|------|------|------|------|
| **æ•°æ®æºç®¡ç†** | data_source_manager.py | 2900+ | ç»Ÿä¸€æ•°æ®æºç®¡ç† |
| **å¸‚åœºåˆ†æå¸ˆ** | market_analyst.py | 700+ | æŠ€æœ¯åˆ†æ |
| **åŸºæœ¬é¢åˆ†æå¸ˆ** | fundamentals_analyst.py | 1158 | è´¢åŠ¡åˆ†æ |
| **å›¾ç¼–æ’** | trading_graph.py | 1398 | LangGraph ç¼–æ’ |
| **æ¡ä»¶é€»è¾‘** | conditional_logic.py | 243 | å›¾æµç¨‹æ§åˆ¶ |
| **å¹¶è¡Œåˆ†æå¸ˆ** | parallel_analysts.py | 230 | å¹¶è¡Œæ‰§è¡Œ |
| **å¹¶è¡Œæ•°æ®è·å–** | parallel_data_fetch.py | 269 | å¹¶è¡Œæ•°æ®æº |
| **æ™ºèƒ½ç¼“å­˜** | smart_cache.py | 300+ | åŠ¨æ€ TTL |
| **ç¼“å­˜é¢„çƒ­** | cache_warmup.py | 286 | é¢„çƒ­æœºåˆ¶ |

### B. æ•°æ®æµç¤ºæ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       ç”¨æˆ·è¾“å…¥                             â”‚
â”‚  "åˆ†æè‚¡ç¥¨ 600519.SH"                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   LangGraph StateGraph                      â”‚
â”‚                                                            â”‚
â”‚  START                                                     â”‚
â”‚    â”‚                                                       â”‚
â”‚    â”œâ”€â–º Market Analyst â”€â”€â–º tools_market â”€â”€â–º Msg Clear     â”‚
â”‚    â”œâ”€â–º Social Analyst â”€â”€â–º tools_social â”€â”€â–º Msg Clear     â”‚
â”‚    â”œâ”€â–º News Analyst â”€â”€â–º tools_news â”€â”€â–º Msg Clear        â”‚
â”‚    â””â”€â–º Fundamentals Analyst â”€â”€â–º tools_fundamentals â”€â”€â–º     â”‚
â”‚         Msg Clear                                          â”‚
â”‚                                                            â”‚
â”‚  Msg Clear â”€â”€â–º Bull Researcher â—„â”€â–º Bear Researcher        â”‚
â”‚  Bull Researcher                                          â”‚
â”‚    â”‚                                                       â”‚
â”‚    â””â”€â–º Research Manager â”€â”€â–º Trader â”€â”€â–º Risky Analyst  â”‚
â”‚  Risky Analyst                                            â”‚
â”‚    â”‚                                                       â”‚
â”‚    â””â”€â–º Safe Analyst â—„â”€â–º Neutral Analyst â—„â”€â–º Risk Manager â”‚
â”‚  Risk Manager                                             â”‚
â”‚    â”‚                                                       â”‚
â”‚    â””â”€â–º END                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ•°æ®è·å–å±‚                               â”‚
â”‚  - æ£€æŸ¥ç¼“å­˜ (Redis/MongoDB)                              â”‚
â”‚  - è°ƒç”¨æ•°æ®æº (Tushare/AKShare/BaoStock)                 â”‚
â”‚  - ä¿å­˜ç¼“å­˜                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LLM è°ƒç”¨å±‚                               â”‚
â”‚  - Google AI (Gemini)                                     â”‚
â”‚  - DashScope (Qwen)                                        â”‚
â”‚  - DeepSeek                                                â”‚
â”‚  - OpenAI (GPT-4o)                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æœ€ç»ˆæŠ¥å‘Š                                 â”‚
â”‚  - Markdown æ ¼å¼                                          â”‚
â”‚  - åŒ…å«æ‰€æœ‰åˆ†æé˜¶æ®µ                                         â”‚
â”‚  - ç»“æ„åŒ–è¾“å‡º                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### C. é…ç½®å‚æ•°è¯´æ˜

| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|------|--------|------|
| `max_debate_rounds` | 3 | Bull vs Bear è¾©è®ºè½®æ¬¡ |
| `max_risk_discuss_rounds` | 2 | é£é™©å›¢é˜Ÿè®¨è®ºè½®æ¬¡ |
| `max_tool_calls_per_analyst` | 3 | æ¯ä¸ªåˆ†æå¸ˆæœ€å¤§å·¥å…·è°ƒç”¨æ¬¡æ•° |
| `memory_retrieval_matches` | 5 | è®°å¿†æ£€ç´¢æ•°é‡ |
| `quick_think_llm` | qwen-turbo | å¿«é€Ÿåˆ†æ LLM |
| `deep_think_llm` | gemini-2.5-pro | æ·±åº¦åˆ†æ LLM |

---

**æŠ¥å‘Šç»“æŸ**
