# TradingAgents-CN æ•°æ®æºä¸åˆ†æå¸ˆæ·±åº¦åˆ†ææŠ¥å‘Š

**åˆ†ææ—¥æœŸ**: 2026-01-18
**é¡¹ç›®ç‰ˆæœ¬**: v1.0.0-preview
**åˆ†æèŒƒå›´**: æ•°æ®æºæ¶æ„ã€æ•°æ®æä¾›å™¨å®ç°ã€åˆ†æå¸ˆç³»ç»Ÿ

---

## ç›®å½•

1. [æ•°æ®æºæ¶æ„](#1-æ•°æ®æºæ¶æ„)
2. [æ•°æ®æä¾›å™¨å®ç°](#2-æ•°æ®æä¾›å™¨å®ç°)
3. [åˆ†æå¸ˆç³»ç»Ÿæ¶æ„](#3-åˆ†æå¸ˆç³»ç»Ÿæ¶æ„)
4. [å¸‚åœºåˆ†æå¸ˆ](#4-å¸‚åœºåˆ†æå¸ˆ)
5. [åŸºæœ¬é¢åˆ†æå¸ˆ](#5-åŸºæœ¬é¢åˆ†æå¸ˆ)
6. [æ–°é—»åˆ†æå¸ˆ](#6-æ–°é—»åˆ†æå¸ˆ)
7. [ç¤¾äº¤åª’ä½“åˆ†æå¸ˆ](#7-ç¤¾äº¤åª’ä½“åˆ†æå¸ˆ)
8. [æŠ•èµ„è¾©è®ºå›¢é˜Ÿ](#8-æŠ•èµ„è¾©è®ºå›¢é˜Ÿ)
9. [é£é™©è¾©è®ºå›¢é˜Ÿ](#9-é£é™©è¾©è®ºå›¢é˜Ÿ)
10. [äº¤æ˜“å†³ç­–è€…](#10-äº¤æ˜“å†³ç­–è€…)
11. [æ•°æ®æµç¨‹åˆ†æ](#11-æ•°æ®æµç¨‹åˆ†æ)
12. [æ¶æ„è®¾è®¡æ€»ç»“](#12-æ¶æ„è®¾è®¡æ€»ç»“)
13. [ä¼˜åŒ–å»ºè®®](#13-ä¼˜åŒ–å»ºè®®)

---

## 1. æ•°æ®æºæ¶æ„

### 1.1 æ ¸å¿ƒç»„ä»¶

```
tradingagents/dataflows/
â”œâ”€â”€ data_source_manager.py      # â­ æ•°æ®æºç®¡ç†å™¨ï¼ˆç»Ÿä¸€å…¥å£ï¼‰
â”œâ”€â”€ interface.py                 # â­ å…¬å…±æ¥å£å±‚
â”œâ”€â”€ optimized_china_data.py      # ä¼˜åŒ–çš„Aè‚¡æ•°æ®æä¾›å™¨
â”œâ”€â”€ providers/                    # æ•°æ®æä¾›å™¨å®ç°
â”‚   â”œâ”€â”€ base_provider.py         # â­ åŸºç±»ï¼ˆæŠ½è±¡æ¥å£ï¼‰
â”‚   â”œâ”€â”€ china/                   # ä¸­å›½å¸‚åœºæ•°æ®æº
â”‚   â”‚   â”œâ”€â”€ tushare.py          # Tushare API
â”‚   â”‚   â”œâ”€â”€ akshare.py          # AKShareï¼ˆå…è´¹ï¼‰
â”‚   â”‚   â””â”€â”€ baostock.py         # BaoStockï¼ˆå…è´¹ï¼‰
â”‚   â”œâ”€â”€ hk/                      # æ¸¯è‚¡æ•°æ®æº
â”‚   â”‚   â”œâ”€â”€ hk_stock.py          # æ¸¯è‚¡ä¸“ç”¨
â”‚   â”‚   â””â”€â”€ improved_hk.py      # æ”¹è¿›ç‰ˆæ¸¯è‚¡
â”‚   â”œâ”€â”€ us/                      # ç¾è‚¡æ•°æ®æº
â”‚   â”‚   â”œâ”€â”€ yfinance.py          # Yahoo Financeï¼ˆå…è´¹ï¼‰
â”‚   â”‚   â”œâ”€â”€ finnhub.py           # Finnhub API
â”‚   â”‚   â””â”€â”€ optimized.py        # ä¼˜åŒ–ç‰ˆç¾è‚¡
â”‚   â””â”€â”€ examples/               # ç¤ºä¾‹ä»£ç 
â””â”€â”€ cache/                       # ç¼“å­˜ç³»ç»Ÿ
    â”œâ”€â”€ file_cache.py             # æ–‡ä»¶ç¼“å­˜
    â”œâ”€â”€ db_cache.py               # æ•°æ®åº“ç¼“å­˜ï¼ˆMongoDB + Redisï¼‰
    â”œâ”€â”€ adaptive.py               # è‡ªé€‚åº”ç¼“å­˜
    â””â”€â”€ integrated.py             # é›†æˆç¼“å­˜
```

### 1.2 æ•°æ®æºç®¡ç†å™¨ï¼ˆDataSourceManagerï¼‰

**æ–‡ä»¶**: `tradingagents/dataflows/data_source_manager.py`

**æ ¸å¿ƒåŠŸèƒ½**:

```python
class DataSourceManager:
    """æ•°æ®æºç®¡ç†å™¨ - ç»Ÿä¸€ç®¡ç†æ‰€æœ‰æ•°æ®æº"""

    def __init__(self):
        # MongoDBç¼“å­˜ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰
        self.use_mongodb_cache = self._check_mongodb_enabled()
        
        # ç¼“å­˜ç®¡ç†
        self.cache_manager = get_cache()
        
        # æ•°æ®æºä¼˜å…ˆçº§
        self.available_sources = self._check_available_sources()
        self.current_source = self.default_source
```

**æ•°æ®æºæšä¸¾**:

```python
class ChinaDataSource(Enum):
    """ä¸­å›½è‚¡ç¥¨æ•°æ®æºæšä¸¾"""
    MONGODB = DataSourceCode.MONGODB      # MongoDBç¼“å­˜ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰
    TUSHARE = DataSourceCode.TUSHARE      # Tushare API
    AKSHARE = DataSourceCode.AKSHARE      # AKShareï¼ˆå…è´¹ï¼‰
    BAOSTOCK = DataSourceCode.BAOSTOCK    # BaoStockï¼ˆå…è´¹ï¼‰

class USDataSource(Enum):
    """ç¾è‚¡æ•°æ®æºæšä¸¾"""
    MONGODB = DataSourceCode.MONGODB      # MongoDBç¼“å­˜ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰
    YFINANCE = DataSourceCode.YFINANCE    # Yahoo Financeï¼ˆå…è´¹ï¼‰
    ALPHA_VANTAGE = DataSourceCode.ALPHA_VANTAGE  # Alpha Vantage
    FINNHUB = DataSourceCode.FINNHUB      # Finnhub
```

### 1.3 æ•°æ®æºåˆ‡æ¢æœºåˆ¶

**ä¼˜å…ˆçº§é¡ºåº**:

```
ä¸­å›½å¸‚åœºï¼šMongoDBç¼“å­˜ â†’ æ•°æ®åº“é…ç½® â†’ AKShare â†’ Tushare â†’ BaoStock
ç¾è‚¡å¸‚åœºï¼šMongoDBç¼“å­˜ â†’ æ•°æ®åº“é…ç½® â†’ yfinance â†’ Finnhub â†’ Alpha Vantage
æ¸¯è‚¡å¸‚åœºï¼šMongoDBç¼“å­˜ â†’ æ•°æ®åº“é…ç½® â†’ AKShareæ¸¯è‚¡ â†’ yfinance
```

**é™çº§é€»è¾‘**:

```python
def _get_data_source_priority_order(self, symbol: str) -> List[ChinaDataSource]:
    """
    ä»æ•°æ®åº“è·å–æ•°æ®æºä¼˜å…ˆçº§é¡ºåº
    
    1. ä»æ•°æ®åº“è¯»å–æ•°æ®æºé…ç½®ï¼ˆæ”¯æŒWebåå°é…ç½®ï¼‰
    2. æŒ‰ä¼˜å…ˆçº§æ’åºï¼ˆpriorityå­—æ®µï¼Œæ•°å­—è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜ï¼‰
    3. è¿‡æ»¤å‡ºå¯ç”¨çš„æ•°æ®æº
    4. è¿‡æ»¤å‡ºæ”¯æŒå½“å‰å¸‚åœºçš„æ•°æ®æº
    """
    
    # æ­¥éª¤1ï¼šè¯†åˆ«å¸‚åœºç±»å‹ï¼ˆAè‚¡/æ¸¯è‚¡/ç¾è‚¡ï¼‰
    market_category = self._identify_market_category(symbol)
    
    # æ­¥éª¤2ï¼šä»æ•°æ®åº“è¯»å–é…ç½®
    config_data = db.system_configs.find_one({"is_active": True})
    data_source_configs = config_data.get("data_source_configs", [])
    
    # æ­¥éª¤3ï¼šè¿‡æ»¤å’Œæ’åº
    enabled_sources = []
    for ds in data_source_configs:
        if not ds.get("enabled", True):
            continue
        
        # æ£€æŸ¥å¸‚åœºåˆ†ç±»æ˜¯å¦åŒ¹é…
        market_categories = ds.get("market_categories", [])
        if market_categories and market_category:
            if market_category not in market_categories:
                continue
        
        enabled_sources.append(ds)
    
    # æŒ‰ä¼˜å…ˆçº§æ’åº
    enabled_sources.sort(key=lambda x: x.get("priority", 0), reverse=True)
    
    return enabled_sources
```

### 1.4 ç¼“å­˜æ¶æ„

**ç¼“å­˜ç±»å‹**:

1. **æ–‡ä»¶ç¼“å­˜** (`file_cache.py`):
   - ç®€å•ã€æ— éœ€å¤–éƒ¨ä¾èµ–
   - é€‚åˆç¦»çº¿åœºæ™¯
   - æ€§èƒ½è¾ƒå·®

2. **æ•°æ®åº“ç¼“å­˜** (`db_cache.py`):
   - MongoDBç¼“å­˜ï¼ˆæŒä¹…åŒ–ï¼‰
   - Redisç¼“å­˜ï¼ˆé«˜æ€§èƒ½ï¼‰
   - æ”¯æŒåˆ†å¸ƒå¼éƒ¨ç½²
   - æ€§èƒ½æœ€ä¼˜

3. **è‡ªé€‚åº”ç¼“å­˜** (`adaptive.py`):
   - æ ¹æ®ç¯å¢ƒè‡ªåŠ¨é€‰æ‹©
   - è‡ªåŠ¨é™çº§æœºåˆ¶

4. **é›†æˆç¼“å­˜** (`integrated.py`):
   - ç»Ÿä¸€ç¼“å­˜æ¥å£
   - MongoDB + Redis åŒç¼“å­˜
   - æ™ºèƒ½ç¼“å­˜ç­–ç•¥

**ç¼“å­˜ç­–ç•¥**:

```python
# ç¼“å­˜ä¼˜å…ˆçº§
1. Redisç¼“å­˜ï¼ˆæœ€å¿«ï¼Œé€‚åˆçƒ­ç‚¹æ•°æ®ï¼‰
2. MongoDBç¼“å­˜ï¼ˆæŒä¹…åŒ–ï¼Œé€‚åˆå†å²æ•°æ®ï¼‰
3. æ–‡ä»¶ç¼“å­˜ï¼ˆå…œåº•ï¼Œç®€å•ç¨³å®šï¼‰

# ç¼“å­˜å¤±æ•ˆç­–ç•¥
- æ—¶é—´å¤±æ•ˆï¼ˆTTLï¼‰
- ä¸»åŠ¨å¤±æ•ˆï¼ˆæ•°æ®æ›´æ–°æ—¶ï¼‰
- æƒ°æ€§å¤±æ•ˆï¼ˆä¸‹æ¬¡è®¿é—®æ—¶æ£€æŸ¥ï¼‰
```

---

## 2. æ•°æ®æä¾›å™¨å®ç°

### 2.1 åŸºç±»ï¼ˆBaseStockDataProviderï¼‰

**æ–‡ä»¶**: `tradingagents/dataflows/providers/base_provider.py`

**æ ¸å¿ƒæ¥å£**:

```python
class BaseStockDataProvider(ABC):
    """æ•°æ®æä¾›å™¨åŸºç±» - å®šä¹‰ç»Ÿä¸€æ¥å£"""
    
    @abstractmethod
    def connect(self) -> bool:
        """è¿æ¥æ•°æ®æº"""
        pass
    
    @abstractmethod
    async def get_stock_list(self) -> Optional[List[Dict]]:
        """è·å–è‚¡ç¥¨åˆ—è¡¨"""
        pass
    
    @abstractmethod
    async def get_historical_data(
        self, symbol, start_date, end_date, period="daily"
    ) -> Optional[pd.DataFrame]:
        """è·å–å†å²Kçº¿æ•°æ®"""
        pass
    
    @abstractmethod
    async def get_stock_quotes(self, symbol) -> Optional[Dict]:
        """è·å–å®æ—¶è¡Œæƒ…"""
        pass
    
    @abstractmethod
    async def get_financial_data(self, symbol) -> Optional[Dict]:
        """è·å–è´¢åŠ¡æ•°æ®"""
        pass
```

### 2.2 Tushare Providerï¼ˆå·²ä¿®å¤ï¼‰

**æ–‡ä»¶**: `tradingagents/dataflows/providers/china/tushare.py`

**å·²ä¿®å¤å†…å®¹**:

```python
class TushareProvider(BaseStockDataProvider):
    def connect_sync(self) -> bool:
        """åŒæ­¥è¿æ¥åˆ°Tushare"""
        
        # ğŸ”¥ æ£€æŸ¥TUSHARE_ENABLEDå¼€å…³
        tushare_enabled = os.getenv("TUSHARE_ENABLED", "true").lower() in ("true", "1", "yes", "on")
        
        # ğŸ”¥ ä¼˜å…ˆä»æ•°æ®åº“è¯»å– Token
        db_token = self._get_token_from_database()
        env_token = self.config.get("token")
        
        # å°è¯•æ•°æ®åº“ Token
        if db_token:
            ts.set_token(db_token)
            self.api = ts.pro_api()
            
            # ğŸ”¥ æ ¹æ® tushareReadme.txt è¦æ±‚ï¼Œè®¾ç½®å¿…è¦çš„å±æ€§
            self.api._DataApi__token = db_token
            self.api._DataApi__http_url = 'https://jiaoch.site'
            
            # æµ‹è¯•è¿æ¥
            test_data = self.api.stock_basic(list_status="L", limit=1)
            
            if test_data is not None and not test_data.empty:
                self.connected = True
                self.token_source = "database"
                return True
        
        # é™çº§åˆ°ç¯å¢ƒå˜é‡ Token
        if env_token:
            ts.set_token(env_token)
            self.api = ts.pro_api()
            
            # ğŸ”¥ è®¾ç½®å¿…è¦å±æ€§
            self.api._DataApi__token = env_token
            self.api._DataApi__http_url = 'https://jiaoch.site'
            
            test_data = self.api.stock_basic(list_status="L", limit=1)
            
            if test_data is not None and not test_data.empty:
                self.connected = True
                self.token_source = "env"
                return True
        
        return False
```

**æ”¯æŒçš„åŠŸèƒ½**:

| åŠŸèƒ½ | API ç«¯ç‚¹ | è¯´æ˜ |
|------|---------|------|
| è‚¡ç¥¨åˆ—è¡¨ | `stock_basic()` | ä¸Šå¸‚è‚¡ç¥¨åˆ—è¡¨ |
| å†å²Kçº¿ | `daily()` | æ—¥Kçº¿æ•°æ® |
| å®æ—¶è¡Œæƒ… | `rt_k()` | å®æ—¶è¡Œæƒ…ï¼ˆé€šé…ç¬¦æ‰¹é‡è·å–ï¼‰ |
| è´¢åŠ¡æ•°æ® | `income()`, `balancesheet()`, `cashflow()` | è´¢åŠ¡ä¸‰å¼ è¡¨ |
| è´¢åŠ¡æŒ‡æ ‡ | `fina_indicator()` | PEã€PBã€ROEç­‰ |
| æ–°é—»æ•°æ® | `news()` | æ–°é—»æ•°æ®ï¼ˆéœ€è¦æƒé™ï¼‰ |

### 2.3 AKShare Provider

**æ–‡ä»¶**: `tradingagents/dataflows/providers/china/akshare.py`

**ç‰¹ç‚¹**:
- âœ… å…è´¹ï¼Œæ— éœ€API Key
- âœ… æ•°æ®è¦†ç›–å…¨é¢
- âœ… æ›´æ–°åŠæ—¶
- âš ï¸ æ— è®¿é—®é¢‘ç‡é™åˆ¶

**æ”¯æŒçš„å¸‚åœº**:
- Aè‚¡å¸‚åœº
- æ¸¯è‚¡å¸‚åœº
- ç¾è‚¡å¸‚åœº
- æœŸè´§ã€åŸºé‡‘ç­‰

### 2.4 BaoStock Provider

**æ–‡ä»¶**: `tradingagents/dataflows/providers/china/baostock.py`

**ç‰¹ç‚¹**:
- âœ… å…è´¹ï¼Œæ— éœ€æ³¨å†Œ
- âœ… å¤æƒæ•°æ®å®Œæ•´
- âœ… æ”¯æŒæ²ªæ·±è¡Œæƒ…
- âš ï¸ æ•°æ®æ›´æ–°æœ‰å»¶è¿Ÿ

### 2.5 ç¾è‚¡æ•°æ®æä¾›å™¨

**Yahoo Finance** (`yfinance.py`):
- âœ… å…è´¹å¼€æº
- âœ… å…¨çƒå¸‚åœºè¦†ç›–
- âœ… å†å²æ•°æ®å®Œæ•´
- âš ï¸ å¯èƒ½æœ‰é¢‘ç‡é™åˆ¶

**Finnhub** (`finnhub.py`):
- âœ… APIç¨³å®š
- âœ… æ•°æ®è´¨é‡é«˜
- âœ… å…è´¹é¢åº¦å……è¶³
- âš ï¸ éœ€è¦API Key

---

## 3. åˆ†æå¸ˆç³»ç»Ÿæ¶æ„

### 3.1 åˆ†æå¸ˆåˆ†ç±»

```
tradingagents/agents/
â”œâ”€â”€ analysts/                    # åˆ†æå¸ˆ
â”‚   â”œâ”€â”€ market_analyst.py       # å¸‚åœºåˆ†æå¸ˆï¼ˆæŠ€æœ¯åˆ†æï¼‰
â”‚   â”œâ”€â”€ fundamentals_analyst.py  # åŸºæœ¬é¢åˆ†æå¸ˆ
â”‚   â”œâ”€â”€ news_analyst.py         # æ–°é—»åˆ†æå¸ˆ
â”‚   â””â”€â”€ social_media_analyst.py  # ç¤¾äº¤åª’ä½“åˆ†æå¸ˆ
â”œâ”€â”€ researchers/                # ç ”ç©¶å‘˜ï¼ˆè¾©è®ºå›¢é˜Ÿï¼‰
â”‚   â”œâ”€â”€ bull_researcher.py       # çœ‹æ¶¨ç ”ç©¶å‘˜
â”‚   â””â”€â”€ bear_researcher.py       # çœ‹è·Œç ”ç©¶å‘˜
â”œâ”€â”€ managers/                   # ç®¡ç†è€…
â”‚   â”œâ”€â”€ research_manager.py      # æŠ•èµ„ç ”ç©¶ç»ç†
â”‚   â””â”€â”€ risk_manager.py         # é£é™©ç®¡ç†ç»ç†
â””â”€â”€ risk_mgmt/                   # é£é™©ç®¡ç†å›¢é˜Ÿ
    â”œâ”€â”€ aggressive_debator.py    # æ¿€è¿›é£é™©åˆ†æ
    â”œâ”€â”€ conservative_debator.py  # ä¿å®ˆé£é™©åˆ†æ
    â””â”€â”€ neutral_debator.py       # ä¸­ç«‹é£é™©åˆ†æ
```

### 3.2 æ‰§è¡Œæµç¨‹

```mermaid
graph TD
    A[å¼€å§‹] --> B[å¸‚åœºåˆ†æå¸ˆ]
    B --> C[åŸºæœ¬é¢åˆ†æå¸ˆ]
    C --> D[æ–°é—»åˆ†æå¸ˆ]
    D --> E[ç¤¾äº¤åª’ä½“åˆ†æå¸ˆ]
    
    E --> F[çœ‹æ¶¨ç ”ç©¶å‘˜]
    F --> G[çœ‹è·Œç ”ç©¶å‘˜]
    G --> H{æŠ•èµ„è¾©è®º}
    H --> I[çœ‹æ¶¨ç ”ç©¶å‘˜]
    I --> H
    
    H --> J[æŠ•èµ„ç ”ç©¶ç»ç†]
    J --> K[äº¤æ˜“å†³ç­–è€…]
    
    K --> L[æ¿€è¿›é£é™©åˆ†æ]
    K --> M[ä¿å®ˆé£é™©åˆ†æ]
    K --> N[ä¸­ç«‹é£é™©åˆ†æ]
    
    L --> O{é£é™©è¾©è®º}
    M --> O
    N --> O
    
    O --> P[é£é™©ç®¡ç†ç»ç†]
    P --> Q[æœ€ç»ˆæŠ¥å‘Š]
    
    style A fill:#e1f5ff
    style B fill:#fff4e6
    style C fill:#e8f5e9
    style D fill:#fffaf0
    style E fill:#ffe6fa
    style F fill:#e1f5ff
    style G fill:#fff4e6
    style I fill:#fffaf0
    style J fill:#f3e5f5
    style K fill:#fce4ec
    style L fill:#ffebee
    style M fill:#e8f5e9
    style N fill:#e1f5ff
    style P fill:#f3e5f5
    style Q fill:#e8eaf3
```

### 3.3 çŠ¶æ€ç®¡ç†

**AgentState** (åŸºç¡€çŠ¶æ€):
```python
class AgentState(TypedDict):
    company_of_interest: str  # è‚¡ç¥¨ä»£ç 
    trade_date: str            # äº¤æ˜“æ—¥æœŸ
    messages: List[BaseMessage]  # æ¶ˆæ¯å†å²
    market_report: str         # å¸‚åœºåˆ†ææŠ¥å‘Š
    fundamentals_report: str   # åŸºæœ¬é¢åˆ†ææŠ¥å‘Š
    news_report: str          # æ–°é—»åˆ†ææŠ¥å‘Š
    sentiment_report: str      # ç¤¾äº¤åª’ä½“æƒ…ç»ªæŠ¥å‘Š
    final_report: str         # æœ€ç»ˆç»¼åˆæŠ¥å‘Š
```

**InvestDebateState** (æŠ•èµ„è¾©è®ºçŠ¶æ€):
```python
class InvestDebateState(TypedDict):
    history: str               # è¾©è®ºå†å²
    bull_history: str         # çœ‹æ¶¨å†å²
    current_response: str      # å½“å‰å“åº”
    investment_plan: str       # æŠ•èµ„è®¡åˆ’
```

**RiskDebateState** (é£é™©è¾©è®ºçŠ¶æ€):
```python
class RiskDebateState(TypedDict):
    history: str               # è¾©è®ºå†å²
    current_response: str      # å½“å‰å“åº”
    risk_assessment: str       # é£é™©è¯„ä¼°
```

---

## 4. å¸‚åœºåˆ†æå¸ˆ

**æ–‡ä»¶**: `tradingagents/agents/analysts/market_analyst.py`

### 4.1 èŒè´£

1. **æŠ€æœ¯æŒ‡æ ‡åˆ†æ**
   - ç§»åŠ¨å¹³å‡çº¿ï¼ˆMA5, MA10, MA20, MA60ï¼‰
   - MACDï¼ˆæŒ‡æ•°å¹³æ»‘å¼‚åŒç§»åŠ¨å¹³å‡çº¿ï¼‰
   - RSIï¼ˆç›¸å¯¹å¼ºå¼±æŒ‡æ•°ï¼‰
   - å¸ƒæ—å¸¦ï¼ˆBOLLï¼‰

2. **ä»·æ ¼è¶‹åŠ¿åˆ†æ**
   - è¯†åˆ«è¶‹åŠ¿æ–¹å‘ï¼ˆä¸Šæ¶¨/ä¸‹è·Œ/éœ‡è¡ï¼‰
   - åˆ†ææ”¯æ’‘ä½å’Œé˜»åŠ›ä½
   - è¯„ä¼°ä»·æ ¼æ³¢åŠ¨æ€§

3. **å¸‚åœºæƒ…ç»ªåˆ¤æ–­**
   - åŸºäºæŠ€æœ¯æŒ‡æ ‡åˆ¤æ–­å¸‚åœºæƒ…ç»ª
   - è¯†åˆ«è¶…ä¹°è¶…å–ä¿¡å·
   - æä¾›æŠ€æœ¯é¢æŠ•èµ„å»ºè®®

### 4.2 å·¥å…·ä½¿ç”¨

```python
tools = [toolkit.get_stock_market_data_unified]
```

**ç»Ÿä¸€å·¥å…·è¯´æ˜**:
- è‡ªåŠ¨è¯†åˆ«è‚¡ç¥¨ç±»å‹ï¼ˆAè‚¡/æ¸¯è‚¡/ç¾è‚¡ï¼‰
- è‡ªåŠ¨è°ƒç”¨ç›¸åº”çš„æ•°æ®æº
- è‡ªåŠ¨æ‰©å±•æ—¥æœŸèŒƒå›´ï¼ˆ365å¤©ï¼‰
- æ ‡å‡†åŒ–è¾“å‡ºæ ¼å¼

### 4.3 æç¤ºè¯è®¾è®¡

**å¼ºåˆ¶è¦æ±‚**:
- âŒ ç¦æ­¢åœ¨æ²¡æœ‰è°ƒç”¨å·¥å…·çš„æƒ…å†µä¸‹ç›´æ¥å›ç­”
- âŒ ç¦æ­¢ç¼–é€ ä»»ä½•æŠ€æœ¯æŒ‡æ ‡æ•°æ®
- âŒ ç¦æ­¢åŸºäºæ¨æµ‹æˆ–å‡è®¾ç”Ÿæˆåˆ†æå†…å®¹
- âœ… ç¬¬ä¸€ä¸ªåŠ¨ä½œå¿…é¡»æ˜¯è°ƒç”¨å·¥å…·
- âœ… æ‰€æœ‰æŠ€æœ¯æŒ‡æ ‡æ•°å€¼å¿…é¡»ä½¿ç”¨å·¥å…·è¿”å›çš„å®é™…æ•°æ®

**è¾“å‡ºæ ¼å¼**:
```markdown
## ğŸ“Š è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯
- å…¬å¸åç§°ï¼š{company_name}
- è‚¡ç¥¨ä»£ç ï¼š{ticker}
- æ‰€å±å¸‚åœºï¼š{market_name}

## ğŸ“ˆ æŠ€æœ¯æŒ‡æ ‡åˆ†æ
[åœ¨è¿™é‡Œåˆ†æç§»åŠ¨å¹³å‡çº¿ã€MACDã€RSIã€å¸ƒæ—å¸¦ç­‰æŠ€æœ¯æŒ‡æ ‡ï¼Œæä¾›å…·ä½“æ•°å€¼]

## ğŸ“‰ ä»·æ ¼è¶‹åŠ¿åˆ†æ
[åœ¨è¿™é‡Œåˆ†æä»·æ ¼è¶‹åŠ¿ï¼Œè€ƒè™‘å¸‚åœºç‰¹ç‚¹]

## ğŸ’­ æŠ•èµ„å»ºè®®
[åœ¨è¿™é‡Œç»™å‡ºæ˜ç¡®çš„æŠ•èµ„å»ºè®®ï¼šä¹°å…¥/æŒæœ‰/å–å‡º]
```

### 4.4 æ­»å¾ªç¯é˜²æŠ¤

```python
# å·¥å…·è°ƒç”¨è®¡æ•°å™¨
tool_call_count = state.get("market_tool_call_count", 0)
max_tool_calls = 3

if tool_call_count >= max_tool_calls:
    logger.warning("âš ï¸ å¸‚åœºåˆ†æå¸ˆå·¥å…·è°ƒç”¨æ¬¡æ•°å·²è¾¾ä¸Šé™ï¼Œè·³è¿‡")
    return {"market_report": "æ— æ³•è·å–æ•°æ®"}
```

---

## 5. åŸºæœ¬é¢åˆ†æå¸ˆ

**æ–‡ä»¶**: `tradingagents/agents/analysts/fundamentals_analyst.py`

### 5.1 èŒè´£

1. **è´¢åŠ¡æ•°æ®è·å–**
   - åˆ©æ¶¦è¡¨ï¼ˆè¥ä¸šæ”¶å…¥ã€å‡€åˆ©æ¶¦ç­‰ï¼‰
   - èµ„äº§è´Ÿå€ºè¡¨ï¼ˆæ€»èµ„äº§ã€è´Ÿå€ºç­‰ï¼‰
   - ç°é‡‘æµé‡è¡¨ï¼ˆç»è¥ç°é‡‘æµç­‰ï¼‰
   - è´¢åŠ¡æŒ‡æ ‡ï¼ˆPEã€PBã€ROEç­‰ï¼‰

2. **ä¼°å€¼åˆ†æ**
   - PEï¼ˆå¸‚ç›ˆç‡ï¼‰ä¼°å€¼
   - PBï¼ˆå¸‚å‡€ç‡ï¼‰ä¼°å€¼
   - PEGï¼ˆå¸‚ç›ˆå¢é•¿æ¯”ç‡ï¼‰
   - è¡Œä¸šå¯¹æ¯”åˆ†æ

3. **è´¢åŠ¡å¥åº·åº¦è¯„ä¼°**
   - ç›ˆåˆ©èƒ½åŠ›ï¼ˆROEã€ROAã€æ¯›åˆ©ç‡ï¼‰
   - å¿å€ºèƒ½åŠ›ï¼ˆèµ„äº§è´Ÿå€ºç‡ã€æµåŠ¨æ¯”ç‡ï¼‰
   - æˆé•¿æ€§ï¼ˆè¥æ”¶å¢é•¿ç‡ã€å‡€åˆ©æ¶¦å¢é•¿ç‡ï¼‰

### 5.2 æ•°æ®è·å–èŒƒå›´

```python
def _calculate_date_range(current_date: str, days: int = 10) -> tuple[str, str]:
    """
    è®¡ç®—åˆ†æçš„æ—¥æœŸèŒƒå›´
    
    åŸºæœ¬é¢åˆ†æä¸»è¦ä¾èµ–è´¢åŠ¡æ•°æ®ï¼ˆPEã€PBã€ROEç­‰ï¼‰ï¼Œåªéœ€è¦å½“å‰è‚¡ä»·ã€‚
    è·å–æŒ‡å®šå¤©æ•°çš„æ•°æ®æ˜¯ä¸ºäº†ä¿è¯èƒ½æ‹¿åˆ°æ•°æ®ï¼ˆå¤„ç†å‘¨æœ«/èŠ‚å‡æ—¥/æ•°æ®å»¶è¿Ÿï¼‰ï¼Œ
    ä½†å®é™…åˆ†æåªä½¿ç”¨æœ€è¿‘å‡ å¤©çš„æ•°æ®ã€‚
    """
    end_date_dt = datetime.strptime(current_date, "%Y-%m-%d")
    start_date_dt = end_date_dt - timedelta(days=days)
    return start_date_dt.strftime("%Y-%m-%d"), current_date
```

### 5.3 å¼ºåˆ¶å·¥å…·è°ƒç”¨

**æ ¸å¿ƒæœºåˆ¶**:
```python
def fundamentals_analyst_node(state):
    # æ£€æŸ¥æ˜¯å¦å·²æœ‰å·¥å…·ç»“æœ
    has_tool_result = _count_tool_messages(messages) > 0
    
    # å…³é”®ï¼šåªæœ‰å½“æœ‰å·¥å…·ç»“æœæ—¶æ‰è·³è¿‡å·¥å…·è°ƒç”¨
    if has_tool_result:
        # æ£€æŸ¥æ˜¯å¦å·²æœ‰æœ‰æ•ˆçš„åˆ†æå†…å®¹
        if _has_valid_analysis_content(result):
            logger.info("âœ… åŸºæœ¬é¢åˆ†æå¸ˆå·²æœ‰æœ‰æ•ˆåˆ†æï¼Œè·³è¿‡å·¥å…·è°ƒç”¨")
            return state
    
    # å¦åˆ™å¼ºåˆ¶è°ƒç”¨å·¥å…·
    logger.info("ğŸ”„ åŸºæœ¬é¢åˆ†æå¸ˆå¿…é¡»è°ƒç”¨å·¥å…·è·å–æ•°æ®")
    
    # å¼ºåˆ¶è°ƒç”¨ get_stock_fundamentals_unified
    tools = [toolkit.get_stock_fundamentals_unified]
    response = llm.invoke(prompt)
```

### 5.4 è¾“å‡ºæ ¼å¼

```markdown
## ğŸ“Š å…¬å¸åŸºæœ¬é¢æ¦‚å†µ
- å…¬å¸åç§°ï¼š{company_name}
- è‚¡ç¥¨ä»£ç ï¼š{ticker}
- æ‰€å±è¡Œä¸šï¼š{industry}

## ğŸ’° ä¼°å€¼åˆ†æ
- å¸‚ç›ˆç‡ï¼ˆPEï¼‰ï¼š{value}ï¼ˆä¼°å€¼æ°´å¹³ï¼‰
- å¸‚å‡€ç‡ï¼ˆPBï¼‰ï¼š{value}ï¼ˆä¼°å€¼æ°´å¹³ï¼‰
- å¸‚é”€ç‡ï¼ˆPSï¼‰ï¼š{value}ï¼ˆä¼°å€¼æ°´å¹³ï¼‰
- ä¼°å€¼è¯„ä¼°ï¼š{under/over/fair}ï¼ˆä½ä¼°/é«˜ä¼°/åˆç†ï¼‰

## ğŸ“ˆ ç›ˆåˆ©èƒ½åŠ›åˆ†æ
- ROEï¼ˆå‡€èµ„äº§æ”¶ç›Šç‡ï¼‰ï¼š{value}ï¼ˆç›ˆåˆ©èƒ½åŠ›è¯„çº§ï¼‰
- ROAï¼ˆæ€»èµ„äº§æ”¶ç›Šç‡ï¼‰ï¼š{value}ï¼ˆèµ„äº§åˆ©ç”¨æ•ˆç‡ï¼‰
- æ¯›åˆ©ç‡ï¼š{value}ï¼ˆç›ˆåˆ©ç©ºé—´ï¼‰
- å‡€åˆ©ç‡ï¼š{value}ï¼ˆæœ€ç»ˆç›ˆåˆ©èƒ½åŠ›ï¼‰

## ğŸ’³ å¿å€ºèƒ½åŠ›åˆ†æ
- èµ„äº§è´Ÿå€ºç‡ï¼š{value}ï¼ˆè´¢åŠ¡é£é™©ï¼‰
- æµåŠ¨æ¯”ç‡ï¼š{value}ï¼ˆçŸ­æœŸå¿å€ºèƒ½åŠ›ï¼‰
- é€ŸåŠ¨æ¯”ç‡ï¼š{value}ï¼ˆå³æ—¶å¿å€ºèƒ½åŠ›ï¼‰
- è´¢åŠ¡é£é™©è¯„çº§ï¼š{low/medium/high}

## ğŸ“Š æˆé•¿æ€§åˆ†æ
- è¥ä¸šæ”¶å…¥å¢é•¿ç‡ï¼š{value}ï¼ˆè¿‘Nå¹´ï¼‰
- å‡€åˆ©æ¶¦å¢é•¿ç‡ï¼š{value}ï¼ˆè¿‘Nå¹´ï¼‰
- åˆ©æ¶¦å¢é•¿ç‡ï¼š{value}ï¼ˆè¿‘Nå¹´ï¼‰
- æˆé•¿æ€§è¯„çº§ï¼š{strong/moderate/weak}

## ğŸ’¡ æŠ•èµ„å»ºè®®
åŸºäºä»¥ä¸ŠåŸºæœ¬é¢åˆ†æï¼š{æŠ•èµ„å»ºè®®}
```

### 5.5 è¾…åŠ©å‡½æ•°

**å·¥å…·æ¶ˆæ¯è®¡æ•°**:
```python
def _count_tool_messages(messages: list) -> int:
    """ç»Ÿè®¡æ¶ˆæ¯å†å²ä¸­çš„å·¥å…·æ¶ˆæ¯æ•°é‡"""
    return sum(1 for msg in messages if isinstance(msg, ToolMessage))
```

**å·¥å…·ç»“æœæ£€æŸ¥**:
```python
def _has_tool_result(messages: list) -> bool:
    """æ£€æŸ¥æ¶ˆæ¯å†å²ä¸­æ˜¯å¦å·²æœ‰å·¥å…·è¿”å›ç»“æœ"""
    return any(isinstance(msg, ToolMessage) for msg in messages)
```

**åˆ†æå†…å®¹éªŒè¯**:
```python
def _has_valid_analysis_content(result: Any, min_length: int = 500) -> bool:
    """æ£€æŸ¥LLMè¿”å›æ˜¯å¦åŒ…å«æœ‰æ•ˆçš„åˆ†æå†…å®¹"""
    if not hasattr(result, 'content') or not result.content:
        return False
    content_length = len(str(result.content))
    return content_length > min_length
```

---

## 6. æ–°é—»åˆ†æå¸ˆ

**æ–‡ä»¶**: `tradingagents/agents/analysts/news_analyst.py`

### 6.1 èŒè´£

1. **æ–°é—»è·å–**
   - è·å–æœ€æ–°çš„å®æ—¶æ–°é—»ï¼ˆä¼˜å…ˆ15-30åˆ†é’Ÿå†…ï¼‰
   - å¤šæºèšåˆï¼ˆæ–°æµªè´¢ç»ã€ä¸œæ–¹è´¢å¯Œã€è´¢è”ç¤¾ç­‰ï¼‰
   - æ–°é—»æ—¶æ•ˆæ€§éªŒè¯

2. **æ–°é—»åˆ†æ**
   - è¯„ä¼°æ–°é—»äº‹ä»¶çš„ç´§æ€¥ç¨‹åº¦å’Œå¸‚åœºå½±å“
   - è¯†åˆ«å¯èƒ½å½±å“è‚¡ä»·çš„å…³é”®ä¿¡æ¯
   - åˆ†ææ–°é—»çš„æ—¶æ•ˆæ€§å’Œå¯é æ€§

3. **å½±å“è¯„ä¼°**
   - è¯„ä¼°æ–°é—»å¯¹è‚¡ä»·çš„çŸ­æœŸå½±å“ï¼ˆ1-3å¤©ï¼‰
   - åˆ†ææ–°é—»çš„åˆ©å¥½/åˆ©ç©ºç¨‹åº¦
   - å¯¹æ¯”å†å²ç±»ä¼¼äº‹ä»¶çš„å¸‚åœºååº”

### 6.2 ç»Ÿä¸€æ–°é—»å·¥å…·

```python
# åˆ›å»ºç»Ÿä¸€æ–°é—»å·¥å…·
unified_news_tool = create_unified_news_tool(toolkit)
unified_news_tool.name = "get_stock_news_unified"

tools = [unified_news_tool]
```

**è‡ªåŠ¨è¯†åˆ«è‚¡ç¥¨ç±»å‹**:
- Aè‚¡ï¼šè°ƒç”¨ä¸­å›½è´¢ç»æ–°é—»æº
- ç¾è‚¡ï¼šè°ƒç”¨Finnhubã€Yahoo Financeç­‰
- æ¸¯è‚¡ï¼šè°ƒç”¨ä¸œæ–¹è´¢å¯Œã€æ–°æµªç­‰

### 6.3 æ–°é—»æºä¼˜å…ˆçº§

**Aè‚¡å¸‚åœº**:
1. è´¢è”ç¤¾ï¼ˆæƒå¨ã€æ—¶æ•ˆå¿«ï¼‰
2. æ–°æµªè´¢ç»ï¼ˆè¦†ç›–å…¨é¢ï¼‰
3. ä¸œæ–¹è´¢å¯Œï¼ˆæ•°æ®ä¸°å¯Œï¼‰
4. è…¾è®¯è´¢ç»ï¼ˆä¸“ä¸šåˆ†æï¼‰
5. åŒèŠ±é¡ºï¼ˆæŠ•èµ„è€…ç¤¾åŒºï¼‰

**ç¾è‚¡å¸‚åœº**:
1. Finnhub News
2. Yahoo Finance News
3. Alpha Vantage News
4. Google News

**æ¸¯è‚¡å¸‚åœº**:
1. ä¸œæ–¹è´¢å¯Œæ¸¯è‚¡
2. æ–°æµªè´¢ç»æ¸¯è‚¡
3. è´¢è”ç¤¾æ¸¯è‚¡

### 6.4 æç¤ºè¯è®¾è®¡

**é‡ç‚¹å…³æ³¨çš„æ–°é—»ç±»å‹**:
- è´¢æŠ¥å‘å¸ƒå’Œä¸šç»©æŒ‡å¯¼
- é‡å¤§åˆä½œå’Œå¹¶è´­æ¶ˆæ¯
- æ”¿ç­–å˜åŒ–å’Œç›‘ç®¡åŠ¨æ€
- çªå‘äº‹ä»¶å’Œå±æœºç®¡ç†
- è¡Œä¸šè¶‹åŠ¿å’ŒæŠ€æœ¯çªç ´
- ç®¡ç†å±‚å˜åŠ¨å’Œæˆ˜ç•¥è°ƒæ•´

**åˆ†æè¦ç‚¹**:
- æ–°é—»çš„æ—¶æ•ˆæ€§ï¼ˆå‘å¸ƒæ—¶é—´è·ç¦»ç°åœ¨å¤šä¹…ï¼‰
- æ–°é—»çš„å¯ä¿¡åº¦ï¼ˆæ¥æºæƒå¨æ€§ï¼‰
- å¸‚åœºå½±å“ç¨‹åº¦ï¼ˆå¯¹è‚¡ä»·çš„æ½œåœ¨å½±å“ï¼‰
- æŠ•èµ„è€…æƒ…ç»ªå˜åŒ–ï¼ˆæ­£é¢/è´Ÿé¢/ä¸­æ€§ï¼‰
- ä¸å†å²ç±»ä¼¼äº‹ä»¶çš„å¯¹æ¯”

**è¾“å‡ºæ ¼å¼**:
```markdown
## ğŸ“° é‡è¦æ–°é—»æ±‡æ€»
### {æ—¶é—´æ®µ}å†…çš„å…³é”®æ–°é—»äº‹ä»¶

### ğŸ”¥ æœ€é«˜å½±å“åŠ›æ–°é—»
[æ–°é—»æ ‡é¢˜]
- å‘å¸ƒæ—¶é—´ï¼š{time}
- æ–°é—»æ¥æºï¼š{source}
- å¸‚åœºå½±å“è¯„ä¼°ï¼š{high/medium/low}

## ğŸ“Š æ–°é—»å½±å“åˆ†æ
- çŸ­æœŸå½±å“ï¼ˆ1-3å¤©ï¼‰ï¼š{åˆ†æ}
- å¸‚åœºæƒ…ç»ªå˜åŒ–ï¼š{åˆ†æ}
- ä¸å†å²äº‹ä»¶å¯¹æ¯”ï¼š{åˆ†æ}

## ğŸ’­ åŸºäºæ–°é—»çš„æŠ•èµ„å»ºè®®
- äº¤æ˜“æ—¶æœºå»ºè®®ï¼š{å»ºè®®}
- æŒä»“è°ƒæ•´å»ºè®®ï¼š{å»ºè®®}
- é£é™©æç¤ºï¼š{é£é™©}
```

---

## 7. ç¤¾äº¤åª’ä½“åˆ†æå¸ˆ

**æ–‡ä»¶**: `tradingagents/agents/analysts/social_media_analyst.py`

### 7.1 èŒè´£

1. **æƒ…ç»ªç›‘æ§**
   - ç›‘æ§ä¸­å›½ä¸»è¦è´¢ç»å¹³å°çš„æŠ•èµ„è€…æƒ…ç»ª
   - åˆ†æé›ªçƒã€ä¸œæ–¹è´¢å¯Œè‚¡å§ç­‰ç¤¾åŒºè®¨è®º
   - è¿½è¸ªç¤¾äº¤åª’ä½“çƒ­åº¦å˜åŒ–

2. **çƒ­ç‚¹è¯†åˆ«**
   - è¯†åˆ«å½±å“è‚¡ä»·çš„çƒ­ç‚¹äº‹ä»¶å’Œå¸‚åœºä¼ è¨€
   - åˆ†ææ”¿ç­–å˜åŒ–å¯¹æŠ•èµ„è€…æƒ…ç»ªçš„å½±å“
   - è¯„ä¼°æ•£æˆ·ä¸æœºæ„æŠ•èµ„è€…çš„è§‚ç‚¹å·®å¼‚

3. **æƒ…ç»ªé‡åŒ–**
   - æƒ…ç»ªæŒ‡æ•°è¯„åˆ†ï¼ˆ1-10åˆ†ï¼‰
   - æƒ…ç»ªå˜åŒ–è¶‹åŠ¿åˆ†æ
   - æç«¯æƒ…ç»ªç‚¹è¯†åˆ«

### 7.2 é‡ç‚¹å…³æ³¨å¹³å°

**è´¢ç»æ–°é—»å¹³å°**:
- è´¢è”ç¤¾
- æ–°æµªè´¢ç»
- ä¸œæ–¹è´¢å¯Œ
- è…¾è®¯è´¢ç»

**æŠ•èµ„ç¤¾åŒº**:
- é›ªçƒ
- ä¸œæ–¹è´¢å¯Œè‚¡å§
- åŒèŠ±é¡º
- è›‹ç‰›

**ç¤¾äº¤å¹³å°**:
- å¾®åšè´¢ç»å¤§V
- çŸ¥ä¹æŠ•èµ„è¯é¢˜
- æŠ–éŸ³è´¢ç»

**ä¸“ä¸šåˆ†æ**:
- å„å¤§åˆ¸å•†ç ”æŠ¥
- è´¢ç»è‡ªåª’ä½“
- æŠ•èµ„å¤§å¸ˆè§‚ç‚¹

### 7.3 ç»Ÿä¸€æƒ…ç»ªå·¥å…·

```python
tools = [toolkit.get_stock_sentiment_unified]
```

**è‡ªåŠ¨è¯†åˆ«**:
- è‚¡ç¥¨ç±»å‹ï¼ˆAè‚¡/æ¸¯è‚¡/ç¾è‚¡ï¼‰
- å¹³å°ç±»å‹ï¼ˆå›½å†…/å›½å¤–ï¼‰
- æ•°æ®æºè°ƒç”¨

### 7.4 è¾“å‡ºæ ¼å¼

```markdown
## ğŸ“Š ç¤¾äº¤åª’ä½“æƒ…ç»ªæŒ‡æ•°
- æƒ…ç»ªæŒ‡æ•°è¯„åˆ†ï¼š{1-10}ï¼ˆ1æåº¦æ‚²è§‚ï¼Œ10æåº¦ä¹è§‚ï¼‰
- æƒ…ç»ªå˜åŒ–è¶‹åŠ¿ï¼š{rising/stable/declining}ï¼ˆä¸Šå‡/ç¨³å®š/ä¸‹é™ï¼‰
- æƒ…ç»ªå¼ºåº¦ï¼š{strong/moderate/weak}ï¼ˆå¼ºåº¦ï¼‰

## ğŸ‘¥ æŠ•èµ„è€…ç¾¤ä½“åˆ†æ
- æ•£æˆ·æƒ…ç»ªï¼š{åˆ†æ}
- æœºæ„è§‚ç‚¹ï¼š{åˆ†æ}
- æ„è§åˆ†æ­§åº¦ï¼š{high/medium/low}ï¼ˆåˆ†æ­§ç¨‹åº¦ï¼‰

## ğŸ“ˆ æƒ…ç»ªä¸è‚¡ä»·å…³è”æ€§
- å½“å‰æƒ…ç»ªä¸èµ°åŠ¿å…³ç³»ï¼š{åˆ†æ}
- æƒ…ç»ªåè½¬ä¿¡å·ï¼š{signal/no signal}ï¼ˆåè½¬ä¿¡å·ï¼‰
- å†å²æƒ…ç»ªå¯¹æ¯”ï¼š{å¯¹æ¯”åˆ†æ}

## ğŸ’­ åŸºäºæƒ…ç»ªçš„æŠ•èµ„å»ºè®®
- æƒ…ç»ªé©±åŠ¨çš„äº¤æ˜“æ—¶æœºï¼š{æ—¶æœºå»ºè®®}
- çŸ­æœŸä»·æ ¼æ³¢åŠ¨é¢„æœŸï¼š{æ³¢åŠ¨å¹…åº¦}
- åæƒ…ç»ªç­–ç•¥ï¼š{ç­–ç•¥å»ºè®®}
```

### 7.5 æ•°æ®éªŒè¯è¦æ±‚

```python
# æƒ…ç»ªæŒ‡æ•°è¯„åˆ†æ˜¯å¦åˆç†ï¼Ÿï¼ˆé€šå¸¸ 1-10 åˆ†ï¼‰
# æƒ…ç»ªå˜åŒ–è¶‹åŠ¿æ˜¯å¦ç¬¦åˆå®é™…æ•°æ®ï¼Ÿ
# æŠ•èµ„è€…æƒ…ç»ªåˆ†ææ˜¯å¦åŸºäºå…·ä½“è®¨è®ºå†…å®¹ï¼Ÿ
# KOLè§‚ç‚¹æ˜¯å¦æœ‰å®é™…å¼•ç”¨ï¼Ÿ
# æ˜¯å¦æœ‰çŸ›ç›¾çš„æƒ…ç»ªæ•°æ®ç‚¹ï¼Ÿ
# æ‰€æœ‰æƒ…ç»ªè¯„åˆ†å¿…é¡»ä½¿ç”¨å·¥å…·è¿”å›çš„å®é™…æ•°æ®ï¼Œä¸å…è®¸ç¼–é€ 
```

---

## 8. æŠ•èµ„è¾©è®ºå›¢é˜Ÿ

### 8.1 çœ‹æ¶¨ç ”ç©¶å‘˜

**æ–‡ä»¶**: `tradingagents/agents/researchers/bull_researcher.py`

**èŒè´£**:
- å»ºç«‹çœ‹æ¶¨è®ºè¯
- æ”¶é›†çœ‹æ¶¨è¯æ®
- åé©³çœ‹è·Œè§‚ç‚¹
- ä½¿ç”¨å†å²è®°å¿†å­¦ä¹ 

**è®°å¿†æ£€ç´¢**:
```python
past_memories = memory.get_memories(curr_situation, n_matches=5)

for i, rec in enumerate(past_memories, 1):
    past_memory_str += rec["recommendation"] + "\n\n"
```

**æ•°æ®éªŒè¯æ¸…å•**:
- [ ] PE/PBæ¯”ç‡æ˜¯å¦åˆç†ï¼Ÿ
- [ ] ROEæ˜¯å¦åœ¨åˆç†èŒƒå›´ï¼Ÿ
- [ ] å¢é•¿ç‡æ˜¯å¦åˆç†ï¼Ÿ
- [ ] ä¼°å€¼æ–¹æ³•æ˜¯å¦ä¸€è‡´ï¼Ÿ
- [ ] æ˜¯å¦æœ‰ç¼–é€ æ•°æ®ï¼Ÿ

### 8.2 çœ‹è·Œç ”ç©¶å‘˜

**æ–‡ä»¶**: `tradingagents/agents/researchers/bear_researcher.py`

**èŒè´£**:
- å»ºç«‹çœ‹è·Œè®ºè¯
- è¯†åˆ«é£é™©å› ç´ 
- æŒ‘æˆ˜çœ‹æ¶¨è§‚ç‚¹
- ä½¿ç”¨å†å²è®°å¿†å­¦ä¹ 

**é£é™©è¯†åˆ«**:
- ä¼°å€¼è¿‡é«˜é£é™©
- è¡Œä¸šå‘¨æœŸé£é™©
- è´¢åŠ¡æ¶åŒ–é£é™©
- å®è§‚ç»æµé£é™©
- ç«äº‰åŠ å‰§é£é™©

### 8.3 è¾©è®ºæœºåˆ¶

**é…ç½®å‚æ•°**:
```python
# tradingagents/default_config.py
"max_debate_rounds": 3,        # 3è½®è¾©è®º = 6æ¬¡äº¤é”‹
```

**è¾©è®ºæµç¨‹**:
```
ç¬¬1è½®ï¼š
  çœ‹æ¶¨ç ”ç©¶å‘˜ â†’ çœ‹è·Œç ”ç©¶å‘˜ â†’ çœ‹è·Œç ”ç©¶å‘˜ â†’ çœ‹æ¶¨ç ”ç©¶å‘˜
  
ç¬¬2è½®ï¼š
  çœ‹æ¶¨ç ”ç©¶å‘˜ â†’ çœ‹è·Œç ”ç©¶å‘˜ â†’ çœ‹è·Œç ”ç©¶å‘˜ â†’ çœ‹æ¶¨ç ”ç©¶å‘˜
  
ç¬¬3è½®ï¼š
  çœ‹æ¶¨ç ”ç©¶å‘˜ â†’ çœ‹è·Œç ”ç©¶å‘˜ â†’ çœ‹è·Œç ”ç©¶å‘˜ â†’ çœ‹æ¶¨ç ”ç©¶å‘˜
  
æ€»ç»“é˜¶æ®µï¼š
  æŠ•èµ„ç ”ç©¶ç»ç† â†’ æŠ•èµ„è®¡åˆ’ â†’ äº¤æ˜“å†³ç­–è€…
```

**è¾©è®ºå†å²ç´¯ç§¯**:
```python
InvestDebateState:
  history: str           # å®Œæ•´è¾©è®ºå†å²
  bull_history: str       # çœ‹æ¶¨è§‚ç‚¹å†å²
  current_response: str   # å½“å‰å“åº”
  investment_plan: str   # æŠ•èµ„è®¡åˆ’
```

---

## 9. é£é™©è¾©è®ºå›¢é˜Ÿ

### 9.1 é£é™©åˆ†æå¸ˆç±»å‹

**æ¿€è¿›é£é™©åˆ†æ**:
- è¯„ä¼°æœ€å¤§å¯èƒ½æŸå¤±
- è€ƒè™‘æç«¯å¸‚åœºæƒ…å†µ
- å¼ºè°ƒä¸‹è¡Œé£é™©

**ä¿å®ˆé£é™©åˆ†æ**:
- è¯„ä¼°æœ€å®‰å…¨çš„æƒ…å†µ
- è€ƒè™‘å†å²æœ€ä½ç‚¹
- å¼ºè°ƒå®‰å…¨æ€§

**ä¸­ç«‹é£é™©åˆ†æ**:
- å¹³è¡¡è¯„ä¼°
- è€ƒè™‘æ­£å¸¸å¸‚åœºæ³¢åŠ¨
- æä¾›å¹³è¡¡è§‚ç‚¹

### 9.2 è¾©è®ºæœºåˆ¶

**é…ç½®å‚æ•°**:
```python
"max_risk_discuss_rounds": 2,  # 2è½®è¾©è®º = 6æ¬¡äº¤é”‹
```

**è¾©è®ºæµç¨‹**:
```
ç¬¬1è½®ï¼š
  æ¿€è¿›åˆ†æ â†’ ä¿å®ˆåˆ†æ â†’ ä¸­ç«‹åˆ†æ â†’ æ¿€è¿›åˆ†æ
  
ç¬¬2è½®ï¼š
  æ¿€è¿›åˆ†æ â†’ ä¿å®ˆåˆ†æ â†’ ä¸­ç«‹åˆ†æ â†’ æ¿€è¿›åˆ†æ
  
æ€»ç»“é˜¶æ®µï¼š
  é£é™©ç®¡ç†ç»ç† â†’ æœ€ç»ˆå†³ç­–
```

### 9.3 é£é™©è¯„ä¼°ç»´åº¦

**å¸‚åœºé£é™©**:
- å¸‚åœºæ•´ä½“æ³¢åŠ¨
- è¡Œä¸šå‘¨æœŸå½±å“
- å®è§‚ç»æµé£é™©

**ä¸ªè‚¡é£é™©**:
- åŸºæœ¬é¢æ¶åŒ–é£é™©
- ä¼°å€¼è¿‡é«˜é£é™©
- æµåŠ¨æ€§é£é™©
- æ”¿ç­–ç›‘ç®¡é£é™©

**æŠ€æœ¯é£é™©**:
- æŠ€æœ¯ç ´ä½é£é™©
- äº¤æ˜“é‡èç¼©é£é™©
- æŠ€æœ¯å½¢æ€æ¶åŒ–

---

## 10. äº¤æ˜“å†³ç­–è€…

**æ–‡ä»¶**: `tradingagents/agents/trader/trader.py`

### 10.1 èŒè´£

1. **ç»¼åˆå†³ç­–**
   - æ±‡æ€»æ‰€æœ‰åˆ†æå¸ˆæŠ¥å‘Š
   - ç»¼åˆæŠ•èµ„è¾©è®ºç»“æœ
   - ç»¼åˆé£é™©è¯„ä¼°ç»“æœ

2. **æŠ•èµ„è®¡åˆ’åˆ¶å®š**
   - æ˜ç¡®æŠ•èµ„å»ºè®®ï¼ˆä¹°å…¥/æŒæœ‰/å–å‡ºï¼‰
   - è®¾å®šç›®æ ‡ä»·æ ¼åŒºé—´
   - åˆ¶å®šåˆ†æ‰¹å»ºä»“/å¹³ä»“ç­–ç•¥
   - è®¾ç½®æ­¢ç›ˆæ­¢æŸä½

3. **å†³ç­–éªŒè¯**
   - éªŒè¯å†³ç­–çš„å®Œæ•´æ€§
   - ç¡®ä¿åŒ…å«æ‰€æœ‰å¿…è¦è¦ç´ 
   - æ£€æŸ¥æ•°æ®åˆç†æ€§

### 10.2 å†³ç­–éªŒè¯å‡½æ•°

```python
def validate_trading_decision(content: str, currency_symbol: str, company_name: str) -> dict:
    """
    éªŒè¯äº¤æ˜“å†³ç­–çš„æœ‰æ•ˆæ€§
    
    æ£€æŸ¥é¡¹ï¼š
    1. æ˜¯å¦åŒ…å«æŠ•èµ„å»ºè®®ï¼ˆä¹°å…¥/æŒæœ‰/å–å‡ºï¼‰
    2. æ˜¯å¦åŒ…å«ç›®æ ‡ä»·ä½
    3. è´§å¸å•ä½æ˜¯å¦æ­£ç¡®
    4. æ˜¯å¦åŒ…å«"æ— æ³•ç¡®å®š"ç­‰å›é¿è¯­å¥
    5. æ˜¯å¦åŒ…å«ç½®ä¿¡åº¦è¯„åˆ†
    6. æ˜¯å¦åŒ…å«é£é™©è¯„åˆ†
    """
    result = {
        "is_valid": True,
        "warnings": [],
        "has_target_price": False,
        "recommendation": "æœªçŸ¥"
    }
    
    # 1. æ£€æŸ¥æŠ•èµ„å»ºè®®
    if not re.search(r'(ä¹°å…¥|æŒæœ‰|å–å‡º)', content):
        result["warnings"].append("æœªæ‰¾åˆ°æ˜ç¡®çš„æŠ•èµ„å»ºè®®ï¼ˆä¹°å…¥/æŒæœ‰/å–å‡ºï¼‰")
        result["recommendation"] = "æœªçŸ¥"
    
    # 2. æ£€æŸ¥ç›®æ ‡ä»·ä½
    if not re.search(r'[Â¥$ï¿¥]\s*\d+\.?\d*', content):
        result["warnings"].append("æœªæ‰¾åˆ°å…·ä½“çš„ç›®æ ‡ä»·ä½")
        result["has_target_price"] = False
        result["is_valid"] = False
    
    # 3. æ£€æŸ¥è´§å¸å•ä½
    if currency_symbol == "Â¥" and "$" in content and "Â¥" not in content:
        result["warnings"].append(f"Aè‚¡ {company_name} åº”ä½¿ç”¨äººæ°‘å¸(Â¥)")
    
    # 4. æ£€æŸ¥å›é¿è¯­å¥
    evasive_patterns = ['æ— æ³•ç¡®å®š', 'éœ€è¦æ›´å¤šä¿¡æ¯', 'æ— æ³•æä¾›', 'ä¸ç¡®å®š', 'æš‚æ—¶æ— æ³•']
    for pattern in evasive_patterns:
        if re.search(pattern, content):
            result["warnings"].append(f"æ£€æµ‹åˆ°å›é¿æ€§è¯­å¥: '{pattern}'")
    
    # 5. æ£€æŸ¥ç½®ä¿¡åº¦
    if not re.search(r'ç½®ä¿¡åº¦[ï¼š:]\s*\d+\.?\d+', content):
        result["warnings"].append("æœªæ‰¾åˆ°ç½®ä¿¡åº¦è¯„åˆ†")
    
    # 6. æ£€æŸ¥é£é™©è¯„åˆ†
    if not re.search(r'é£é™©è¯„åˆ†[ï¼š:]\s*\d+\.?\d+', content):
        result["warnings"].append("æœªæ‰¾åˆ°é£é™©è¯„åˆ†")
    
    return result
```

### 10.3 è¾“å‡ºæ ¼å¼

```markdown
## ğŸ¯ æœ€ç»ˆäº¤æ˜“å»ºè®®

### æŠ•èµ„å»ºè®®
**{ä¹°å…¥/æŒæœ‰/å–å‡º}**

### ç†ç”±
[æŠ•èµ„å†³ç­–çš„ä¸»è¦ç†ç”±]

### æŠ•èµ„è®¡åˆ’

#### åˆ†æ‰¹å»ºä»“ç­–ç•¥
- ç¬¬ä¸€æ‰¹ï¼š{ä»·æ ¼åŒºé—´}ï¼Œ{ä»“ä½æ¯”ä¾‹}
- ç¬¬äºŒæ‰¹ï¼š{ä»·æ ¼åŒºé—´}ï¼Œ{ä»“ä½æ¯”ä¾‹}
- ç¬¬ä¸‰æ‰¹ï¼š{ä»·æ ¼åŒºé—´}ï¼Œ{ä»“ä½æ¯”ä¾‹}

#### æ­¢ç›ˆæ­¢æŸ
- æ­¢ç›ˆä½ï¼š{price}ï¼ˆ{å¹…åº¦}%ï¼‰
- æ­¢æŸä½ï¼š{price}ï¼ˆ{å¹…åº¦}%ï¼‰

#### æ—¶é—´è§„åˆ’
- çŸ­æœŸï¼ˆ1ä¸ªæœˆï¼‰ï¼š{ç›®æ ‡ä»·æ ¼}
- ä¸­æœŸï¼ˆ3ä¸ªæœˆï¼‰ï¼š{ç›®æ ‡ä»·æ ¼}
- é•¿æœŸï¼ˆ6ä¸ªæœˆï¼‰ï¼š{ç›®æ ‡ä»·æ ¼}

### é£é™©æç¤º
[åŸºäºé£é™©è¾©è®ºçš„é£é™©æç¤º]

### ç½®ä¿¡åº¦
- ç½®ä¿¡åº¦ï¼š{0-100}åˆ†
- é£é™©è¯„åˆ†ï¼š{0-10}åˆ†
- å»ºè®®ä»“ä½ï¼š{æ¯”ä¾‹}%
```

---

## 11. æ•°æ®æµç¨‹åˆ†æ

### 11.1 å®Œæ•´æ‰§è¡Œæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     TradingAgentsGraph                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                       â”‚                       â”‚
        â–¼                       â–¼                       â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ æ•°æ®æºç®¡ç† â”‚          â”‚ å·¥å…·ç³»ç»Ÿ  â”‚          â”‚ æç¤ºè¯ç®¡ç†â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                       â”‚                       â”‚
        â–¼                       â–¼                       â”‚
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                    æ•°æ®æä¾›å™¨å±‚                      â”‚
  â”‚  (Tushare/AKShare/Baostock/yfinance/Finnhub)       â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                    ç¼“å­˜å±‚                          â”‚
  â”‚  (Redis/MongoDB/File)                               â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                  åˆ†æå¸ˆå›¢é˜Ÿ                          â”‚
  â”‚  (å¸‚åœº/åŸºæœ¬é¢/æ–°é—»/ç¤¾äº¤åª’ä½“)                       â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                è¾©è®ºå›¢é˜Ÿ                             â”‚
  â”‚  (çœ‹æ¶¨/çœ‹è·Œç ”ç©¶å‘˜ + æŠ•èµ„ç ”ç©¶ç»ç†)                 â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚               é£é™©ç®¡ç†å›¢é˜Ÿ                         â”‚
  â”‚  (æ¿€è¿›/ä¿å®ˆ/ä¸­ç«‹ + é£é™©ç®¡ç†ç»ç†)                 â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚               äº¤æ˜“å†³ç­–è€…                           â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                æœ€ç»ˆæŠ¥å‘Š                             â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 11.2 æ•°æ®è·å–æµç¨‹

**æµç¨‹1ï¼šå¸‚åœºæ•°æ®è·å–**
```python
1. ç”¨æˆ·è¾“å…¥è‚¡ç¥¨ä»£ç ï¼ˆå¦‚ 600765ï¼‰
2. StockUtils.get_market_info(ticker) è¯†åˆ«å¸‚åœºç±»å‹
3. get_stock_market_data_unified(ticker) è°ƒç”¨ç»Ÿä¸€å·¥å…·
4. æ•°æ®æºç®¡ç†å™¨é€‰æ‹©æ•°æ®æºï¼š
   - æ£€æŸ¥ MongoDB ç¼“å­˜
   - è¯»å–æ•°æ®åº“é…ç½®
   - æŒ‰ä¼˜å…ˆçº§é€‰æ‹©æ•°æ®æº
5. æ•°æ®æä¾›å™¨è·å–æ•°æ®ï¼š
   - TushareProvider.get_historical_data()
   - æˆ–è€… AKShareProvider.get_historical_data()
6. æ•°æ®æ ‡å‡†åŒ–å’Œæ ¼å¼åŒ–
7. è¿”å›ç»™åˆ†æå¸ˆ
```

**æµç¨‹2ï¼šåŸºæœ¬é¢æ•°æ®è·å–**
```python
1. get_stock_fundamentals_unified(ticker) è°ƒç”¨ç»Ÿä¸€å·¥å…·
2. è‡ªåŠ¨è¯†åˆ«è‚¡ç¥¨ç±»å‹
3. è°ƒç”¨ç›¸åº”æ•°æ®æºï¼š
   - Tushare: income(), balancesheet(), cashflow(), fina_indicator()
   - AKShare: stock_financial(), stock_financial_analysis()
4. æ•°æ®æ ‡å‡†åŒ–ï¼ˆPEã€PBã€ROEç­‰ï¼‰
5. è¿”å›ç»™åŸºæœ¬é¢åˆ†æå¸ˆ
```

**æµç¨‹3ï¼šæ–°é—»æ•°æ®è·å–**
```python
1. get_stock_news_unified(ticker) è°ƒç”¨ç»Ÿä¸€æ–°é—»å·¥å…·
2. è‡ªåŠ¨è¯†åˆ«è‚¡ç¥¨ç±»å‹
3. è°ƒç”¨ç›¸åº”æ–°é—»æºï¼š
   - Aè‚¡ï¼šè´¢è”ç¤¾ã€æ–°æµªè´¢ç»ã€ä¸œæ–¹è´¢å¯Œ
   - ç¾è‚¡ï¼šFinnhubã€Yahoo Finance
   - æ¸¯è‚¡ï¼šä¸œæ–¹è´¢å¯Œæ¸¯è‚¡ã€æ–°æµªæ¸¯è‚¡
4. æ–°é—»èšåˆå’Œå»é‡
5. æƒ…ç»ªåˆ†æå’Œé‡è¦æ€§è¯„ä¼°
6. è¿”å›ç»™æ–°é—»åˆ†æå¸ˆ
```

**æµç¨‹4ï¼šæƒ…ç»ªæ•°æ®è·å–**
```python
1. get_stock_sentiment_unified(ticker) è°ƒç”¨ç»Ÿä¸€æƒ…ç»ªå·¥å…·
2. è‡ªåŠ¨è¯†åˆ«è‚¡ç¥¨ç±»å‹
3. è°ƒç”¨ç›¸åº”æƒ…ç»ªæ•°æ®æºï¼š
   - Aè‚¡ï¼šé›ªçƒã€ä¸œæ–¹è´¢å¯Œè‚¡å§ã€åŒèŠ±é¡º
   - ç¾è‚¡ï¼šRedditã€Twitterã€StockTwits
   - æ¸¯è‚¡ï¼šé›ªçƒæ¸¯è‚¡ã€ä¸œæ–¹è´¢å¯Œæ¸¯è‚¡
4. æƒ…ç»ªæŒ‡æ•°è®¡ç®—
5. æƒ…ç»ªè¶‹åŠ¿åˆ†æ
6. è¿”å›ç»™ç¤¾äº¤åª’ä½“åˆ†æå¸ˆ
```

### 11.3 ç¼“å­˜ç­–ç•¥

**ç¼“å­˜å±‚çº§**:
```
Level 1: Redisç¼“å­˜ï¼ˆæœ€å¿«ï¼Œé€‚åˆçƒ­ç‚¹æ•°æ®ï¼‰
Level 2: MongoDBç¼“å­˜ï¼ˆæŒä¹…åŒ–ï¼Œé€‚åˆå†å²æ•°æ®ï¼‰
Level 3: æ–‡ä»¶ç¼“å­˜ï¼ˆå…œåº•ï¼Œç®€å•ç¨³å®šï¼‰
```

**ç¼“å­˜é”®è®¾è®¡**:
```python
# å¸‚åœºæ•°æ®ç¼“å­˜é”®
market_data:{symbol}:{date}

# åŸºæœ¬é¢æ•°æ®ç¼“å­˜é”®
fundamental_data:{symbol}:{date}

# æ–°é—»æ•°æ®ç¼“å­˜é”®
news_data:{symbol}:{date}

# æƒ…ç»ªæ•°æ®ç¼“å­˜é”®
sentiment_data:{symbol}:{date}
```

**ç¼“å­˜TTL**:
```python
- å®æ—¶è¡Œæƒ…ï¼š5åˆ†é’Ÿ
- æ—¥Kçº¿æ•°æ®ï¼š1å°æ—¶
- åŸºæœ¬é¢æ•°æ®ï¼š1å¤©
- æ–°é—»æ•°æ®ï¼š30åˆ†é’Ÿ
- ç¤¾äº¤åª’ä½“æƒ…ç»ªï¼š1å°æ—¶
```

---

## 12. æ¶æ„è®¾è®¡æ€»ç»“

### 12.1 è®¾è®¡ä¼˜åŠ¿

**1. ç»Ÿä¸€æ€§**
- ç»Ÿä¸€çš„æ•°æ®æºç®¡ç†æ¥å£
- ç»Ÿä¸€çš„å·¥å…·è°ƒç”¨æ–¹å¼
- ç»Ÿä¸€çš„çŠ¶æ€ä¼ é€’æœºåˆ¶
- ç»Ÿä¸€çš„æ•°æ®æ ¼å¼

**2. å¯æ‰©å±•æ€§**
- æ–°å¢æ•°æ®æºï¼šç»§æ‰¿ BaseStockDataProvider
- æ–°å¢åˆ†æå¸ˆï¼šå®ç° create_xxx_analyst å‡½æ•°
- æ–°å¢å·¥å…·ï¼šæ·»åŠ åˆ° toolkit
- æ–°å¢ç¼“å­˜ï¼šå®ç° cache æ¥å£

**3. å¯é æ€§**
- æ•°æ®æºé™çº§æœºåˆ¶
- è‡ªåŠ¨é‡è¯•æœºåˆ¶
- é”™è¯¯å¤„ç†å’Œæ—¥å¿—
- æ­»å¾ªç¯é˜²æŠ¤

**4. æ€§èƒ½**
- å¤šå±‚ç¼“å­˜æ¶æ„
- å¼‚æ­¥æ•°æ®è·å–
- å¹¶è¡Œåˆ†æå¸ˆæ‰§è¡Œ
- æ•°æ®åº“è¿æ¥æ± 

**5. çµæ´»æ€§**
- æ”¯æŒå¤šå¸‚åœºï¼ˆAè‚¡/æ¸¯è‚¡/ç¾è‚¡ï¼‰
- æ”¯æŒå¤šæ•°æ®æº
- æ”¯æŒå¤š LLM
- æ”¯æŒåŠ¨æ€é…ç½®

### 12.2 å…³é”®è®¾è®¡æ¨¡å¼

**1. Strategy Patternï¼ˆç­–ç•¥æ¨¡å¼ï¼‰**
```python
# æ•°æ®æºç­–ç•¥
DataSourceManager æ ¹æ®å¸‚åœºç±»å‹é€‰æ‹©ä¸åŒçš„æ•°æ®æºç­–ç•¥

# LLMç­–ç•¥
create_llm_by_provider æ ¹æ®ä¾›åº”å•†åˆ›å»ºä¸åŒçš„ LLM å®ä¾‹
```

**2. Factory Patternï¼ˆå·¥å‚æ¨¡å¼ï¼‰**
```python
# åˆ†æå¸ˆå·¥å‚
def create_market_analyst(llm, toolkit)
def create_fundamentals_analyst(llm, toolkit)
def create_news_analyst(llm, toolkit)
```

**3. Template Methodï¼ˆæ¨¡æ¿æ–¹æ³•ï¼‰**
```python
# æ•°æ®æä¾›å™¨æ¨¡æ¿
BaseStockDataProvider å®šä¹‰ç»Ÿä¸€æ¥å£ï¼Œå­ç±»å®ç°å…·ä½“é€»è¾‘
```

**4. Observer Patternï¼ˆè§‚å¯Ÿè€…æ¨¡å¼ï¼‰**
```python
# è¿›åº¦å›è°ƒ
progress_callback è¢«è°ƒç”¨ï¼Œå®æ—¶æ›´æ–°åˆ†æè¿›åº¦
```

**5. Chain of Responsibilityï¼ˆè´£ä»»é“¾æ¨¡å¼ï¼‰**
```python
# æ•°æ®æºé™çº§é“¾
MongoDBç¼“å­˜ â†’ æ•°æ®åº“é…ç½® â†’ æ•°æ®æº1 â†’ æ•°æ®æº2 â†’ æ•°æ®æº3
```

### 12.3 é”™è¯¯å¤„ç†æœºåˆ¶

**1. æ•°æ®æºé”™è¯¯**
```python
try:
    data = tushare_provider.get_historical_data(...)
except Exception as e:
    logger.warning(f"Tushareè·å–å¤±è´¥ï¼Œé™çº§åˆ°AKShare: {e}")
    data = akshare_provider.get_historical_data(...)
```

**2. å·¥å…·è°ƒç”¨é”™è¯¯**
```python
# å·¥å…·è°ƒç”¨è®¡æ•°å™¨
tool_call_count = state.get("tool_call_count", 0)
max_tool_calls = 3

if tool_call_count >= max_tool_calls:
    logger.warning("å·¥å…·è°ƒç”¨æ¬¡æ•°å·²è¾¾ä¸Šé™ï¼Œè·³è¿‡")
    return state
```

**3. LLMè°ƒç”¨é”™è¯¯**
```python
try:
    response = llm.invoke(prompt)
except Exception as e:
    logger.error(f"LLMè°ƒç”¨å¤±è´¥: {e}")
    return {"error": str(e)}
```

**4. æ•°æ®éªŒè¯é”™è¯¯**
```python
# éªŒè¯è¿”å›æ•°æ®æœ‰æ•ˆæ€§
if not data or data.empty:
    logger.warning(f"æ•°æ®ä¸ºç©º: symbol={symbol}")
    return None
```

---

## 13. ä¼˜åŒ–å»ºè®®

### 13.1 æ€§èƒ½ä¼˜åŒ–

**1. ç¼“å­˜ä¼˜åŒ–**
- âœ… å·²å®ç°å¤šå±‚ç¼“å­˜
- å»ºè®®ï¼šæ·»åŠ ç¼“å­˜é¢„çƒ­æœºåˆ¶
- å»ºè®®ï¼šå®ç°æ™ºèƒ½ç¼“å­˜å¤±æ•ˆç­–ç•¥
- å»ºè®®ï¼šç›‘æ§ç¼“å­˜å‘½ä¸­ç‡

**2. å¹¶å‘ä¼˜åŒ–**
- å»ºè®®ï¼šåˆ†æå¸ˆå¹¶è¡Œæ‰§è¡Œï¼ˆå·²éƒ¨åˆ†å®ç°ï¼‰
- å»ºè®®ï¼šæ•°æ®æºå¹¶è¡Œè°ƒç”¨
- å»ºè®®ï¼šå¢åŠ å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—

**3. æ•°æ®åº“ä¼˜åŒ–**
- âœ… å·²å®ç°è¿æ¥æ± 
- å»ºè®®ï¼šæ·»åŠ ç´¢å¼•ä¼˜åŒ–
- å»ºè®®ï¼šå®ç°åˆ†é¡µæŸ¥è¯¢
- å»ºè®®ï¼šä¼˜åŒ–èšåˆæŸ¥è¯¢

### 13.2 ä»£ç ä¼˜åŒ–

**1. ä»£ç å¤ç”¨**
- âœ… å·²å®ç°ç»Ÿä¸€å·¥å…·
- âœ… å·²å®ç°è¾…åŠ©å‡½æ•°
- å»ºè®®ï¼šæå–æ›´å¤šå…¬å…±ä»£ç 
- å»ºè®®ï¼šå‡å°‘ä»£ç é‡å¤

**2. é”™è¯¯å¤„ç†**
- âœ… å·²å®ç°é™çº§æœºåˆ¶
- âœ… å·²å®ç°æ—¥å¿—è®°å½•
- å»ºè®®ï¼šæ·»åŠ æ›´è¯¦ç»†çš„é”™è¯¯åˆ†ç±»
- å»ºè®®ï¼šå®ç°é”™è¯¯é‡è¯•ç­–ç•¥

**3. æµ‹è¯•è¦†ç›–**
- å»ºè®®ï¼šæ·»åŠ å•å…ƒæµ‹è¯•
- å»ºè®®ï¼šæ·»åŠ é›†æˆæµ‹è¯•
- å»ºè®®ï¼šæ·»åŠ æ€§èƒ½æµ‹è¯•
- å»ºè®®ï¼šæ·»åŠ å‹åŠ›æµ‹è¯•

### 13.3 åŠŸèƒ½å¢å¼º

**1. æ•°æ®æºæ‰©å±•**
- å»ºè®®ï¼šæ·»åŠ æ›´å¤šæ•°æ®æº
- å»ºè®®ï¼šæ”¯æŒæ›´å¤šå¸‚åœº
- å»ºè®®ï¼šæ·»åŠ å®æ—¶æ•°æ®æ¨é€
- å»ºè®®ï¼šæ·»åŠ é‡åŒ–æ•°æ®

**2. åˆ†æå¸ˆå¢å¼º**
- å»ºè®®ï¼šå¢åŠ æŠ€æœ¯æŒ‡æ ‡
- å»ºè®®ï¼šå¢å¼ºåŸºæœ¬é¢åˆ†æ
- å»ºè®®ï¼šæ·»åŠ äº‹ä»¶é©±åŠ¨åˆ†æ
- å»ºè®®ï¼šå¢åŠ æƒ…ç»ªåˆ†æç»´åº¦

**3. ç”¨æˆ·ä½“éªŒ**
- å»ºè®®ï¼šä¼˜åŒ–è¿›åº¦æ˜¾ç¤º
- å»ºè®®ï¼šæ·»åŠ åˆ†æå†å²
- å»ºè®®ï¼šæ·»åŠ å¯¹æ¯”åˆ†æ
- å»ºè®®ï¼šæ·»åŠ å¯¼å‡ºåŠŸèƒ½

### 13.4 å®‰å…¨å¢å¼º

**1. APIå®‰å…¨**
- å»ºè®®ï¼šæ·»åŠ APIå¯†é’¥ç®¡ç†
- å»ºè®®ï¼šå®ç°è¯·æ±‚é™æµ
- å»ºè®®ï¼šæ·»åŠ è®¿é—®æ—¥å¿—
- å»ºè®®ï¼šå®ç°æƒé™æ§åˆ¶

**2. æ•°æ®å®‰å…¨**
- å»ºè®®ï¼šæ•°æ®åŠ å¯†
- å»ºè®®ï¼šè®¿é—®å®¡è®¡
- å»ºè®®ï¼šæ•°æ®è„±æ•
- å»ºè®®ï¼šå®šæœŸå¤‡ä»½

**3. éšç§ä¿æŠ¤**
- å»ºè®®ï¼šç”¨æˆ·æ•°æ®éš”ç¦»
- å»ºè®®ï¼šæ•°æ®åŒ¿ååŒ–
- å»ºè®®ï¼šéšç§æ”¿ç­–
- å»ºè®®ï¼šåˆè§„å®¡è®¡

---

## é™„å½•Aï¼šå…³é”®ä»£ç ç‰‡æ®µ

### A.1 æ•°æ®æºåˆ‡æ¢ä»£ç 

```python
def get_china_stock_data_unified(
    symbol: str,
    start_date: str,
    end_date: str,
    period: str = "daily"
) -> Optional[str]:
    """
    ç»Ÿä¸€çš„Aè‚¡æ•°æ®è·å–å‡½æ•°
    
    è‡ªåŠ¨è¯†åˆ«è‚¡ç¥¨ç±»å‹å¹¶è°ƒç”¨ç›¸åº”æ•°æ®æº
    """
    # 1. è¯†åˆ«å¸‚åœºç±»å‹
    market_info = StockUtils.get_market_info(symbol)
    
    # 2. è·å–æ•°æ®æºä¼˜å…ˆçº§
    source_priority = data_source_manager._get_data_source_priority_order(symbol)
    
    # 3. æŒ‰ä¼˜å…ˆçº§å°è¯•æ•°æ®æº
    for source in source_priority:
        try:
            if source == ChinaDataSource.MONGODB:
                data = get_from_mongodb(symbol, start_date, end_date)
            elif source == ChinaDataSource.TUSHARE:
                data = tushare_provider.get_historical_data(symbol, start_date, end_date)
            elif source == ChinaDataSource.AKSHARE:
                data = akshare_provider.get_historical_data(symbol, start_date, end_date)
            elif source == ChinaDataSource.BAOSTOCK:
                data = baostock_provider.get_historical_data(symbol, start_date, end_date)
            
            if data is not None:
                logger.info(f"âœ… ä½¿ç”¨ {source.value} è·å–æ•°æ®æˆåŠŸ")
                return format_data(data)
            
        except Exception as e:
            logger.warning(f"âš ï¸ {source.value} è·å–å¤±è´¥: {e}")
            continue
    
    return None
```

### A.2 å·¥å…·è°ƒç”¨ä»£ç 

```python
# ç»Ÿä¸€å¸‚åœºæ•°æ®å·¥å…·
@tool
def get_stock_market_data_unified(
    ticker: str,
    start_date: str,
    end_date: str
) -> str:
    """
    è·å–ç»Ÿä¸€çš„å¸‚åœºæ•°æ®ï¼ˆè‡ªåŠ¨è¯†åˆ«è‚¡ç¥¨ç±»å‹ï¼‰
    
    Args:
        ticker: è‚¡ç¥¨ä»£ç 
        start_date: å¼€å§‹æ—¥æœŸ
        end_date: ç»“æŸæ—¥æœŸ
    
    Returns:
        å¸‚åœºæ•°æ®å­—ç¬¦ä¸²
    """
    return get_china_stock_data_unified(ticker, start_date, end_date)

# ç»Ÿä¸€åŸºæœ¬é¢æ•°æ®å·¥å…·
@tool
def get_stock_fundamentals_unified(
    ticker: str,
    start_date: str,
    end_date: str
) -> str:
    """
    è·å–ç»Ÿä¸€çš„åŸºæœ¬é¢æ•°æ®ï¼ˆè‡ªåŠ¨è¯†åˆ«è‚¡ç¥¨ç±»å‹ï¼‰
    
    Args:
        ticker: è‚¡ç¥¨ä»£ç 
        start_date: å¼€å§‹æ—¥æœŸ
        end_date: ç»“æŸæ—¥æœŸ
    
    Returns:
        åŸºæœ¬é¢æ•°æ®å­—ç¬¦ä¸²
    """
    return get_stock_fundamentals_tushare(ticker)

# ç»Ÿä¸€æ–°é—»å·¥å…·
@tool
def get_stock_news_unified(
    stock_code: str,
    max_news: int = 10
) -> str:
    """
    è·å–ç»Ÿä¸€çš„æ–°é—»æ•°æ®ï¼ˆè‡ªåŠ¨è¯†åˆ«è‚¡ç¥¨ç±»å‹ï¼‰
    
    Args:
        stock_code: è‚¡ç¥¨ä»£ç 
        max_news: æœ€å¤§æ–°é—»æ•°é‡
    
    Returns:
        æ–°é—»æ•°æ®å­—ç¬¦ä¸²
    """
    return unified_news_tool(stock_code, max_news)

# ç»Ÿä¸€æƒ…ç»ªå·¥å…·
@tool
def get_stock_sentiment_unified(
    stock_code: str,
    days_back: int = 7
) -> str:
    """
    è·å–ç»Ÿä¸€çš„æƒ…ç»ªæ•°æ®ï¼ˆè‡ªåŠ¨è¯†åˆ«è‚¡ç¥¨ç±»å‹ï¼‰
    
    Args:
        stock_code: è‚¡ç¥¨ä»£ç 
        days_back: å›æº¯å¤©æ•°
    
    Returns:
        æƒ…ç»ªæ•°æ®å­—ç¬¦ä¸²
    """
    return get_chinese_social_sentiment(stock_code)
```

### A.3 çŠ¶æ€ä¼ é€’ä»£ç 

```python
# LangGraph èŠ‚ç‚¹å®šä¹‰
workflow = StateGraph(AgentState)

# æ·»åŠ èŠ‚ç‚¹
workflow.add_node("market_analyst", market_analyst_node)
workflow.add_node("fundamentals_analyst", fundamentals_analyst_node)
workflow.add_node("news_analyst", news_analyst_node)
workflow.add_node("social_media_analyst", social_media_analyst_node)
workflow.add_node("bull_researcher", bull_node)
workflow.add_node("bear_researcher", bear_node)
workflow.add_node("research_manager", research_manager_node)
workflow.add_node("trader", trader_node)

# æ·»åŠ è¾¹
workflow.set_entry_point("market_analyst")
workflow.add_edge("market_analyst", "fundamentals_analyst")
workflow.add_edge("fundamentals_analyst", "news_analyst")
workflow.add_edge("news_analyst", "social_media_analyst")
workflow.add_edge("social_media_analyst", "bull_researcher")

# æ·»åŠ æ¡ä»¶è¾¹
workflow.add_conditional_edges(
    "bull_researcher",
    should_continue_bear,
    {
        "continue": "bear_researcher",
        "end": "research_manager"
    }
)

# è®¾ç½®ç»“æŸç‚¹
workflow.set_finish_point("trader")
```

---

## é™„å½•Bï¼šé…ç½®æ–‡ä»¶

### B.1 é»˜è®¤é…ç½®

**æ–‡ä»¶**: `tradingagents/default_config.py`

```python
DEFAULT_CONFIG = {
    # LLMé…ç½®
    "llm_provider": "deepseek",
    "model_name": "deepseek-chat",
    "deep_think_model": "deepseek-chat",
    
    # è¾©è®ºé…ç½®
    "max_debate_rounds": 3,        # 3è½®è¾©è®º = 6æ¬¡äº¤é”‹
    "max_risk_discuss_rounds": 2,  # 2è½®è¾©è®º = 6æ¬¡äº¤é”‹
    
    # è®°å¿†é…ç½®
    "memory_enabled": True,
    "n_matches": 5,  # æ£€ç´¢5æ¡å†å²è®°å¿†
    
    # å·¥å…·è°ƒç”¨é…ç½®
    "max_tool_calls": 3,  # æœ€å¤§å·¥å…·è°ƒç”¨æ¬¡æ•°
    
    # æ•°æ®æºé…ç½®
    "default_china_data_source": "akshare",
    "default_us_data_source": "yfinance",
    
    # å¸‚åœºåˆ†æå¸ˆé…ç½®
    "market_analyst_lookback_days": 365,
    
    # åŸºæœ¬é¢åˆ†æå¸ˆé…ç½®
    "fundamentals_lookback_days": 10,
    
    # æ–°é—»åˆ†æå¸ˆé…ç½®
    "news_hours_back": 24,
    "max_news": 10,
    
    # ç¤¾äº¤åª’ä½“åˆ†æå¸ˆé…ç½®
    "sentiment_days_back": 7,
}
```

### B.2 ç¯å¢ƒå˜é‡é…ç½®

```bash
# LLM API å¯†é’¥
DEEPSEEK_API_KEY=sk-xxx
DASHSCOPE_API_KEY=sk-xxx
OPENAI_API_KEY=sk-xxx

# æ•°æ®æº Token
TUSHARE_TOKEN=xxx
FINNHUB_API_KEY=xxx

# æ•°æ®åº“è¿æ¥
MONGODB_CONNECTION_STRING=mongodb://localhost:27017/
REDIS_URL=redis://localhost:6379/

# ç¼“å­˜é…ç½®
TA_CACHE_STRATEGY=integrated
MONGODB_ENABLED=true
REDIS_ENABLED=true

# æ—¥å¿—é…ç½®
LOG_LEVEL=INFO
```

---

## ç»“è®º

TradingAgents-CN æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å¤šæ™ºèƒ½ä½“è‚¡ç¥¨åˆ†æç³»ç»Ÿï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

1. **ç»Ÿä¸€çš„æ•°æ®æºç®¡ç†**ï¼šæ”¯æŒå¤šå¸‚åœºã€å¤šæ•°æ®æºã€è‡ªåŠ¨é™çº§
2. **å¤šå±‚ç¼“å­˜æ¶æ„**ï¼šRedis + MongoDB + æ–‡ä»¶ç¼“å­˜ï¼Œæ€§èƒ½ä¼˜å¼‚
3. **å®Œæ•´åˆ†æå¸ˆç³»ç»Ÿ**ï¼šå¸‚åœºã€åŸºæœ¬é¢ã€æ–°é—»ã€ç¤¾äº¤åª’ä½“å››ç»´åº¦åˆ†æ
4. **æ™ºèƒ½è¾©è®ºæœºåˆ¶**ï¼šçœ‹æ¶¨/çœ‹è·Œç ”ç©¶å‘˜ + æŠ•èµ„ç ”ç©¶ç»ç† + é£é™©ç®¡ç†å›¢é˜Ÿ
5. **ä¸¥æ ¼çš„å·¥å…·è°ƒç”¨**ï¼šå¼ºåˆ¶ä½¿ç”¨çœŸå®æ•°æ®ï¼Œç¦æ­¢ç¼–é€ 
6. **å®Œå–„çš„é”™è¯¯å¤„ç†**ï¼šé™çº§ã€é‡è¯•ã€æ—¥å¿—è®°å½•

ç³»ç»Ÿæ¶æ„æ¸…æ™°ã€æ¨¡å—åŒ–ç¨‹åº¦é«˜ã€å¯æ‰©å±•æ€§å¼ºï¼Œæ˜¯ä¸€ä¸ªä¼˜ç§€çš„ä¼ä¸šçº§å¤šæ™ºèƒ½ä½“åº”ç”¨ã€‚
