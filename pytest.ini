# ==========================================
# TradingAgents-CN 测试配置
# ==========================================
#
# 测试规范（重要！请阅读）：
# 1. 所有正式测试必须使用 pytest 框架
# 2. 临时调试脚本应创建在 tests/debug/，完成后删除
# 3. 单元测试放在 tests/unit/
# 4. 集成测试放在 tests/integration/
# 5. 禁止在项目根目录或 tests/ 下直接创建 test_*.py（应放入子目录）
#
# ==========================================

[pytest]
# 测试发现路径
testpaths = tests
pythonpath = .

# 测试文件匹配模式
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# Asyncio 支持
asyncio_mode = auto
asyncio_default_fixture_loop_scope = function

# 日志配置
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(message)s (%(filename)s:%(lineno)s)
log_date_format = %Y-%m-%d %H:%M:%S

# 标记定义
markers =
    unit: Unit tests - 单元测试（快速，无外部依赖）
    integration: Integration tests - 集成测试（需要数据库/API）
    slow: Slow running tests - 耗时测试
    requires_auth: Tests requiring authentication - 需要认证
    requires_db: Tests requiring database connection - 需要数据库

# pytest 选项
addopts =
    --verbose
    --strict-markers
    --tb=short
    -p no:warnings
    --ignore=tests/legacy
    --ignore=tests/0.1.14
    --ignore=scripts/test
    --ignore=tests/debug
    --ignore=scripts/debug

# 环境变量（需要 pytest-env）
# env =
#     TESTING=true
